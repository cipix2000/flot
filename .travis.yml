dist: trusty
language: node_js
node_js:
- '8'
addons:
  firefox: latest
  chrome: stable
cache:
  directories:
  - node_modules
before_install:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm install -g greenkeeper-lockfile@1
before_script:
- greenkeeper-lockfile-update
- sudo chown root /opt/google/chrome/chrome-sandbox
- sudo chmod 4755 /opt/google/chrome/chrome-sandbox
after_script: greenkeeper-lockfile-upload
install:
- npm install
script:
- npm test
- npm run coverage
deploy:
  provider: npm
  email: webapps.ops@ni.com
  api_key:
    secure: rzcaM9cFAlvMYc4xTY7WLr2ySWyPoEss/l1xrE4oMstEddPCGjndmJBi37Ix2QwIjH0V5Ay+pXUljVWGqzoJrqSHgUP6VyoFgpKD5V9/wwz9nFv4uzW/Ykv4eBGHZ1+AE1+/3ycQa42J9442k6a6yLmF/PVuUdol9/3LtY7pMpH22ouwZLQlTQKBCb/VPSvhqMweWRpRdv5iPJuLzE/pGZPLI9HZMfVmxn6SZ/TsRvQw/M2rUWK24oMmdRD1iiiLYj1RJ3TOTovB7Lz0lxsAANh0DanIgdNAH9q0x+1GFyKBlYov+Xe1h3rYmJp9L885M3e5/04y70HhfJeXcQedFNyKh8I5aH+9cK5u8emQ5MoKQrQeK3d/2qUBDbDglHQT4KZId9BLtkBvcTvvN29xveT3Rot3pQZTAyI6vaBfW+sYzO5NThq5QIRTpAB/zjUBihmu2hdFrD/RAIHyVc5T0+Dr6j06bkxlLCz5YvPZTVrvwKN8egXj94TEyB25vI8p/4JNGIAF9DLNn8Po8cVpJjoOO6cLpZ03Q4udfJn8hxZq24GDQA8K8OlKcwGxoHhUsoRKYcx2mAfJO7a1/a2Hkxqr5x+SntnrzGcdR+AXl/ZS8VPR7dmQ2wUBSwM20+uRovEIXZ+ZPy28N7eAWH6kx/CuZOZA/do/cc/To4TuEC8=
  on:
    tags: true
    repo: ni-kismet/engineering-flot
  skip_cleanup: true