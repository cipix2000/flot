{"version":3,"sources":["jquery.canvaswrapper.js","jquery.colorhelpers.js","jquery.flot.js","jquery.flot.saturated.js","jquery.flot.browser.js","jquery.flot.drawSeries.js","jquery.flot.uiConstants.js","jquery.flot.logaxis.js","jquery.flot.symbol.js","jquery.flot.flatdata.js","jquery.flot.navigate.js","jquery.flot.stack.js","jquery.flot.touchNavigate.js","jquery.flot.hover.js","jquery.flot.touch.js","jquery.flot.absRelTime.js","jquery.flot.axislabels.js","jquery.flot.selection.js","jquery.flot.composeImages.js","jquery.flot.legend.js"],"names":["$","Canvas","cls","container","element","getElementsByClassName","document","createElement","className","style","direction","position","left","top","appendChild","getContext","Error","context","pixelRatio","plot","browser","getPixelRatio","box","getBoundingClientRect","resize","width","height","SVGContainer","SVG","_textCache","prototype","minSize","restore","save","scale","clear","clearRect","render","cache","layerKey","hasOwnProperty","call","layer","getSVGLayer","layerCache","display","styleKey","styleCache","key","val","positions","i","active","rendered","splice","firstChild","removeChild","parentNode","length","measured","classes","svgElement","bottom","right","pointerEvents","createElementNS","setAttribute","getTextInfo","text","font","angle","textStyle","info","variant","weight","size","lineHeight","family","generateKey","indexOf","addTspanElements","textNode","createTextNode","maxWidth","setAttributeNS","fill","elementRect","getBBox","addText","x","y","halign","valign","transforms","textContent","cloneNode","push","textAlign","forEach","t","transform","baseVal","appendItem","lines","split","tspan","offset","childNodes","removeText","htmlYCoord","clearCache","replace","window","Flot","jQuery","color","make","r","g","b","a","o","add","c","d","charAt","normalize","f","toString","join","clamp","min","value","max","parseInt","clone","extract","elem","css","toLowerCase","parent","nodeName","get","parse","str","res","m","exec","parseFloat","name","trim","lookupColors","aqua","azure","beige","black","blue","brown","cyan","darkblue","darkcyan","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkviolet","fuchsia","gold","green","indigo","khaki","lightblue","lightcyan","lightgreen","lightgrey","lightpink","lightyellow","lime","magenta","maroon","navy","olive","orange","pink","purple","violet","red","silver","white","yellow","defaultTickGenerator","axis","ticks","start","saturated","saturate","floorInBase","tickSize","v","Number","NaN","prev","MAX_VALUE","multiplyAdd","defaultTickFormatter","precision","oldTickDecimals","tickDecimals","expPosition","expRepTickFormatter","factor","Math","pow","formatted","round","decimal","decimalPrecision","decimals","substr","exponentValue","tenExponent","floor","log","LN10","roundWith","updatedPrecision","recomputePrecision","toFixed","num","log10Value","abs","LOG10E","newPrecision","Plot","placeholder","data_","options_","plugins","series","options","colors","xaxis","show","mode","tickColor","inverseTransform","autoScaleMargin","autoScale","windowSize","growOnly","tickFormatter","showTickLabels","labelWidth","labelHeight","reserveSpace","tickLength","showMinorTicks","showTicks","gridLines","alignTicksWithAxis","minTickSize","below","above","boxPosition","centerX","centerY","yaxis","xaxes","yaxes","points","radius","lineWidth","fillColor","symbol","steps","bars","horizontal","barWidth","align","zero","shadowSize","highlightColor","grid","aboveData","backgroundColor","borderColor","margin","labelMargin","axisMargin","borderWidth","minBorderMargin","markings","markingsColor","markingsLineWidth","clickable","hoverable","autoHighlight","mouseActiveRadius","interaction","redrawOverlayInterval","hooks","surface","overlay","eventHolder","ctx","octx","plotOffset","plotWidth","plotHeight","processOptions","processRawData","processDatapoints","processOffset","setupGrid","adjustSeriesDataRange","setRange","drawBackground","drawSeries","drawAxis","draw","axisReserveSpace","bindEvents","drawOverlay","shutdown","eventManager","redrawTimeout","setData","getPlaceholder","getCanvas","getSurface","getEventHolder","getPlotOffset","getData","getAxes","each","concat","_","n","getXAxes","getYAxes","c2p","canvasToCartesianAxisCoords","p2c","cartesianAxisToCanvasCoords","getOptions","triggerRedrawOverlay","pointOffset","point","axisNumber","destroy","removeData","empty","executeHooks","clearTextCache","autoScaleAxis","computeRangeForDataSeries","findNearbyItem","findNearbyInterpolationPoint","computeValuePrecision","computeTickSize","addEventHandler","MINOR_TICKS_COUNT_CONSTANT","uiConstants","TICK_LENGTH_CONSTANT","initPlugins","setupCanvases","parseOptions","hook","args","apply","p","init","extend","opts","axisOptions","axisCount","fontSize","fontSizeDefault","fontDefaults","getOrCreateAxis","allAxes","oldseries","parseData","fillInSeriesOptions","processData","s","data","obj","coord","filter","pos","used","x1","undefined","y1","axes","number","neededColors","maxIndex","sc","colorPool","colorPoolSize","variation","definedColors","colori","prevSeries","topSentry","POSITIVE_INFINITY","bottomSentry","NEGATIVE_INFINITY","j","k","ps","format","updateAxis","datamin","Infinity","datamax","reusePoints","datapoints","required","computeRange","defaultValue","expectedPs","pointsize","insertSteps","nullify","isNaN","every","range","xmin","xmax","ymin","ymax","children","hasClass","remove","unbind","existing","event","handler","priority","eventList","sort","eventData","bind","clearTimeout","setTransformationHelpers","identity","it","isFinite","delta","tp","measureTickLabels","showMajorTickLabels","showEndpointsTickLabels","legacyStyles","label","allocateAxisBoxFirstPhase","lw","lh","isXAxis","padding","innermost","outermost","found","allocateAxisBoxSecondPhase","adjustLayoutForThingsStickingOut","minMargin","margins","alignAxisWithGrid","ceil","isValid","showGrid","axisOpts","setupTickFormatter","allocatedAxes","grep","setupTickGeneration","setMajorTicks","snapRangeToTicks","setEndpointTicks","drawAxisLabels","widenMinMax","minimum","maximum","widen","wmin","widenedMinMax","autoScaledMin","autoScaledMax","tmp","noTicks","fixupNumberOfTicks","dec","magn","norm","getAxisTickSize","sqrt","ticksOption","Array","slice","arguments","tickGenerator","otherAxis","niceTicks","extraDec","ts","test","oticks","isFunction","newTick","type","getEndpointPrecision","canvas1","canvas2","point1","point2","isValidEndpointTick","unshift","associatedSeries","notAllBarSeries","some","drawGrid","getColorOrGradient","extractRange","ranges","from","to","translate","fillStyle","fillRect","drawMarkings","xrange","yrange","xequal","yequal","subPixel","beginPath","strokeStyle","moveTo","lineTo","stroke","findEdges","alignPosition","drawTickBar","edges","xoff","yoff","drawTickMarks","minorTicks","minorTicksNr","xminor","yminor","v1","v2","step","drawGridLines","overlappedWithBorder","bw","drawBorder","bc","strokeRect","nullBox","newLabelBox","labelBoxes","overlapping","x11","y11","x12","y12","x21","y21","x22","y22","overlapsOtherLabels","previousLabelBoxes","labelBox","drawAxisLabel","tick","drawSeriesLines","drawSymbol","drawSeriesBars","drawSeriesPoints","force","useAbsoluteBarWidth","computeBarWidth","minDistance","distance","mouseX","mouseY","seriesFilter","computeDistance","maxDistance","smallestDistance","item","dx","dy","dist","axisx","axisy","mx","my","maxx","maxy","datapoint","dataIndex","seriesIndex","posX","posY","comparer","x2","p1x","p1y","p2x","p2y","leftPoint","rightPoint","setTimeout","CustomEvent","dispatchEvent","spec","defaultColor","gradient","createLinearGradient","l","co","brightness","opacity","addColorStop","version","fn","linearTickGenerator","multiply","bInt","result","base","getPageXY","e","doc","documentElement","pageX","clientX","pageXOffset","scrollLeft","clientLeft","pageY","clientY","pageYOffset","scrollTop","clientTop","X","Y","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","isSafari","HTMLElement","safari","pushNotification","isMobileSafari","navigator","userAgent","match","isOpera","opr","addons","opera","isFirefox","InstallTrigger","isIE","documentMode","isEdge","StyleMedia","isChrome","chrome","webstore","isBlink","CSS","DrawSeries","plotLine","xoffset","yoffset","prevx","prevy","y2","plotLineArea","fillTowards","ypos","areaOpen","segmentStart","segmentEnd","x1old","x2old","lineJoin","dashes","setLineDash","decimate","getFillStyle","drawCircle","shadow","arc","PI","plotPoints","drawSymbolFn","decimatePoints","drawBar","barLeft","barRight","fillStyleCallback","drawLeft","drawRight","drawTop","drawBottom","plotBars","calculatedBottom","filloptions","seriesColor","SNAPPING_CONSTANT","PANHINT_LENGTH_CONSTANT","ZOOM_DISTANCE_MARGIN","PREFERRED_LOG_TICK_VALUES","computePreferedLogTickValues","EXTENDED_LOG_TICK_VALUES","endLimit","rangeStep","log10End","log10Start","vals","power","mult","logTickGenerator","minIdx","maxIdx","logTickValues","clampAxis","lastDisplayed","inverseNoTicks","tickValue","pixelCoord","idx","idealPixelCoord","reverse","customAxis","processAxisOffset","logTickFormatter","formattedValue","lastZero","lastIndexOf","logTransform","logInverseTransform","exp","invertedTransform","invertedLogTransform","invertedLogInverseTransform","setDataminRange","map","axisName","inverted","logTicksGenerator","square","rect","rectangle","diamond","triangle","sin","cross","ellipse","plus","handlers","process1DRawData","flatdata","zoom","interactive","amount","pan","cursor","frameRate","axisZoom","plotZoom","axisPan","plotPan","panAxes","canDrag","onZoomClick","zoomOut","page","ec","center","prevCursor","panHint","panTimeout","plotState","isPanAction","onMouseWheel","maxAbsoluteDeltaOnMac","isMacScroll","originalEvent","deltaY","defaultNonMacScrollAmount","macMagicRatio","onDragEnd","preventDefault","navigationState","startPageX","startPageY","Object","keys","navigationOffset","axisMin","axisMax","diagMode","onMouseDown","onMouseUp","isLeftMouseButtonPressed","button","onDragStart","onDrag","smartPan","onDblClick","activate","getTouchedAxis","Event","detail","axisTouched","trigger","onClick","mousewheel","dblclick","click","w","h","xf","yf","minmax","offsetBelow","offsetAbove","preventEvent","navigationOffsetBelow","navigationOffsetAbove","recenter","shouldSnap","adjustDeltaToSnap","isDiagonalMode","restoreAxisOffset","initialState","prevDelta","snap","end","startx","starty","endx","endy","dirX","touchPointX","touchPointY","stack","findMatchingSeries","allseries","addBottomPoints","formattedPoints","stackData","needsBottom","hasBottom","other","otherps","otherpoints","newpoints","px","py","intery","qx","qy","withlines","withsteps","fromgap","keyOffset","accumulateOffset","enableTouch","initTouchNavigation","gestureState","zoomEnable","prevDistance","prevTapTime","prevPanPosition","prevTapPosition","prevTouchedAxis","currentTouchedAxis","touchedAxis","navigationConstraint","pinch","doubleTap","addEventListener","drag","recenterPlot","removeEventListener","presetNavigationState","updateData","updatePrevPanPosition","wasPinchEvent","updateprevPanPosition","pinchDragTimeout","setPrevDistance","pinchDistance","zoomPlot","recenterPlotOnDoubleTap","gesture","getAxis","noAxisTouched","checkAxesForDoubleTap","firstTouch","secondTouch","zoomAmount","getPoint","touches","axisTouch1","axisTouch2","axisDir","t1","t2","initHover","highlights","eventType","hover","lastMouseMoveEvent","highlight","unhighlight","triggerCleanupEvent","tap","generatePlothoverEvent","mousemove","onMouseMove","onMouseLeave","doTriggerClickHoverEvent","searchDistance","eventToTrigger","seriesFlag","triggerClickHoverEvent","newEvent","changedTouches","eventname","canvasX","canvasY","auto","indexOfHighlight","hi","drawBarHighlight","drawPointHighlight","pointRadius","closePath","twoTouches","currentTapStart","currentTapEnd","prevTap","currentTap","interceptedLongTap","allowEventPropagation","tapStartTime","longTapTriggerId","maxDistanceBetweenTaps","maxIntervalBetweenTaps","maxLongTapDistance","minLongTapDuration","pressedTapDuration","mainEventHolder","interpretGestures","updateOnMultipleTouches","isPinchEvent","executeAction","isDoubleTap","onDoubleTap","longTap","touchstart","updatePrevForDoubleTap","updateCurrentForDoubleTap","updateStateForLongTapStart","touchmove","preventEventPropagation","updateStateForLongTapEnd","touchend","noTouchActive","waitForLongTap","isLongTap","currentTime","Date","getTime","tapDuration","longTapTrigger","isTap","intervalBetweenTaps","stopPropagation","target","timezone","timeformat","twelveHourClock","monthNames","timeEpoch","formatDate","fmt","dayNames","showMilliseconds","strftime","leftPad","pad","padNTimes","nTimes","addMilliseconds","date","ms","parts","sufix","formatLanguage","NIEmbeddedBrowser","locale","getFormatterOptions","formatString","getFormattedDateString","formatOptions","showYear","Intl","DateTimeFormat","year","month","day","formatParts","formatToParts","formatPartsTypeList","dayIndex","monthIndex","dayMonthDelimiter","dayValue","monthValue","yearValue","padAmount","getFractionalSecondsString","milliseconds","forceFractionalSeconds","fractionalSecondsIndex","fractionalSecondsSearch","RegExp","fallbackDigitCount","numberOfFractionalSeconds","fractionalSecondsString","substring","getFormattedTimeString","showTime","getMilliseconds","formattedDate","hour","minute","second","lastDigitSearch","lastIndex","hourIndex","minuteIndex","hourMinuteDelimiter","hourValue","minuteValue","showSeconds","secondValue","dayPeriod","getFormattedDateTimeString","language","browserLanguage","languages","dateString","timeString","getDefaultDateTimeString","gregorianDate","msString","time","Globalize","toAbsoluteTimeStr","unixToAbsoluteEpochDiff","minDateValue","valueOf","makeUtcWrapper","err","toRelativeTimeStr","dateValue","valueOfFirstData","dateInSeconds","seconds","dateInMinutes","minutes","dateInHours","hours","days","escape","localDateValue","getDate","timeFormatStartIndex","timeFormatEndIndex","timeFormat","addProxyMethod","sourceObj","sourceMethod","targetObj","targetMethod","utc","props","dateGenerator","maxDateValue","timezoneJS","setTimezone","setTime","timeUnitSize","baseSpec","specMonths","specQuarters","updateAxisFirstData","plotData","firstPlotData","minFirstPlotData","unit","setMilliseconds","setSeconds","getSeconds","setMinutes","getMinutes","setHours","getHours","setMonth","getMonth","setFullYear","getFullYear","setDate","quarter","carry","v1000","axisLabels","AxisLabel","axisLabel","calculateSize","axisId","layerId","degrees","svgLayer","rotate","createSVGTransform","setTranslate","setRotate","calculateOffsets","offsets","cleanup","defaultPadding","axisLabelPadding","flotAxisName","selection","first","currentMode","savedhandlers","mouseUpHandler","updateSelection","getSelection","which","body","focus","onselectstart","ondrag","setSelectionPos","one","selectionIsSane","triggerSelectedEvent","c1","c2","selectionDirection","p1","p2","updateMode","clearSelection","setSelection","mousedown","drawSelectionDecorations","oX","oY","spacing","fullEarWidth","earWidth","shape","GENERALFAILURECALLBACKERROR","SUCCESSFULIMAGEPREPARATION","EMPTYARRAYOFIMAGESOURCES","NEGATIVEIMAGESIZE","composeImages","canvasOrSvgSources","destinationCanvas","validCanvasOrSvgSources","isValidSource","allImgCompositionPromises","validCanvasOrSvgSource","tempImg","Image","currentPromise","Promise","getGenerateTempImg","lastPromise","all","then","getExecuteImgComposition","failureCallback","canvasOrSvgSource","isValidFromCanvas","isValidFromContent","tagName","getComputedStyle","visibility","sourceDescription","id","sourceComponent","doGenerateTempImg","successCallbackFunc","failureCallbackFunc","onload","evt","successfullyLoaded","onabort","console","onerror","generateTempImageFromCanvasOrSvg","executeImgComposition","tempImgs","compositionResult","copyImgsToCanvas","copyCanvasToImg","canvas","img","src","toDataURL","getCSSRules","styleSheets","rulesList","rules","cssRules","rule","cssText","embedCSSRulesInSVG","svg","classList","innerHTML","copySVGToImgMostBrowsers","source","patchSVGSource","blob","Blob","domURL","self","URL","webkitURL","url","createObjectURL","copySVGToImgSafari","buildBinaryString","arrayBuffer","binaryString","utf8Array","Uint8Array","blockSize","binarySubString","String","fromCharCode","subarray","utf8BinaryString","TextEncoder","TextEncoderLite","encode","btoa","svgSource","copySVGToImg","adaptDestSizeToZoom","sources","containsSVGs","srcImgTagName","find","prepareImagesToBeComposed","destination","minX","genLeft","minY","genTop","maxX","genRight","maxY","genBottom","xCompOffset","yCompOffset","prepareImagesResult","destinationCtx","drawImage","adnotateDestImgWithBoundingClientRect","srcCanvasOrSvg","destImg","defaultOptions","legend","labelFormatter","sorted","insertLegend","legendEntries","html","entries","entry","labelHtml","iconHtml","maxLabelLength","xPos","yPos","svgShapeDefs","getEntryIconHtml","strokeColor","strokeWidth","legendEl","appendTo","getLegendEntries","lf","ascending","checkOptions","opts1","opts2","prop","shouldRedraw","oldEntries","newEntries","newEntry","oldEntry","newOpts","oldOpts","oldPlotOffset","newPlotOffset"],"mappings":"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","file":"jquery.flot.js","sourcesContent":["/** ## jquery.flot.canvaswrapper\n\nThis plugin contains the function for creating and manipulating both the canvas\nlayers and svg layers.\n\nThe Canvas object is a wrapper around an HTML5 canvas tag.\nThe constructor Canvas(cls, container) takes as parameters cls,\nthe list of classes to apply to the canvas adnd the containter,\nelement onto which to append the canvas. The canvas operations\ndon't work unless the canvas is attached to the DOM.\n\n### jquery.canvaswrapper.js API functions\n*/\n\n(function($) {\n    var Canvas = function(cls, container) {\n        var element = container.getElementsByClassName(cls)[0];\n\n        if (!element) {\n            element = document.createElement('canvas');\n            element.className = cls;\n            element.style.direction = 'ltr';\n            element.style.position = 'absolute';\n            element.style.left = '0px';\n            element.style.top = '0px';\n\n            container.appendChild(element);\n\n            // If HTML5 Canvas isn't available, throw\n\n            if (!element.getContext) {\n                throw new Error('Canvas is not available.');\n            }\n        }\n\n        this.element = element;\n\n        var context = this.context = element.getContext('2d');\n        this.pixelRatio = $.plot.browser.getPixelRatio(context);\n\n        // Size the canvas to match the internal dimensions of its container\n\n        var box = container.getBoundingClientRect();\n        this.resize(box.width, box.height);\n\n        // Collection of HTML div layers for text overlaid onto the canvas\n\n        this.SVGContainer = null;\n        this.SVG = {};\n\n        // Cache of text fragments and metrics, so we can avoid expensively\n        // re-calculating them when the plot is re-rendered in a loop.\n\n        this._textCache = {};\n    }\n\n    /**\n    - resize(width, height)\n\n     Resizes the canvas to the given dimensions.\n     The width represents the new width of the canvas, meanwhile the height\n     is the new height of the canvas, both of them in pixels.\n    */\n\n    Canvas.prototype.resize = function(width, height) {\n        var minSize = 10;\n        width = width < minSize ? minSize : width;\n        height = height < minSize ? minSize : height;\n\n        var element = this.element,\n            context = this.context,\n            pixelRatio = this.pixelRatio;\n\n        // Resize the canvas, increasing its density based on the display's\n        // pixel ratio; basically giving it more pixels without increasing the\n        // size of its element, to take advantage of the fact that retina\n        // displays have that many more pixels in the same advertised space.\n\n        // Resizing should reset the state (excanvas seems to be buggy though)\n\n        if (this.width !== width) {\n            element.width = width * pixelRatio;\n            element.style.width = width + 'px';\n            this.width = width;\n        }\n\n        if (this.height !== height) {\n            element.height = height * pixelRatio;\n            element.style.height = height + 'px';\n            this.height = height;\n        }\n\n        // Save the context, so we can reset in case we get replotted.  The\n        // restore ensure that we're really back at the initial state, and\n        // should be safe even if we haven't saved the initial state yet.\n\n        context.restore();\n        context.save();\n\n        // Scale the coordinate space to match the display density; so even though we\n        // may have twice as many pixels, we still want lines and other drawing to\n        // appear at the same size; the extra pixels will just make them crisper.\n\n        context.scale(pixelRatio, pixelRatio);\n    };\n\n    /**\n    - clear()\n\n     Clears the entire canvas area, not including any overlaid HTML text\n    */\n    Canvas.prototype.clear = function() {\n        this.context.clearRect(0, 0, this.width, this.height);\n    };\n\n    /**\n    - render()\n\n     Finishes rendering the canvas, including managing the text overlay.\n    */\n    Canvas.prototype.render = function() {\n        var cache = this._textCache;\n\n        // For each text layer, add elements marked as active that haven't\n        // already been rendered, and remove those that are no longer active.\n\n        for (var layerKey in cache) {\n            if (hasOwnProperty.call(cache, layerKey)) {\n                var layer = this.getSVGLayer(layerKey),\n                    layerCache = cache[layerKey];\n\n                var display = layer.style.display;\n                layer.style.display = 'none';\n\n                for (var styleKey in layerCache) {\n                    if (hasOwnProperty.call(layerCache, styleKey)) {\n                        var styleCache = layerCache[styleKey];\n                        for (var key in styleCache) {\n                            if (hasOwnProperty.call(styleCache, key)) {\n                                var val = styleCache[key],\n                                    positions = val.positions;\n\n                                for (var i = 0, position; positions[i]; i++) {\n                                    position = positions[i];\n                                    if (position.active) {\n                                        if (!position.rendered) {\n                                            layer.appendChild(position.element);\n                                            position.rendered = true;\n                                        }\n                                    } else {\n                                        positions.splice(i--, 1);\n                                        if (position.rendered) {\n                                            while (position.element.firstChild) {\n                                                position.element.removeChild(position.element.firstChild);\n                                            }\n                                            position.element.parentNode.removeChild(position.element);\n                                        }\n                                    }\n                                }\n\n                                if (positions.length === 0) {\n                                    if (val.measured) {\n                                        val.measured = false;\n                                    } else {\n                                        delete styleCache[key];\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n\n                layer.style.display = display;\n            }\n        }\n    };\n\n    /**\n    - getSVGLayer(classes)\n\n     Creates (if necessary) and returns the SVG overlay container.\n     The classes string represents the string of space-separated CSS classes\n     used to uniquely identify the text layer. It return the svg-layer div.\n    */\n    Canvas.prototype.getSVGLayer = function(classes) {\n        var layer = this.SVG[classes];\n\n        // Create the SVG layer if it doesn't exist\n\n        if (!layer) {\n            // Create the svg layer container, if it doesn't exist\n\n            var svgElement;\n\n            if (!this.SVGContainer) {\n                this.SVGContainer = document.createElement('div');\n                this.SVGContainer.className = 'flot-svg';\n                this.SVGContainer.style.position = 'absolute';\n                this.SVGContainer.style.top = '0px';\n                this.SVGContainer.style.left = '0px';\n                this.SVGContainer.style.bottom = '0px';\n                this.SVGContainer.style.right = '0px';\n                this.SVGContainer.style.pointerEvents = 'none';\n                this.element.parentNode.appendChild(this.SVGContainer);\n\n                svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n                svgElement.style.width = '100%';\n                svgElement.style.height = '100%';\n\n                this.SVGContainer.appendChild(svgElement);\n            } else {\n                svgElement = this.SVGContainer.firstChild;\n            }\n\n            layer = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n            layer.setAttribute('class', classes);\n            layer.style.position = 'absolute';\n            layer.style.top = '0px';\n            layer.style.left = '0px';\n            layer.style.bottom = '0px';\n            layer.style.right = '0px';\n            svgElement.appendChild(layer);\n            this.SVG[classes] = layer;\n        }\n\n        return layer;\n    };\n\n    /**\n    - getTextInfo(layer, text, font, angle, width)\n\n     Creates (if necessary) and returns a text info object.\n     The object looks like this:\n     ```js\n     {\n         width //Width of the text's wrapper div.\n         height //Height of the text's wrapper div.\n         element //The HTML div containing the text.\n         positions //Array of positions at which this text is drawn.\n      }\n      ```\n      The positions array contains objects that look like this:\n      ```js\n      {\n         active //Flag indicating whether the text should be visible.\n         rendered //Flag indicating whether the text is currently visible.\n         element //The HTML div containing the text.\n         text //The actual text and is identical with element[0].textContent.\n         x //X coordinate at which to draw the text.\n         y //Y coordinate at which to draw the text.\n      }\n      ```\n      Each position after the first receives a clone of the original element.\n      The idea is that that the width, height, and general 'identity' of the\n      text is constant no matter where it is placed; the placements are a\n      secondary property.\n\n      Canvas maintains a cache of recently-used text info objects; getTextInfo\n      either returns the cached element or creates a new entry.\n\n     The layer parameter is string of space-separated CSS classes uniquely\n     identifying the layer containing this text.\n     Text is the text string to retrieve info for.\n     Font is either a string of space-separated CSS classes or a font-spec object,\n     defining the text's font and style.\n     Angle is the angle at which to rotate the text, in degrees. Angle is currently unused,\n     it will be implemented in the future.\n     The last parameter is the Maximum width of the text before it wraps.\n     The method returns a text info object.\n    */\n    Canvas.prototype.getTextInfo = function(layer, text, font, angle, width) {\n        var textStyle, layerCache, styleCache, info;\n\n        // Cast the value to a string, in case we were given a number or such\n\n        text = '' + text;\n\n        // If the font is a font-spec object, generate a CSS font definition\n\n        if (typeof font === 'object') {\n            textStyle = font.style + ' ' + font.variant + ' ' + font.weight + ' ' + font.size + 'px/' + font.lineHeight + 'px ' + font.family;\n        } else {\n            textStyle = font;\n        }\n\n        // Retrieve (or create) the cache for the text's layer and styles\n\n        layerCache = this._textCache[layer];\n\n        if (layerCache == null) {\n            layerCache = this._textCache[layer] = {};\n        }\n\n        styleCache = layerCache[textStyle];\n\n        if (styleCache == null) {\n            styleCache = layerCache[textStyle] = {};\n        }\n\n        var key = generateKey(text);\n        info = styleCache[key];\n\n        // If we can't find a matching element in our cache, create a new one\n\n        if (!info) {\n            var element = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n            if (text.indexOf('<br>') !== -1) {\n                addTspanElements(text, element, -9999);\n            } else {\n                var textNode = document.createTextNode(text);\n                element.appendChild(textNode);\n            }\n\n            element.style.position = 'absolute';\n            element.style.maxWidth = width;\n            element.setAttributeNS(null, 'x', -9999);\n            element.setAttributeNS(null, 'y', -9999);\n\n            if (typeof font === 'object') {\n                element.style.font = textStyle;\n                element.style.fill = font.fill;\n            } else if (typeof font === 'string') {\n                element.setAttribute('class', font);\n            }\n\n            this.getSVGLayer(layer).appendChild(element);\n            var elementRect = element.getBBox();\n\n            info = styleCache[key] = {\n                width: elementRect.width,\n                height: elementRect.height,\n                measured: true,\n                element: element,\n                positions: []\n            };\n\n            //remove elements from dom\n            while (element.firstChild) {\n                element.removeChild(element.firstChild);\n            }\n            element.parentNode.removeChild(element);\n        }\n\n        info.measured = true;\n        return info;\n    };\n\n    /**\n    - addText (layer, x, y, text, font, angle, width, halign, valign, transforms)\n\n     Adds a text string to the canvas text overlay.\n     The text isn't drawn immediately; it is marked as rendering, which will\n     result in its addition to the canvas on the next render pass.\n\n     The layer is string of space-separated CSS classes uniquely\n     identifying the layer containing this text.\n     X and Y represents the X and Y coordinate at which to draw the text.\n     and text is the string to draw\n    */\n    Canvas.prototype.addText = function(layer, x, y, text, font, angle, width, halign, valign, transforms) {\n        var info = this.getTextInfo(layer, text, font, angle, width),\n            positions = info.positions;\n\n        // Tweak the div's position to match the text's alignment\n\n        if (halign === 'center') {\n            x -= info.width / 2;\n        } else if (halign === 'right') {\n            x -= info.width;\n        }\n\n        if (valign === 'middle') {\n            y -= info.height / 2;\n        } else if (valign === 'bottom') {\n            y -= info.height;\n        }\n\n        y += 0.75 * info.height;\n\n        // Determine whether this text already exists at this position.\n        // If so, mark it for inclusion in the next render pass.\n\n        for (var i = 0, position; positions[i]; i++) {\n            position = positions[i];\n            if (position.x === x && position.y === y && position.text === text) {\n                position.active = true;\n                return;\n            } else if (position.active === false) {\n                position.active = true;\n                position.text = text;\n                if (text.indexOf('<br>') !== -1) {\n                    y -= 0.25 * info.height;\n                    addTspanElements(text, position.element, x);\n                } else {\n                    position.element.textContent = text;\n                }\n                position.element.setAttributeNS(null, 'x', x);\n                position.element.setAttributeNS(null, 'y', y);\n                position.x = x;\n                position.y = y;\n                return;\n            }\n        }\n\n        // If the text doesn't exist at this position, create a new entry\n\n        // For the very first position we'll re-use the original element,\n        // while for subsequent ones we'll clone it.\n\n        position = {\n            active: true,\n            rendered: false,\n            element: positions.length ? info.element.cloneNode() : info.element,\n            text: text,\n            x: x,\n            y: y\n        };\n\n        positions.push(position);\n\n        if (text.indexOf('<br>') !== -1) {\n            y -= 0.25 * info.height;\n            addTspanElements(text, position.element, x);\n        } else {\n            position.element.textContent = text;\n        }\n\n        // Move the element to its final position within the container\n        position.element.setAttributeNS(null, 'x', x);\n        position.element.setAttributeNS(null, 'y', y);\n        position.element.style.textAlign = halign;\n\n        if (transforms) {\n            transforms.forEach(function(t) {\n                info.element.transform.baseVal.appendItem(t);\n            });\n        }\n    };\n\n    var addTspanElements = function(text, element, x) {\n        var lines = text.split('<br>'),\n            tspan, i, offset;\n\n        for (i = 0; i < lines.length; i++) {\n            if (!element.childNodes[i]) {\n                tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\n                element.appendChild(tspan);\n            } else {\n                tspan = element.childNodes[i];\n            }\n            tspan.textContent = lines[i];\n            offset = i * 1 + 'em';\n            tspan.setAttributeNS(null, 'dy', offset);\n            tspan.setAttributeNS(null, 'x', x);\n        }\n    }\n\n    /**\n    - removeText (layer, x, y, text, font, angle)\n\n      The function removes one or more text strings from the canvas text overlay.\n      If no parameters are given, all text within the layer is removed.\n\n      Note that the text is not immediately removed; it is simply marked as\n      inactive, which will result in its removal on the next render pass.\n      This avoids the performance penalty for 'clear and redraw' behavior,\n      where we potentially get rid of all text on a layer, but will likely\n      add back most or all of it later, as when redrawing axes, for example.\n\n      The layer is a string of space-separated CSS classes uniquely\n      identifying the layer containing this text. The following parameter are\n      X and Y coordinate of the text.\n      Text is the string to remove, while the font is either a string of space-separated CSS\n      classes or a font-spec object, defining the text's font and style.\n     */\n    Canvas.prototype.removeText = function(layer, x, y, text, font, angle) {\n        var info, htmlYCoord;\n        if (text == null) {\n            var layerCache = this._textCache[layer];\n            if (layerCache != null) {\n                for (var styleKey in layerCache) {\n                    if (hasOwnProperty.call(layerCache, styleKey)) {\n                        var styleCache = layerCache[styleKey];\n                        for (var key in styleCache) {\n                            if (hasOwnProperty.call(styleCache, key)) {\n                                var positions = styleCache[key].positions;\n                                positions.forEach(function(position) {\n                                    position.active = false;\n                                });\n                            }\n                        }\n                    }\n                }\n            }\n        } else {\n            info = this.getTextInfo(layer, text, font, angle);\n            positions = info.positions;\n            positions.forEach(function(position) {\n                htmlYCoord = y + 0.75 * info.height;\n                if (position.x === x && position.y === htmlYCoord && position.text === text) {\n                    position.active = false;\n                }\n            });\n        }\n    };\n\n    /**\n    - clearCache()\n\n     Clears the cache used to speed up the text size measurements.\n     As an (unfortunate) side effect all text within the text Layer is removed.\n     Use this function before plot.setupGrid() and plot.draw() if the plot just\n     became visible or the styles changed.\n    */\n    Canvas.prototype.clearCache = function() {\n        var cache = this._textCache;\n        for (var layerKey in cache) {\n            if (hasOwnProperty.call(cache, layerKey)) {\n                var layer = this.getSVGLayer(layerKey);\n                while (layer.firstChild) {\n                    layer.removeChild(layer.firstChild);\n                }\n            }\n        };\n\n        this._textCache = {};\n    };\n\n    function generateKey(text) {\n        return text.replace(/0|1|2|3|4|5|6|7|8|9/g, '0');\n    }\n\n    if (!window.Flot) {\n        window.Flot = {};\n    }\n\n    window.Flot.Canvas = Canvas;\n})(jQuery);\n","/* Plugin for jQuery for working with colors.\n *\n * Version 1.1.\n *\n * Inspiration from jQuery color animation plugin by John Resig.\n *\n * Released under the MIT license by Ole Laursen, October 2009.\n *\n * Examples:\n *\n *   $.color.parse(\"#fff\").scale('rgb', 0.25).add('a', -0.5).toString()\n *   var c = $.color.extract($(\"#mydiv\"), 'background-color');\n *   console.log(c.r, c.g, c.b, c.a);\n *   $.color.make(100, 50, 25, 0.4).toString() // returns \"rgba(100,50,25,0.4)\"\n *\n * Note that .scale() and .add() return the same modified object\n * instead of making a new one.\n *\n * V. 1.1: Fix error handling so e.g. parsing an empty string does\n * produce a color rather than just crashing.\n */\n\n(function($) {\n    $.color = {};\n\n    // construct color object with some convenient chainable helpers\n    $.color.make = function (r, g, b, a) {\n        var o = {};\n        o.r = r || 0;\n        o.g = g || 0;\n        o.b = b || 0;\n        o.a = a != null ? a : 1;\n\n        o.add = function (c, d) {\n            for (var i = 0; i < c.length; ++i) {\n                o[c.charAt(i)] += d;\n            }\n\n            return o.normalize();\n        };\n\n        o.scale = function (c, f) {\n            for (var i = 0; i < c.length; ++i) {\n                o[c.charAt(i)] *= f;\n            }\n\n            return o.normalize();\n        };\n\n        o.toString = function () {\n            if (o.a >= 1.0) {\n                return \"rgb(\" + [o.r, o.g, o.b].join(\",\") + \")\";\n            } else {\n                return \"rgba(\" + [o.r, o.g, o.b, o.a].join(\",\") + \")\";\n            }\n        };\n\n        o.normalize = function () {\n            function clamp(min, value, max) {\n                return value < min ? min : (value > max ? max : value);\n            }\n\n            o.r = clamp(0, parseInt(o.r), 255);\n            o.g = clamp(0, parseInt(o.g), 255);\n            o.b = clamp(0, parseInt(o.b), 255);\n            o.a = clamp(0, o.a, 1);\n            return o;\n        };\n\n        o.clone = function () {\n            return $.color.make(o.r, o.b, o.g, o.a);\n        };\n\n        return o.normalize();\n    }\n\n    // extract CSS color property from element, going up in the DOM\n    // if it's \"transparent\"\n    $.color.extract = function (elem, css) {\n        var c;\n\n        do {\n            c = elem.css(css).toLowerCase();\n            // keep going until we find an element that has color, or\n            // we hit the body or root (have no parent)\n            if (c !== '' && c !== 'transparent') {\n                break;\n            }\n\n            elem = elem.parent();\n        } while (elem.length && !$.nodeName(elem.get(0), \"body\"));\n\n        // catch Safari's way of signalling transparent\n        if (c === \"rgba(0, 0, 0, 0)\") {\n            c = \"transparent\";\n        }\n\n        return $.color.parse(c);\n    }\n\n    // parse CSS color string (like \"rgb(10, 32, 43)\" or \"#fff\"),\n    // returns color object, if parsing failed, you get black (0, 0,\n    // 0) out\n    $.color.parse = function (str) {\n        var res, m = $.color.make;\n\n        // Look for rgb(num,num,num)\n        res = /rgb\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*\\)/.exec(str);\n        if (res) {\n            return m(parseInt(res[1], 10), parseInt(res[2], 10), parseInt(res[3], 10));\n        }\n\n        // Look for rgba(num,num,num,num)\n        res = /rgba\\(\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]{1,3})\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str)\n        if (res) {\n            return m(parseInt(res[1], 10), parseInt(res[2], 10), parseInt(res[3], 10), parseFloat(res[4]));\n        }\n\n        // Look for rgb(num%,num%,num%)\n        res = /rgb\\(\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*\\)/.exec(str);\n        if (res) {\n            return m(parseFloat(res[1]) * 2.55, parseFloat(res[2]) * 2.55, parseFloat(res[3]) * 2.55);\n        }\n\n        // Look for rgba(num%,num%,num%,num)\n        res = /rgba\\(\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)%\\s*,\\s*([0-9]+(?:\\.[0-9]+)?)\\s*\\)/.exec(str);\n        if (res) {\n            return m(parseFloat(res[1]) * 2.55, parseFloat(res[2]) * 2.55, parseFloat(res[3]) * 2.55, parseFloat(res[4]));\n        }\n\n        // Look for #a0b1c2\n        res = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(str);\n        if (res) {\n            return m(parseInt(res[1], 16), parseInt(res[2], 16), parseInt(res[3], 16));\n        }\n\n        // Look for #fff\n        res = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(str);\n        if (res) {\n            return m(parseInt(res[1] + res[1], 16), parseInt(res[2] + res[2], 16), parseInt(res[3] + res[3], 16));\n        }\n\n        // Otherwise, we're most likely dealing with a named color\n        var name = $.trim(str).toLowerCase();\n        if (name === \"transparent\") {\n            return m(255, 255, 255, 0);\n        } else {\n            // default to black\n            res = lookupColors[name] || [0, 0, 0];\n            return m(res[0], res[1], res[2]);\n        }\n    }\n\n    var lookupColors = {\n        aqua: [0, 255, 255],\n        azure: [240, 255, 255],\n        beige: [245, 245, 220],\n        black: [0, 0, 0],\n        blue: [0, 0, 255],\n        brown: [165, 42, 42],\n        cyan: [0, 255, 255],\n        darkblue: [0, 0, 139],\n        darkcyan: [0, 139, 139],\n        darkgrey: [169, 169, 169],\n        darkgreen: [0, 100, 0],\n        darkkhaki: [189, 183, 107],\n        darkmagenta: [139, 0, 139],\n        darkolivegreen: [85, 107, 47],\n        darkorange: [255, 140, 0],\n        darkorchid: [153, 50, 204],\n        darkred: [139, 0, 0],\n        darksalmon: [233, 150, 122],\n        darkviolet: [148, 0, 211],\n        fuchsia: [255, 0, 255],\n        gold: [255, 215, 0],\n        green: [0, 128, 0],\n        indigo: [75, 0, 130],\n        khaki: [240, 230, 140],\n        lightblue: [173, 216, 230],\n        lightcyan: [224, 255, 255],\n        lightgreen: [144, 238, 144],\n        lightgrey: [211, 211, 211],\n        lightpink: [255, 182, 193],\n        lightyellow: [255, 255, 224],\n        lime: [0, 255, 0],\n        magenta: [255, 0, 255],\n        maroon: [128, 0, 0],\n        navy: [0, 0, 128],\n        olive: [128, 128, 0],\n        orange: [255, 165, 0],\n        pink: [255, 192, 203],\n        purple: [128, 0, 128],\n        violet: [128, 0, 128],\n        red: [255, 0, 0],\n        silver: [192, 192, 192],\n        white: [255, 255, 255],\n        yellow: [255, 255, 0]\n    };\n})(jQuery);\n","/* Javascript plotting library for jQuery, version 1.0.3.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\n*/\n\n// the actual Flot code\n(function($) {\n    \"use strict\";\n\n    var Canvas = window.Flot.Canvas;\n\n    function defaultTickGenerator(axis) {\n        var ticks = [],\n            start = $.plot.saturated.saturate($.plot.saturated.floorInBase(axis.min, axis.tickSize)),\n            i = 0,\n            v = Number.NaN,\n            prev;\n\n        if (start === -Number.MAX_VALUE) {\n            ticks.push(start);\n            start = $.plot.saturated.floorInBase(axis.min + axis.tickSize, axis.tickSize);\n        }\n\n        do {\n            prev = v;\n            //v = start + i * axis.tickSize;\n            v = $.plot.saturated.multiplyAdd(axis.tickSize, i, start);\n            ticks.push(v);\n            ++i;\n        } while (v < axis.max && v !== prev);\n\n        return ticks;\n    }\n\n    function defaultTickFormatter(value, axis, precision) {\n        var oldTickDecimals = axis.tickDecimals,\n            expPosition = (\"\" + value).indexOf(\"e\");\n\n        if (expPosition !== -1) {\n            return expRepTickFormatter(value, axis, precision);\n        }\n\n        if (precision > 0) {\n            axis.tickDecimals = precision;\n        }\n\n        var factor = axis.tickDecimals ? Math.pow(10, axis.tickDecimals) : 1,\n            formatted = \"\" + Math.round(value * factor) / factor;\n\n        // If tickDecimals was specified, ensure that we have exactly that\n        // much precision; otherwise default to the value's own precision.\n        if (axis.tickDecimals != null) {\n            var decimal = formatted.indexOf(\".\"),\n                decimalPrecision = decimal === -1 ? 0 : formatted.length - decimal - 1;\n            if (decimalPrecision < axis.tickDecimals) {\n                var decimals = (\"\" + factor).substr(1, axis.tickDecimals - decimalPrecision);\n                formatted = (decimalPrecision ? formatted : formatted + \".\") + decimals;\n            }\n        }\n\n        axis.tickDecimals = oldTickDecimals;\n        return formatted;\n    };\n\n    function expRepTickFormatter(value, axis, precision) {\n        var expPosition = (\"\" + value).indexOf(\"e\"),\n            exponentValue = parseInt((\"\" + value).substr(expPosition + 1)),\n            tenExponent = expPosition !== -1 ? exponentValue : (value > 0 ? Math.floor(Math.log(value) / Math.LN10) : 0),\n            roundWith = Math.pow(10, tenExponent),\n            x = value / roundWith;\n\n        if (precision) {\n            var updatedPrecision = recomputePrecision(value, precision);\n            return (value / roundWith).toFixed(updatedPrecision) + 'e' + tenExponent;\n        }\n\n        if (axis.tickDecimals > 0) {\n            return x.toFixed(recomputePrecision(value, axis.tickDecimals)) + 'e' + tenExponent;\n        }\n        return x.toFixed() + 'e' + tenExponent;\n    }\n\n    function recomputePrecision(num, precision) {\n        //for numbers close to zero, the precision from flot will be a big number\n        //while for big numbers, the precision will be negative\n        var log10Value = Math.log(Math.abs(num)) * Math.LOG10E,\n            newPrecision = Math.abs(log10Value + precision);\n\n        return newPrecision <= 20 ? Math.floor(newPrecision) : 20;\n    }\n\n    ///////////////////////////////////////////////////////////////////////////\n    // The top-level container for the entire plot.\n    function Plot(placeholder, data_, options_, plugins) {\n        // data is on the form:\n        //   [ series1, series2 ... ]\n        // where series is either just the data as [ [x1, y1], [x2, y2], ... ]\n        // or { data: [ [x1, y1], [x2, y2], ... ], label: \"some label\", ... }\n\n        var series = [],\n            options = {\n                // the color theme used for graphs\n                colors: [\"#edc240\", \"#afd8f8\", \"#cb4b4b\", \"#4da74d\", \"#9440ed\"],\n                xaxis: {\n                    show: null, // null = auto-detect, true = always, false = never\n                    position: \"bottom\", // or \"top\"\n                    mode: null, // null or \"time\"\n                    font: null, // null (derived from CSS in placeholder) or object like { size: 11, lineHeight: 13, style: \"italic\", weight: \"bold\", family: \"sans-serif\", variant: \"small-caps\" }\n                    color: null, // base color, labels, ticks\n                    tickColor: null, // possibly different color of ticks, e.g. \"rgba(0,0,0,0.15)\"\n                    transform: null, // null or f: number -> number to transform axis\n                    inverseTransform: null, // if transform is set, this should be the inverse function\n                    min: null, // min. value to show, null means set automatically\n                    max: null, // max. value to show, null means set automatically\n                    autoScaleMargin: null, // margin in % to add if autoScale option is on \"loose\" mode,\n                    autoScale: \"exact\", // Available modes: \"none\", \"loose\", \"exact\", \"sliding-window\"\n                    windowSize: null, // null or number. This is the size of sliding-window.\n                    growOnly: null, // grow only, useful for smoother auto-scale, the scales will grow to accomodate data but won't shrink back.\n                    ticks: null, // either [1, 3] or [[1, \"a\"], 3] or (fn: axis info -> ticks) or app. number of ticks for auto-ticks\n                    tickFormatter: null, // fn: number -> string\n                    showTickLabels: \"major\", // \"none\", \"endpoints\", \"major\", \"all\"\n                    labelWidth: null, // size of tick labels in pixels\n                    labelHeight: null,\n                    reserveSpace: null, // whether to reserve space even if axis isn't shown\n                    tickLength: null, // size in pixels of major tick marks\n                    showMinorTicks: null, // true = show minor tick marks, false = hide minor tick marks\n                    showTicks: null, // true = show tick marks, false = hide all tick marks\n                    gridLines: null, // true = show grid lines, false = hide grid lines\n                    alignTicksWithAxis: null, // axis number or null for no sync\n                    tickDecimals: null, // no. of decimals, null means auto\n                    tickSize: null, // number or [number, \"unit\"]\n                    minTickSize: null, // number or [number, \"unit\"]\n                    offset: { below: 0, above: 0 }, // the plot drawing offset. this is calculated by the flot.navigate for each axis\n                    boxPosition: { centerX: 0, centerY: 0 } //position of the axis on the corresponding axis box\n                },\n                yaxis: {\n                    autoScaleMargin: 0.02, // margin in % to add if autoScale option is on \"loose\" mode\n                    autoScale: \"loose\", // Available modes: \"none\", \"loose\", \"exact\"\n                    growOnly: null, // grow only, useful for smoother auto-scale, the scales will grow to accomodate data but won't shrink back.\n                    position: \"left\", // or \"right\"\n                    showTickLabels: \"major\", // \"none\", \"endpoints\", \"major\", \"all\"\n                    offset: { below: 0, above: 0 }, // the plot drawing offset. this is calculated by the flot.navigate for each axis\n                    boxPosition: { centerX: 0, centerY: 0 } //position of the axis on the corresponding axis box\n                },\n                xaxes: [],\n                yaxes: [],\n                series: {\n                    points: {\n                        show: false,\n                        radius: 3,\n                        lineWidth: 2, // in pixels\n                        fill: true,\n                        fillColor: \"#ffffff\",\n                        symbol: 'circle' // or callback\n                    },\n                    lines: {\n                        // we don't put in show: false so we can see\n                        // whether lines were actively disabled\n                        lineWidth: 1, // in pixels\n                        fill: false,\n                        fillColor: null,\n                        steps: false\n                        // Omit 'zero', so we can later default its value to\n                        // match that of the 'fill' option.\n                    },\n                    bars: {\n                        show: false,\n                        lineWidth: 2, // in pixels\n                        // barWidth: number or [number, absolute]\n                        // when 'absolute' is false, 'number' is relative to the minimum distance between points for the series\n                        // when 'absolute' is true, 'number' is considered to be in units of the x-axis\n                        horizontal: false,\n                        barWidth: 0.8,\n                        fill: true,\n                        fillColor: null,\n                        align: \"left\", // \"left\", \"right\", or \"center\"\n                        zero: true\n                    },\n                    shadowSize: 3,\n                    highlightColor: null\n                },\n                grid: {\n                    show: true,\n                    aboveData: false,\n                    color: \"#545454\", // primary color used for outline and labels\n                    backgroundColor: null, // null for transparent, else color\n                    borderColor: null, // set if different from the grid color\n                    tickColor: null, // color for the ticks, e.g. \"rgba(0,0,0,0.15)\"\n                    margin: 0, // distance from the canvas edge to the grid\n                    labelMargin: 5, // in pixels\n                    axisMargin: 8, // in pixels\n                    borderWidth: 1, // in pixels\n                    minBorderMargin: null, // in pixels, null means taken from points radius\n                    markings: null, // array of ranges or fn: axes -> array of ranges\n                    markingsColor: \"#f4f4f4\",\n                    markingsLineWidth: 2,\n                    // interactive stuff\n                    clickable: false,\n                    hoverable: false,\n                    autoHighlight: true, // highlight in case mouse is near\n                    mouseActiveRadius: 15 // how far the mouse can be away to activate an item\n                },\n                interaction: {\n                    redrawOverlayInterval: 1000 / 60 // time between updates, -1 means in same flow\n                },\n                hooks: {}\n            },\n            surface = null, // the canvas for the plot itself\n            overlay = null, // canvas for interactive stuff on top of plot\n            eventHolder = null, // jQuery object that events should be bound to\n            ctx = null,\n            octx = null,\n            xaxes = [],\n            yaxes = [],\n            plotOffset = {\n                left: 0,\n                right: 0,\n                top: 0,\n                bottom: 0\n            },\n            plotWidth = 0,\n            plotHeight = 0,\n            hooks = {\n                processOptions: [],\n                processRawData: [],\n                processDatapoints: [],\n                processOffset: [],\n                setupGrid: [],\n                adjustSeriesDataRange: [],\n                setRange: [],\n                drawBackground: [],\n                drawSeries: [],\n                drawAxis: [],\n                draw: [],\n                axisReserveSpace: [],\n                bindEvents: [],\n                drawOverlay: [],\n                resize: [],\n                shutdown: []\n            },\n            plot = this;\n\n        var eventManager = {};\n\n        // interactive features\n\n        var redrawTimeout = null;\n\n        // public functions\n        plot.setData = setData;\n        plot.setupGrid = setupGrid;\n        plot.draw = draw;\n        plot.getPlaceholder = function() {\n            return placeholder;\n        };\n        plot.getCanvas = function() {\n            return surface.element;\n        };\n        plot.getSurface = function() {\n            return surface;\n        };\n        plot.getEventHolder = function() {\n            return eventHolder[0];\n        };\n        plot.getPlotOffset = function() {\n            return plotOffset;\n        };\n        plot.width = function() {\n            return plotWidth;\n        };\n        plot.height = function() {\n            return plotHeight;\n        };\n        plot.offset = function() {\n            var o = eventHolder.offset();\n            o.left += plotOffset.left;\n            o.top += plotOffset.top;\n            return o;\n        };\n        plot.getData = function() {\n            return series;\n        };\n        plot.getAxes = function() {\n            var res = {};\n            $.each(xaxes.concat(yaxes), function(_, axis) {\n                if (axis) {\n                    res[axis.direction + (axis.n !== 1 ? axis.n : \"\") + \"axis\"] = axis;\n                }\n            });\n            return res;\n        };\n        plot.getXAxes = function() {\n            return xaxes;\n        };\n        plot.getYAxes = function() {\n            return yaxes;\n        };\n        plot.c2p = canvasToCartesianAxisCoords;\n        plot.p2c = cartesianAxisToCanvasCoords;\n        plot.getOptions = function() {\n            return options;\n        };\n        plot.triggerRedrawOverlay = triggerRedrawOverlay;\n        plot.pointOffset = function(point) {\n            return {\n                left: parseInt(xaxes[axisNumber(point, \"x\") - 1].p2c(+point.x) + plotOffset.left, 10),\n                top: parseInt(yaxes[axisNumber(point, \"y\") - 1].p2c(+point.y) + plotOffset.top, 10)\n            };\n        };\n        plot.shutdown = shutdown;\n        plot.destroy = function() {\n            shutdown();\n            placeholder.removeData(\"plot\").empty();\n\n            series = [];\n            options = null;\n            surface = null;\n            overlay = null;\n            eventHolder = null;\n            ctx = null;\n            octx = null;\n            xaxes = [];\n            yaxes = [];\n            hooks = null;\n            plot = null;\n        };\n\n        plot.resize = function() {\n            var width = placeholder.width(),\n                height = placeholder.height();\n            surface.resize(width, height);\n            overlay.resize(width, height);\n\n            executeHooks(hooks.resize, [width, height]);\n        };\n\n        plot.clearTextCache = function () {\n            surface.clearCache();\n            overlay.clearCache();\n        };\n\n        plot.autoScaleAxis = autoScaleAxis;\n        plot.computeRangeForDataSeries = computeRangeForDataSeries;\n        plot.adjustSeriesDataRange = adjustSeriesDataRange;\n        plot.findNearbyItem = findNearbyItem;\n        plot.findNearbyInterpolationPoint = findNearbyInterpolationPoint;\n        plot.computeValuePrecision = computeValuePrecision;\n        plot.computeTickSize = computeTickSize;\n        plot.addEventHandler = addEventHandler;\n\n        // public attributes\n        plot.hooks = hooks;\n\n        // initialize\n        var MINOR_TICKS_COUNT_CONSTANT = $.plot.uiConstants.MINOR_TICKS_COUNT_CONSTANT;\n        var TICK_LENGTH_CONSTANT = $.plot.uiConstants.TICK_LENGTH_CONSTANT;\n        initPlugins(plot);\n        setupCanvases();\n        parseOptions(options_);\n        setData(data_);\n        setupGrid(true);\n        draw();\n        bindEvents();\n\n        function executeHooks(hook, args) {\n            args = [plot].concat(args);\n            for (var i = 0; i < hook.length; ++i) {\n                hook[i].apply(this, args);\n            }\n        }\n\n        function initPlugins() {\n            // References to key classes, allowing plugins to modify them\n\n            var classes = {\n                Canvas: Canvas\n            };\n\n            for (var i = 0; i < plugins.length; ++i) {\n                var p = plugins[i];\n                p.init(plot, classes);\n                if (p.options) {\n                    $.extend(true, options, p.options);\n                }\n            }\n        }\n\n        function parseOptions(opts) {\n            $.extend(true, options, opts);\n\n            // $.extend merges arrays, rather than replacing them.  When less\n            // colors are provided than the size of the default palette, we\n            // end up with those colors plus the remaining defaults, which is\n            // not expected behavior; avoid it by replacing them here.\n\n            if (opts && opts.colors) {\n                options.colors = opts.colors;\n            }\n\n            if (options.xaxis.color == null) {\n                options.xaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\n            }\n\n            if (options.yaxis.color == null) {\n                options.yaxis.color = $.color.parse(options.grid.color).scale('a', 0.22).toString();\n            }\n\n            if (options.xaxis.tickColor == null) {\n                // grid.tickColor for back-compatibility\n                options.xaxis.tickColor = options.grid.tickColor || options.xaxis.color;\n            }\n\n            if (options.yaxis.tickColor == null) {\n                // grid.tickColor for back-compatibility\n                options.yaxis.tickColor = options.grid.tickColor || options.yaxis.color;\n            }\n\n            if (options.grid.borderColor == null) {\n                options.grid.borderColor = options.grid.color;\n            }\n\n            if (options.grid.tickColor == null) {\n                options.grid.tickColor = $.color.parse(options.grid.color).scale('a', 0.22).toString();\n            }\n\n            // Fill in defaults for axis options, including any unspecified\n            // font-spec fields, if a font-spec was provided.\n\n            // If no x/y axis options were provided, create one of each anyway,\n            // since the rest of the code assumes that they exist.\n\n            var i, axisOptions, axisCount,\n                fontSize = placeholder.css(\"font-size\"),\n                fontSizeDefault = fontSize ? +fontSize.replace(\"px\", \"\") : 13,\n                fontDefaults = {\n                    style: placeholder.css(\"font-style\"),\n                    size: Math.round(0.8 * fontSizeDefault),\n                    variant: placeholder.css(\"font-variant\"),\n                    weight: placeholder.css(\"font-weight\"),\n                    family: placeholder.css(\"font-family\")\n                };\n\n            axisCount = options.xaxes.length || 1;\n            for (i = 0; i < axisCount; ++i) {\n                axisOptions = options.xaxes[i];\n                if (axisOptions && !axisOptions.tickColor) {\n                    axisOptions.tickColor = axisOptions.color;\n                }\n\n                axisOptions = $.extend(true, {}, options.xaxis, axisOptions);\n                options.xaxes[i] = axisOptions;\n\n                if (axisOptions.font) {\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n                    if (!axisOptions.font.color) {\n                        axisOptions.font.color = axisOptions.color;\n                    }\n                    if (!axisOptions.font.lineHeight) {\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n                    }\n                }\n            }\n\n            axisCount = options.yaxes.length || 1;\n            for (i = 0; i < axisCount; ++i) {\n                axisOptions = options.yaxes[i];\n                if (axisOptions && !axisOptions.tickColor) {\n                    axisOptions.tickColor = axisOptions.color;\n                }\n\n                axisOptions = $.extend(true, {}, options.yaxis, axisOptions);\n                options.yaxes[i] = axisOptions;\n\n                if (axisOptions.font) {\n                    axisOptions.font = $.extend({}, fontDefaults, axisOptions.font);\n                    if (!axisOptions.font.color) {\n                        axisOptions.font.color = axisOptions.color;\n                    }\n                    if (!axisOptions.font.lineHeight) {\n                        axisOptions.font.lineHeight = Math.round(axisOptions.font.size * 1.15);\n                    }\n                }\n            }\n\n            // save options on axes for future reference\n            for (i = 0; i < options.xaxes.length; ++i) {\n                getOrCreateAxis(xaxes, i + 1).options = options.xaxes[i];\n            }\n\n            for (i = 0; i < options.yaxes.length; ++i) {\n                getOrCreateAxis(yaxes, i + 1).options = options.yaxes[i];\n            }\n\n            //process boxPosition options used for axis.box size\n            $.each(allAxes(), function(_, axis) {\n                axis.boxPosition = axis.options.boxPosition || {centerX: 0, centerY: 0};\n            });\n\n            // add hooks from options\n            for (var n in hooks) {\n                if (options.hooks[n] && options.hooks[n].length) {\n                    hooks[n] = hooks[n].concat(options.hooks[n]);\n                }\n            }\n\n            executeHooks(hooks.processOptions, [options]);\n        }\n\n        function setData(d) {\n            var oldseries = series;\n            series = parseData(d);\n            fillInSeriesOptions();\n            processData(oldseries);\n        }\n\n        function parseData(d) {\n            var res = [];\n            for (var i = 0; i < d.length; ++i) {\n                var s = $.extend(true, {}, options.series);\n\n                if (d[i].data != null) {\n                    s.data = d[i].data; // move the data instead of deep-copy\n                    delete d[i].data;\n\n                    $.extend(true, s, d[i]);\n\n                    d[i].data = s.data;\n                } else {\n                    s.data = d[i];\n                }\n\n                res.push(s);\n            }\n\n            return res;\n        }\n\n        function axisNumber(obj, coord) {\n            var a = obj[coord + \"axis\"];\n            if (typeof a === \"object\") {\n                // if we got a real axis, extract number\n                a = a.n;\n            }\n\n            if (typeof a !== \"number\") {\n                a = 1; // default to first axis\n            }\n\n            return a;\n        }\n\n        function allAxes() {\n            // return flat array without annoying null entries\n            return xaxes.concat(yaxes).filter(function(a) {\n                return a;\n            });\n        }\n\n        // canvas to axis for cartesian axes\n        function canvasToCartesianAxisCoords(pos) {\n            // return an object with x/y corresponding to all used axes\n            var res = {},\n                i, axis;\n            for (i = 0; i < xaxes.length; ++i) {\n                axis = xaxes[i];\n                if (axis && axis.used) {\n                    res[\"x\" + axis.n] = axis.c2p(pos.left);\n                }\n            }\n\n            for (i = 0; i < yaxes.length; ++i) {\n                axis = yaxes[i];\n                if (axis && axis.used) {\n                    res[\"y\" + axis.n] = axis.c2p(pos.top);\n                }\n            }\n\n            if (res.x1 !== undefined) {\n                res.x = res.x1;\n            }\n\n            if (res.y1 !== undefined) {\n                res.y = res.y1;\n            }\n\n            return res;\n        }\n\n        // axis to canvas for cartesian axes\n        function cartesianAxisToCanvasCoords(pos) {\n            // get canvas coords from the first pair of x/y found in pos\n            var res = {},\n                i, axis, key;\n\n            for (i = 0; i < xaxes.length; ++i) {\n                axis = xaxes[i];\n                if (axis && axis.used) {\n                    key = \"x\" + axis.n;\n                    if (pos[key] == null && axis.n === 1) {\n                        key = \"x\";\n                    }\n\n                    if (pos[key] != null) {\n                        res.left = axis.p2c(pos[key]);\n                        break;\n                    }\n                }\n            }\n\n            for (i = 0; i < yaxes.length; ++i) {\n                axis = yaxes[i];\n                if (axis && axis.used) {\n                    key = \"y\" + axis.n;\n                    if (pos[key] == null && axis.n === 1) {\n                        key = \"y\";\n                    }\n\n                    if (pos[key] != null) {\n                        res.top = axis.p2c(pos[key]);\n                        break;\n                    }\n                }\n            }\n\n            return res;\n        }\n\n        function getOrCreateAxis(axes, number) {\n            if (!axes[number - 1]) {\n                axes[number - 1] = {\n                    n: number, // save the number for future reference\n                    direction: axes === xaxes ? \"x\" : \"y\",\n                    options: $.extend(true, {}, axes === xaxes ? options.xaxis : options.yaxis)\n                };\n            }\n\n            return axes[number - 1];\n        }\n\n        function fillInSeriesOptions() {\n            var neededColors = series.length,\n                maxIndex = -1,\n                i;\n\n            // Subtract the number of series that already have fixed colors or\n            // color indexes from the number that we still need to generate.\n\n            for (i = 0; i < series.length; ++i) {\n                var sc = series[i].color;\n                if (sc != null) {\n                    neededColors--;\n                    if (typeof sc === \"number\" && sc > maxIndex) {\n                        maxIndex = sc;\n                    }\n                }\n            }\n\n            // If any of the series have fixed color indexes, then we need to\n            // generate at least as many colors as the highest index.\n\n            if (neededColors <= maxIndex) {\n                neededColors = maxIndex + 1;\n            }\n\n            // Generate all the colors, using first the option colors and then\n            // variations on those colors once they're exhausted.\n\n            var c, colors = [],\n                colorPool = options.colors,\n                colorPoolSize = colorPool.length,\n                variation = 0,\n                definedColors = Math.max(0, series.length - neededColors);\n\n            for (i = 0; i < neededColors; i++) {\n                c = $.color.parse(colorPool[(definedColors + i) % colorPoolSize] || \"#666\");\n\n                // Each time we exhaust the colors in the pool we adjust\n                // a scaling factor used to produce more variations on\n                // those colors. The factor alternates negative/positive\n                // to produce lighter/darker colors.\n\n                // Reset the variation after every few cycles, or else\n                // it will end up producing only white or black colors.\n\n                if (i % colorPoolSize === 0 && i) {\n                    if (variation >= 0) {\n                        if (variation < 0.5) {\n                            variation = -variation - 0.2;\n                        } else variation = 0;\n                    } else variation = -variation;\n                }\n\n                colors[i] = c.scale('rgb', 1 + variation);\n            }\n\n            // Finalize the series options, filling in their colors\n\n            var colori = 0,\n                s;\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n\n                // assign colors\n                if (s.color == null) {\n                    s.color = colors[colori].toString();\n                    ++colori;\n                } else if (typeof s.color === \"number\") {\n                    s.color = colors[s.color].toString();\n                }\n\n                // turn on lines automatically in case nothing is set\n                if (s.lines.show == null) {\n                    var v, show = true;\n                    for (v in s) {\n                        if (s[v] && s[v].show) {\n                            show = false;\n                            break;\n                        }\n                    }\n\n                    if (show) {\n                        s.lines.show = true;\n                    }\n                }\n\n                // If nothing was provided for lines.zero, default it to match\n                // lines.fill, since areas by default should extend to zero.\n\n                if (s.lines.zero == null) {\n                    s.lines.zero = !!s.lines.fill;\n                }\n\n                // setup axes\n                s.xaxis = getOrCreateAxis(xaxes, axisNumber(s, \"x\"));\n                s.yaxis = getOrCreateAxis(yaxes, axisNumber(s, \"y\"));\n            }\n        }\n\n        function processData(prevSeries) {\n            var topSentry = Number.POSITIVE_INFINITY,\n                bottomSentry = Number.NEGATIVE_INFINITY,\n                i, j, k, m,\n                s, points, ps, val, f, p,\n                data, format;\n\n            function updateAxis(axis, min, max) {\n                if (min < axis.datamin && min !== -Infinity) {\n                    axis.datamin = min;\n                }\n\n                if (max > axis.datamax && max !== Infinity) {\n                    axis.datamax = max;\n                }\n            }\n\n            function reusePoints(prevSeries, i) {\n                if (prevSeries && prevSeries[i] && prevSeries[i].datapoints && prevSeries[i].datapoints.points) {\n                    return prevSeries[i].datapoints.points;\n                }\n\n                return [];\n            }\n\n            $.each(allAxes(), function(_, axis) {\n                // init axis\n                if (axis.options.growOnly !== true) {\n                    axis.datamin = topSentry;\n                    axis.datamax = bottomSentry;\n                } else {\n                    if (axis.datamin === undefined) {\n                        axis.datamin = topSentry;\n                    }\n                    if (axis.datamax === undefined) {\n                        axis.datamax = bottomSentry;\n                    }\n                }\n                axis.used = false;\n            });\n\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                s.datapoints = {\n                    points: []\n                };\n\n                if (s.datapoints.points.length === 0) {\n                    s.datapoints.points = reusePoints(prevSeries, i);\n                }\n\n                executeHooks(hooks.processRawData, [s, s.data, s.datapoints]);\n            }\n\n            // first pass: clean and copy data\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n\n                data = s.data;\n                format = s.datapoints.format;\n\n                if (!format) {\n                    format = [];\n                    // find out how to copy\n                    format.push({\n                        x: true,\n                        y: false,\n                        number: true,\n                        required: true,\n                        computeRange: s.xaxis.options.autoScale !== 'none',\n                        defaultValue: null\n                    });\n\n                    format.push({\n                        x: false,\n                        y: true,\n                        number: true,\n                        required: true,\n                        computeRange: s.yaxis.options.autoScale !== 'none',\n                        defaultValue: null\n                    });\n\n                    if (s.bars.show || (s.lines.show && s.lines.fill)) {\n                        var expectedPs = s.datapoints.pointsize != null ? s.datapoints.pointsize : (s.data && s.data[0] && s.data[0].length ? s.data[0].length : 3);\n                        if (expectedPs > 2) {\n                            format.push({\n                                x: false,\n                                y: true,\n                                number: true,\n                                required: false,\n                                computeRange: s.yaxis.options.autoScale !== 'none',\n                                defaultValue: 0\n                            });\n                        }\n                    }\n\n                    s.datapoints.format = format;\n                }\n\n                s.xaxis.used = s.yaxis.used = true;\n\n                if (s.datapoints.pointsize != null) continue; // already filled in\n\n                s.datapoints.pointsize = format.length;\n                ps = s.datapoints.pointsize;\n                points = s.datapoints.points;\n\n                var insertSteps = s.lines.show && s.lines.steps;\n\n                for (j = k = 0; j < data.length; ++j, k += ps) {\n                    p = data[j];\n\n                    var nullify = p == null;\n                    if (!nullify) {\n                        for (m = 0; m < ps; ++m) {\n                            val = p[m];\n                            f = format[m];\n\n                            if (f) {\n                                if (f.number && val != null) {\n                                    val = +val; // convert to number\n                                    if (isNaN(val)) {\n                                        val = null;\n                                    }\n                                }\n\n                                if (val == null) {\n                                    if (f.required) nullify = true;\n\n                                    if (f.defaultValue != null) val = f.defaultValue;\n                                }\n                            }\n\n                            points[k + m] = val;\n                        }\n                    }\n\n                    if (nullify) {\n                        for (m = 0; m < ps; ++m) {\n                            val = points[k + m];\n                            if (val != null) {\n                                f = format[m];\n                                // extract min/max info\n                                if (f.computeRange) {\n                                    if (f.x) {\n                                        updateAxis(s.xaxis, val, val);\n                                    }\n                                    if (f.y) {\n                                        updateAxis(s.yaxis, val, val);\n                                    }\n                                }\n                            }\n                            points[k + m] = null;\n                        }\n                    } else {\n                        // a little bit of line specific stuff that\n                        // perhaps shouldn't be here, but lacking\n                        // better means...\n                        if (insertSteps && k > 0 &&\n                            points[k - ps] != null &&\n                            points[k - ps] !== points[k] &&\n                            points[k - ps + 1] !== points[k + 1]) {\n                            // copy the point to make room for a middle point\n                            for (m = 0; m < ps; ++m) {\n                                points[k + ps + m] = points[k + m];\n                            }\n\n                            // middle point has same y\n                            points[k + 1] = points[k - ps + 1];\n\n                            // we've added a point, better reflect that\n                            k += ps;\n                        }\n                    }\n                }\n\n                points.length = k; //trims the internal buffer to the correct length\n            }\n\n            // give the hooks a chance to run\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n\n                executeHooks(hooks.processDatapoints, [s, s.datapoints]);\n            }\n\n            // second pass: find datamax/datamin for auto-scaling\n            for (i = 0; i < series.length; ++i) {\n                s = series[i];\n                format = s.datapoints.format;\n\n                if (format.every(function (f) { return !f.computeRange; })) {\n                    continue;\n                }\n\n                var range = plot.adjustSeriesDataRange(s,\n                    plot.computeRangeForDataSeries(s));\n\n                executeHooks(hooks.adjustSeriesDataRange, [s, range]);\n\n                updateAxis(s.xaxis, range.xmin, range.xmax);\n                updateAxis(s.yaxis, range.ymin, range.ymax);\n            }\n\n            $.each(allAxes(), function(_, axis) {\n                if (axis.datamin === topSentry) {\n                    axis.datamin = null;\n                }\n\n                if (axis.datamax === bottomSentry) {\n                    axis.datamax = null;\n                }\n            });\n        }\n\n        function setupCanvases() {\n            // Make sure the placeholder is clear of everything except canvases\n            // from a previous plot in this container that we'll try to re-use.\n\n            placeholder.css(\"padding\", 0) // padding messes up the positioning\n                .children().filter(function() {\n                    return !$(this).hasClass(\"flot-overlay\") && !$(this).hasClass('flot-base');\n                }).remove();\n\n            if (placeholder.css(\"position\") === 'static') {\n                placeholder.css(\"position\", \"relative\"); // for positioning labels and overlay\n            }\n\n            surface = new Canvas(\"flot-base\", placeholder[0]);\n            overlay = new Canvas(\"flot-overlay\", placeholder[0]); // overlay canvas for interactive features\n\n            ctx = surface.context;\n            octx = overlay.context;\n\n            // define which element we're listening for events on\n            eventHolder = $(overlay.element).unbind();\n\n            // If we're re-using a plot object, shut down the old one\n\n            var existing = placeholder.data(\"plot\");\n\n            if (existing) {\n                existing.shutdown();\n                overlay.clear();\n            }\n\n            // save in case we get replotted\n            placeholder.data(\"plot\", plot);\n        }\n\n        function bindEvents() {\n            executeHooks(hooks.bindEvents, [eventHolder]);\n        }\n\n        function addEventHandler(event, handler, eventHolder, priority) {\n            var key = eventHolder + event;\n            var eventList = eventManager[key] || [];\n\n            eventList.push({\"event\": event, \"handler\": handler, \"eventHolder\": eventHolder, \"priority\": priority});\n            eventList.sort((a, b) => b.priority - a.priority );\n            eventList.forEach( eventData => {\n                eventData.eventHolder.unbind(eventData.event, eventData.handler);\n                eventData.eventHolder.bind(eventData.event, eventData.handler);\n            });\n\n            eventManager[key] = eventList;\n        }\n\n        function shutdown() {\n            if (redrawTimeout) {\n                clearTimeout(redrawTimeout);\n            }\n\n            executeHooks(hooks.shutdown, [eventHolder]);\n        }\n\n        function setTransformationHelpers(axis) {\n            // set helper functions on the axis, assumes plot area\n            // has been computed already\n\n            function identity(x) {\n                return x;\n            }\n\n            var s, m, t = axis.options.transform || identity,\n                it = axis.options.inverseTransform;\n\n            // precompute how much the axis is scaling a point\n            // in canvas space\n            if (axis.direction === \"x\") {\n                if (isFinite(t(axis.max) - t(axis.min))) {\n                    s = axis.scale = plotWidth / Math.abs(t(axis.max) - t(axis.min));\n                } else {\n                    s = axis.scale = 1 / Math.abs($.plot.saturated.delta(t(axis.min), t(axis.max), plotWidth));\n                }\n                m = Math.min(t(axis.max), t(axis.min));\n            } else {\n                if (isFinite(t(axis.max) - t(axis.min))) {\n                    s = axis.scale = plotHeight / Math.abs(t(axis.max) - t(axis.min));\n                } else {\n                    s = axis.scale = 1 / Math.abs($.plot.saturated.delta(t(axis.min), t(axis.max), plotHeight));\n                }\n                s = -s;\n                m = Math.max(t(axis.max), t(axis.min));\n            }\n\n            // data point to canvas coordinate\n            if (t === identity) {\n                // slight optimization\n                axis.p2c = function(p) {\n                    if (isFinite(p - m)) {\n                        return (p - m) * s;\n                    } else {\n                        return (p / 4 - m / 4) * s * 4;\n                    }\n                };\n            } else {\n                axis.p2c = function(p) {\n                    var tp = t(p);\n\n                    if (isFinite(tp - m)) {\n                        return (tp - m) * s;\n                    } else {\n                        return (tp / 4 - m / 4) * s * 4;\n                    }\n                };\n            }\n\n            // canvas coordinate to data point\n            if (!it) {\n                axis.c2p = function(c) {\n                    return m + c / s;\n                };\n            } else {\n                axis.c2p = function(c) {\n                    return it(m + c / s);\n                };\n            }\n        }\n\n        function measureTickLabels(axis) {\n            var opts = axis.options,\n                ticks = opts.showTickLabels !== 'none' && axis.ticks ? axis.ticks : [],\n                showMajorTickLabels = opts.showTickLabels === 'major' || opts.showTickLabels === 'all',\n                showEndpointsTickLabels = opts.showTickLabels === 'endpoints' || opts.showTickLabels === 'all',\n                labelWidth = opts.labelWidth || 0,\n                labelHeight = opts.labelHeight || 0,\n                legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\n                layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\n                font = opts.font || \"flot-tick-label tickLabel\";\n\n            for (var i = 0; i < ticks.length; ++i) {\n                var t = ticks[i];\n                var label = t.label;\n\n                if (!t.label ||\n                    (showMajorTickLabels === false && i > 0 && i < ticks.length - 1) ||\n                    (showEndpointsTickLabels === false && (i === 0 || i === ticks.length - 1))) {\n                    continue;\n                }\n\n                if (typeof t.label === 'object') {\n                    label = t.label.name;\n                }\n\n                var info = surface.getTextInfo(layer, label, font);\n\n                labelWidth = Math.max(labelWidth, info.width);\n                labelHeight = Math.max(labelHeight, info.height);\n            }\n\n            axis.labelWidth = opts.labelWidth || labelWidth;\n            axis.labelHeight = opts.labelHeight || labelHeight;\n        }\n\n        function allocateAxisBoxFirstPhase(axis) {\n            // find the bounding box of the axis by looking at label\n            // widths/heights and ticks, make room by diminishing the\n            // plotOffset; this first phase only looks at one\n            // dimension per axis, the other dimension depends on the\n            // other axes so will have to wait\n\n            // here reserve additional space\n            executeHooks(hooks.axisReserveSpace, [axis]);\n\n            var lw = axis.labelWidth,\n                lh = axis.labelHeight,\n                pos = axis.options.position,\n                isXAxis = axis.direction === \"x\",\n                tickLength = axis.options.tickLength,\n                showTicks = axis.options.showTicks,\n                showMinorTicks = axis.options.showMinorTicks,\n                gridLines = axis.options.gridLines,\n                axisMargin = options.grid.axisMargin,\n                padding = options.grid.labelMargin,\n                innermost = true,\n                outermost = true,\n                found = false;\n\n            // Determine the axis's position in its direction and on its side\n\n            $.each(isXAxis ? xaxes : yaxes, function(i, a) {\n                if (a && (a.show || a.reserveSpace)) {\n                    if (a === axis) {\n                        found = true;\n                    } else if (a.options.position === pos) {\n                        if (found) {\n                            outermost = false;\n                        } else {\n                            innermost = false;\n                        }\n                    }\n                }\n            });\n\n            // The outermost axis on each side has no margin\n            if (outermost) {\n                axisMargin = 0;\n            }\n\n            // Set the default tickLength if necessary\n            if (tickLength == null) {\n                tickLength = TICK_LENGTH_CONSTANT;\n            }\n\n            // By default, major tick marks are visible\n            if (showTicks == null) {\n                showTicks = true;\n            }\n\n            // By default, minor tick marks are visible\n            if (showMinorTicks == null) {\n                showMinorTicks = true;\n            }\n\n            // By default, grid lines are visible\n            if (gridLines == null) {\n                if (innermost) {\n                    gridLines = true;\n                } else {\n                    gridLines = false;\n                }\n            }\n\n            if (!isNaN(+tickLength)) {\n                padding += showTicks ? +tickLength : 0;\n            }\n\n            if (isXAxis) {\n                lh += padding;\n\n                if (pos === \"bottom\") {\n                    plotOffset.bottom += lh + axisMargin;\n                    axis.box = {\n                        top: surface.height - plotOffset.bottom,\n                        height: lh\n                    };\n                } else {\n                    axis.box = {\n                        top: plotOffset.top + axisMargin,\n                        height: lh\n                    };\n                    plotOffset.top += lh + axisMargin;\n                }\n            } else {\n                lw += padding;\n\n                if (pos === \"left\") {\n                    axis.box = {\n                        left: plotOffset.left + axisMargin,\n                        width: lw\n                    };\n                    plotOffset.left += lw + axisMargin;\n                } else {\n                    plotOffset.right += lw + axisMargin;\n                    axis.box = {\n                        left: surface.width - plotOffset.right,\n                        width: lw\n                    };\n                }\n            }\n\n            // save for future reference\n            axis.position = pos;\n            axis.tickLength = tickLength;\n            axis.showMinorTicks = showMinorTicks;\n            axis.showTicks = showTicks;\n            axis.gridLines = gridLines;\n            axis.box.padding = padding;\n            axis.innermost = innermost;\n        }\n\n        function allocateAxisBoxSecondPhase(axis) {\n            // now that all axis boxes have been placed in one\n            // dimension, we can set the remaining dimension coordinates\n            if (axis.direction === \"x\") {\n                axis.box.left = plotOffset.left - axis.labelWidth / 2;\n                axis.box.width = surface.width - plotOffset.left - plotOffset.right + axis.labelWidth;\n            } else {\n                axis.box.top = plotOffset.top - axis.labelHeight / 2;\n                axis.box.height = surface.height - plotOffset.bottom - plotOffset.top + axis.labelHeight;\n            }\n        }\n\n        function adjustLayoutForThingsStickingOut() {\n            // possibly adjust plot offset to ensure everything stays\n            // inside the canvas and isn't clipped off\n\n            var minMargin = options.grid.minBorderMargin,\n                i;\n\n            // check stuff from the plot (FIXME: this should just read\n            // a value from the series, otherwise it's impossible to\n            // customize)\n            if (minMargin == null) {\n                minMargin = 0;\n                for (i = 0; i < series.length; ++i) {\n                    minMargin = Math.max(minMargin, 2 * (series[i].points.radius + series[i].points.lineWidth / 2));\n                }\n            }\n\n            var a, offset = {},\n                margins = {\n                    left: minMargin,\n                    right: minMargin,\n                    top: minMargin,\n                    bottom: minMargin\n                };\n\n            // check axis labels, note we don't check the actual\n            // labels but instead use the overall width/height to not\n            // jump as much around with replots\n            $.each(allAxes(), function(_, axis) {\n                if (axis.reserveSpace && axis.ticks && axis.ticks.length) {\n                    if (axis.direction === \"x\") {\n                        margins.left = Math.max(margins.left, axis.labelWidth / 2);\n                        margins.right = Math.max(margins.right, axis.labelWidth / 2);\n                    } else {\n                        margins.bottom = Math.max(margins.bottom, axis.labelHeight / 2);\n                        margins.top = Math.max(margins.top, axis.labelHeight / 2);\n                    }\n                }\n            });\n\n            for (a in margins) {\n                offset[a] = margins[a] - plotOffset[a];\n            }\n            $.each(xaxes.concat(yaxes), function(_, axis) {\n                alignAxisWithGrid(axis, offset, function (offset) {\n                    return offset > 0;\n                });\n            });\n\n            plotOffset.left = Math.ceil(Math.max(margins.left, plotOffset.left));\n            plotOffset.right = Math.ceil(Math.max(margins.right, plotOffset.right));\n            plotOffset.top = Math.ceil(Math.max(margins.top, plotOffset.top));\n            plotOffset.bottom = Math.ceil(Math.max(margins.bottom, plotOffset.bottom));\n        }\n\n        function alignAxisWithGrid(axis, offset, isValid) {\n            if (axis.direction === \"x\") {\n                if (axis.position === \"bottom\" && isValid(offset.bottom)) {\n                    axis.box.top -= Math.ceil(offset.bottom);\n                }\n                if (axis.position === \"top\" && isValid(offset.top)) {\n                    axis.box.top += Math.ceil(offset.top);\n                }\n            } else {\n                if (axis.position === \"left\" && isValid(offset.left)) {\n                    axis.box.left += Math.ceil(offset.left);\n                }\n                if (axis.position === \"right\" && isValid(offset.right)) {\n                    axis.box.left -= Math.ceil(offset.right);\n                }\n            }\n        }\n\n        function setupGrid(autoScale) {\n            var i, a, axes = allAxes(),\n                showGrid = options.grid.show;\n\n            // Initialize the plot's offset from the edge of the canvas\n\n            for (a in plotOffset) {\n                plotOffset[a] = 0;\n            }\n\n            executeHooks(hooks.processOffset, [plotOffset]);\n\n            // If the grid is visible, add its border width to the offset\n            for (a in plotOffset) {\n                if (typeof (options.grid.borderWidth) === \"object\") {\n                    plotOffset[a] += showGrid ? options.grid.borderWidth[a] : 0;\n                } else {\n                    plotOffset[a] += showGrid ? options.grid.borderWidth : 0;\n                }\n            }\n\n            $.each(axes, function(_, axis) {\n                var axisOpts = axis.options;\n                axis.show = axisOpts.show == null ? axis.used : axisOpts.show;\n                axis.reserveSpace = axisOpts.reserveSpace == null ? axis.show : axisOpts.reserveSpace;\n                setupTickFormatter(axis);\n                executeHooks(hooks.setRange, [axis, autoScale]);\n                setRange(axis, autoScale);\n            });\n\n            if (showGrid) {\n                plotWidth = surface.width - plotOffset.left - plotOffset.right;\n                plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\n\n                var allocatedAxes = $.grep(axes, function(axis) {\n                    return axis.show || axis.reserveSpace;\n                });\n\n                $.each(allocatedAxes, function(_, axis) {\n                    // make the ticks\n                    setupTickGeneration(axis);\n                    setMajorTicks(axis);\n                    snapRangeToTicks(axis, axis.ticks);\n\n                    //for computing the endpoints precision, transformationHelpers are needed\n                    setTransformationHelpers(axis);\n                    setEndpointTicks(axis, series);\n\n                    // find labelWidth/Height for axis\n                    measureTickLabels(axis);\n                });\n\n                // with all dimensions calculated, we can compute the\n                // axis bounding boxes, start from the outside\n                // (reverse order)\n                for (i = allocatedAxes.length - 1; i >= 0; --i) {\n                    allocateAxisBoxFirstPhase(allocatedAxes[i]);\n                }\n\n                // make sure we've got enough space for things that\n                // might stick out\n                adjustLayoutForThingsStickingOut();\n\n                $.each(allocatedAxes, function(_, axis) {\n                    allocateAxisBoxSecondPhase(axis);\n                });\n            }\n\n            //adjust axis and plotOffset according to grid.margins\n            if (options.grid.margin) {\n                for (a in plotOffset) {\n                    var margin = options.grid.margin || 0;\n                    plotOffset[a] += typeof margin === \"number\" ? margin : (margin[a] || 0);\n                }\n                $.each(xaxes.concat(yaxes), function(_, axis) {\n                    alignAxisWithGrid(axis, options.grid.margin, function(offset) {\n                        return offset !== undefined && offset !== null;\n                    });\n                });\n            }\n\n            //after adjusting the axis, plot width and height will be modified\n            plotWidth = surface.width - plotOffset.left - plotOffset.right;\n            plotHeight = surface.height - plotOffset.bottom - plotOffset.top;\n\n            // now we got the proper plot dimensions, we can compute the scaling\n            $.each(axes, function(_, axis) {\n                setTransformationHelpers(axis);\n            });\n\n            if (showGrid) {\n                drawAxisLabels();\n            }\n\n            executeHooks(hooks.setupGrid, []);\n        }\n\n        function widenMinMax(minimum, maximum) {\n            var min = (minimum === undefined ? null : minimum);\n            var max = (maximum === undefined ? null : maximum);\n            var delta = max - min;\n            if (delta === 0.0) {\n                // degenerate case\n                var widen = max === 0 ? 1 : 0.01;\n                var wmin = null;\n                if (min == null) {\n                    wmin -= widen;\n                }\n\n                // always widen max if we couldn't widen min to ensure we\n                // don't fall into min == max which doesn't work\n                if (max == null || min != null) {\n                    max += widen;\n                }\n\n                if (wmin != null) {\n                    min = wmin;\n                }\n            }\n\n            return {\n                min: min,\n                max: max\n            };\n        }\n\n        function autoScaleAxis(axis) {\n            var opts = axis.options,\n                min = opts.min,\n                max = opts.max,\n                datamin = axis.datamin,\n                datamax = axis.datamax,\n                delta;\n\n            switch (opts.autoScale) {\n                case \"none\":\n                    min = +(opts.min != null ? opts.min : datamin);\n                    max = +(opts.max != null ? opts.max : datamax);\n                    break;\n                case \"loose\":\n                    if (datamin != null && datamax != null) {\n                        min = datamin;\n                        max = datamax;\n                        delta = $.plot.saturated.saturate(max - min);\n                        var margin = ((typeof opts.autoScaleMargin === 'number') ? opts.autoScaleMargin : 0.02);\n                        min = $.plot.saturated.saturate(min - delta * margin);\n                        max = $.plot.saturated.saturate(max + delta * margin);\n\n                        // make sure we don't go below zero if all values are positive\n                        if (min < 0 && datamin >= 0) {\n                            min = 0;\n                        }\n                    } else {\n                        min = opts.min;\n                        max = opts.max;\n                    }\n                    break;\n                case \"exact\":\n                    min = (datamin != null ? datamin : opts.min);\n                    max = (datamax != null ? datamax : opts.max);\n                    break;\n                case \"sliding-window\":\n                    if (datamax > max) {\n                        // move the window to fit the new data,\n                        // keeping the axis range constant\n                        max = datamax;\n                        min = Math.max(datamax - (opts.windowSize || 100), min);\n                    }\n                    break;\n            }\n\n            var widenedMinMax = widenMinMax(min, max);\n            min = widenedMinMax.min;\n            max = widenedMinMax.max;\n\n            // grow loose or grow exact supported\n            if (opts.growOnly === true && opts.autoScale !== \"none\" && opts.autoScale !== \"sliding-window\") {\n                min = (min < datamin) ? min : (datamin !== null ? datamin : min);\n                max = (max > datamax) ? max : (datamax !== null ? datamax : max);\n            }\n\n            axis.autoScaledMin = min;\n            axis.autoScaledMax = max;\n        }\n\n        function setRange(axis, autoScale) {\n            var min = typeof axis.options.min === 'number' ? axis.options.min : axis.min,\n                max = typeof axis.options.max === 'number' ? axis.options.max : axis.max,\n                plotOffset = axis.options.offset;\n\n            if (autoScale || axis.options.autoScale === 'loose') {\n                autoScaleAxis(axis);\n                min = axis.autoScaledMin;\n                max = axis.autoScaledMax;\n            }\n\n            min = (min != null ? min : -1) + (plotOffset.below || 0);\n            max = (max != null ? max : 1) + (plotOffset.above || 0);\n\n            if (min > max) {\n                var tmp = min;\n                min = max;\n                max = tmp;\n                axis.options.offset = { above: 0, below: 0 };\n            }\n\n            axis.min = $.plot.saturated.saturate(min);\n            axis.max = $.plot.saturated.saturate(max);\n        }\n\n        function computeValuePrecision (min, max, direction, ticks, tickDecimals) {\n            var noTicks = fixupNumberOfTicks(direction, surface, ticks);\n\n            var delta = $.plot.saturated.delta(min, max, noTicks),\n                dec = -Math.floor(Math.log(delta) / Math.LN10);\n\n            //if it is called with tickDecimals, then the precision should not be greather then that\n            if (tickDecimals && dec > tickDecimals) {\n                dec = tickDecimals;\n            }\n\n            var magn = Math.pow(10, -dec),\n                norm = delta / magn;\n\n            if (norm > 2.25 && norm < 3 && (dec + 1) <= tickDecimals) {\n                //we need an extra decimals when tickSize is 2.5\n                ++dec;\n            }\n\n            return isFinite(dec) ? dec : 0;\n        };\n\n        function computeTickSize (min, max, noTicks, tickDecimals) {\n            var delta = $.plot.saturated.delta(min, max, noTicks),\n                dec = -Math.floor(Math.log(delta) / Math.LN10);\n\n            //if it is called with tickDecimals, then the precision should not be greather then that\n            if (tickDecimals && dec > tickDecimals) {\n                dec = tickDecimals;\n            }\n\n            var magn = Math.pow(10, -dec),\n                norm = delta / magn, // norm is between 1.0 and 10.0\n                size;\n\n            if (norm < 1.5) {\n                size = 1;\n            } else if (norm < 3) {\n                size = 2;\n                if (norm > 2.25 && (tickDecimals == null || (dec + 1) <= tickDecimals)) {\n                    size = 2.5;\n                }\n            } else if (norm < 7.5) {\n                size = 5;\n            } else {\n                size = 10;\n            }\n\n            size *= magn;\n            return size;\n        }\n\n        function getAxisTickSize(min, max, direction, options, tickDecimals) {\n            var noTicks;\n\n            if (typeof options.ticks === \"number\" && options.ticks > 0) {\n                noTicks = options.ticks;\n            } else {\n            // heuristic based on the model a*sqrt(x) fitted to\n            // some data points that seemed reasonable\n                noTicks = 0.3 * Math.sqrt(direction === \"x\" ? surface.width : surface.height);\n            }\n\n            var size = computeTickSize(min, max, noTicks, tickDecimals);\n\n            if (options.minTickSize != null && size < options.minTickSize) {\n                size = options.minTickSize;\n            }\n\n            return options.tickSize || size;\n        };\n\n        function fixupNumberOfTicks(direction, surface, ticksOption) {\n            var noTicks;\n\n            if (typeof ticksOption === \"number\" && ticksOption > 0) {\n                noTicks = ticksOption;\n            } else {\n                noTicks = 0.3 * Math.sqrt(direction === \"x\" ? surface.width : surface.height);\n            }\n\n            return noTicks;\n        }\n\n        function setupTickFormatter(axis) {\n            var opts = axis.options;\n            if (!axis.tickFormatter) {\n                if (typeof opts.tickFormatter === 'function') {\n                    axis.tickFormatter = function() {\n                        var args = Array.prototype.slice.call(arguments);\n                        return \"\" + opts.tickFormatter.apply(null, args);\n                    };\n                } else {\n                    axis.tickFormatter = defaultTickFormatter;\n                }\n            }\n        }\n\n        function setupTickGeneration(axis) {\n            var opts = axis.options;\n            var noTicks;\n\n            noTicks = fixupNumberOfTicks(axis.direction, surface, opts.ticks);\n\n            axis.delta = $.plot.saturated.delta(axis.min, axis.max, noTicks);\n            var precision = plot.computeValuePrecision(axis.min, axis.max, axis.direction, noTicks, opts.tickDecimals);\n\n            axis.tickDecimals = Math.max(0, opts.tickDecimals != null ? opts.tickDecimals : precision);\n            axis.tickSize = getAxisTickSize(axis.min, axis.max, axis.direction, opts, opts.tickDecimals);\n\n            // Flot supports base-10 axes; any other mode else is handled by a plug-in,\n            // like flot.time.js.\n\n            if (!axis.tickGenerator) {\n                axis.tickGenerator = defaultTickGenerator;\n            }\n\n            if (opts.alignTicksWithAxis != null) {\n                var otherAxis = (axis.direction === \"x\" ? xaxes : yaxes)[opts.alignTicksWithAxis - 1];\n                if (otherAxis && otherAxis.used && otherAxis !== axis) {\n                    // consider snapping min/max to outermost nice ticks\n                    var niceTicks = axis.tickGenerator(axis);\n                    if (niceTicks.length > 0) {\n                        if (opts.min == null) {\n                            axis.min = Math.min(axis.min, niceTicks[0]);\n                        }\n\n                        if (opts.max == null && niceTicks.length > 1) {\n                            axis.max = Math.max(axis.max, niceTicks[niceTicks.length - 1]);\n                        }\n                    }\n\n                    axis.tickGenerator = function(axis) {\n                        // copy ticks, scaled to this axis\n                        var ticks = [],\n                            v, i;\n                        for (i = 0; i < otherAxis.ticks.length; ++i) {\n                            v = (otherAxis.ticks[i].v - otherAxis.min) / (otherAxis.max - otherAxis.min);\n                            v = axis.min + v * (axis.max - axis.min);\n                            ticks.push(v);\n                        }\n                        return ticks;\n                    };\n\n                    // we might need an extra decimal since forced\n                    // ticks don't necessarily fit naturally\n                    if (!axis.mode && opts.tickDecimals == null) {\n                        var extraDec = Math.max(0, -Math.floor(Math.log(axis.delta) / Math.LN10) + 1),\n                            ts = axis.tickGenerator(axis);\n\n                        // only proceed if the tick interval rounded\n                        // with an extra decimal doesn't give us a\n                        // zero at end\n                        if (!(ts.length > 1 && /\\..*0$/.test((ts[1] - ts[0]).toFixed(extraDec)))) {\n                            axis.tickDecimals = extraDec;\n                        }\n                    }\n                }\n            }\n        }\n\n        function setMajorTicks(axis) {\n            var oticks = axis.options.ticks,\n                ticks = [];\n            if (oticks == null || (typeof oticks === \"number\" && oticks > 0)) {\n                ticks = axis.tickGenerator(axis);\n            } else if (oticks) {\n                if ($.isFunction(oticks)) {\n                // generate the ticks\n                    ticks = oticks(axis);\n                } else {\n                    ticks = oticks;\n                }\n            }\n\n            // clean up/labelify the supplied ticks, copy them over\n            var i, v;\n            axis.ticks = [];\n            for (i = 0; i < ticks.length; ++i) {\n                var label = null;\n                var t = ticks[i];\n                if (typeof t === \"object\") {\n                    v = +t[0];\n                    if (t.length > 1) {\n                        label = t[1];\n                    }\n                } else {\n                    v = +t;\n                }\n\n                if (!isNaN(v)) {\n                    axis.ticks.push(\n                        newTick(v, label, axis, 'major'));\n                }\n            }\n        }\n\n        function newTick(v, label, axis, type) {\n            if (!label) {\n                switch (type) {\n                    case 'min':\n                    case 'max':\n                        //improving the precision of endpoints\n                        var precision = getEndpointPrecision(v, axis);\n                        label = isFinite(precision) ? axis.tickFormatter(v, axis, precision, plot) : axis.tickFormatter(v, axis, precision, plot);\n                        break;\n                    case 'major':\n                        label = axis.tickFormatter(v, axis, undefined, plot);\n                }\n            }\n            return {\n                v: v,\n                label: label\n            };\n        }\n\n        function snapRangeToTicks(axis, ticks) {\n            if (axis.options.autoScale === \"loose\" && ticks.length > 0) {\n                // snap to ticks\n                axis.min = Math.min(axis.min, ticks[0].v);\n                axis.max = Math.max(axis.max, ticks[ticks.length - 1].v);\n            }\n        }\n\n        function getEndpointPrecision(value, axis) {\n            var canvas1 = Math.floor(axis.p2c(value)),\n                canvas2 = axis.direction === \"x\" ? canvas1 + 1 : canvas1 - 1,\n                point1 = axis.c2p(canvas1),\n                point2 = axis.c2p(canvas2),\n                precision = computeValuePrecision(point1, point2, axis.direction, 1);\n\n            return precision;\n        }\n\n        function setEndpointTicks(axis, series) {\n            if (isValidEndpointTick(axis, series)) {\n                axis.ticks.unshift(newTick(axis.min, null, axis, 'min'));\n                axis.ticks.push(newTick(axis.max, null, axis, 'max'));\n            }\n        }\n\n        function isValidEndpointTick(axis, series) {\n            if (axis.options.showTickLabels === 'endpoints') {\n                return true;\n            }\n            if (axis.options.showTickLabels === 'all') {\n                var associatedSeries = series.filter(function(s) {\n                        return s.xaxis === axis;\n                    }),\n                    notAllBarSeries = associatedSeries.some(function(s) {\n                        return !s.bars.show;\n                    });\n                return associatedSeries.length === 0 || notAllBarSeries;\n            }\n            if (axis.options.showTickLabels === 'major' || axis.options.showTickLabels === 'none') {\n                return false;\n            }\n        }\n\n        function draw() {\n            surface.clear();\n            executeHooks(hooks.drawBackground, [ctx]);\n\n            var grid = options.grid;\n\n            // draw background, if any\n            if (grid.show && grid.backgroundColor) {\n                drawBackground();\n            }\n\n            if (grid.show && !grid.aboveData) {\n                drawGrid();\n            }\n\n            for (var i = 0; i < series.length; ++i) {\n                executeHooks(hooks.drawSeries, [ctx, series[i], i, getColorOrGradient]);\n                drawSeries(series[i]);\n            }\n\n            executeHooks(hooks.draw, [ctx]);\n\n            if (grid.show && grid.aboveData) {\n                drawGrid();\n            }\n\n            surface.render();\n\n            // A draw implies that either the axes or data have changed, so we\n            // should probably update the overlay highlights as well.\n            triggerRedrawOverlay();\n        }\n\n        function extractRange(ranges, coord) {\n            var axis, from, to, key, axes = allAxes();\n\n            for (var i = 0; i < axes.length; ++i) {\n                axis = axes[i];\n                if (axis.direction === coord) {\n                    key = coord + axis.n + \"axis\";\n                    if (!ranges[key] && axis.n === 1) {\n                        // support x1axis as xaxis\n                        key = coord + \"axis\";\n                    }\n\n                    if (ranges[key]) {\n                        from = ranges[key].from;\n                        to = ranges[key].to;\n                        break;\n                    }\n                }\n            }\n\n            // backwards-compat stuff - to be removed in future\n            if (!ranges[key]) {\n                axis = coord === \"x\" ? xaxes[0] : yaxes[0];\n                from = ranges[coord + \"1\"];\n                to = ranges[coord + \"2\"];\n            }\n\n            // auto-reverse as an added bonus\n            if (from != null && to != null && from > to) {\n                var tmp = from;\n                from = to;\n                to = tmp;\n            }\n\n            return {\n                from: from,\n                to: to,\n                axis: axis\n            };\n        }\n\n        function drawBackground() {\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            ctx.fillStyle = getColorOrGradient(options.grid.backgroundColor, plotHeight, 0, \"rgba(255, 255, 255, 0)\");\n            ctx.fillRect(0, 0, plotWidth, plotHeight);\n            ctx.restore();\n        }\n\n        function drawMarkings() {\n            // draw markings\n            var markings = options.grid.markings,\n                axes;\n\n            if (markings) {\n                if ($.isFunction(markings)) {\n                    axes = plot.getAxes();\n                    // xmin etc. is backwards compatibility, to be\n                    // removed in the future\n                    axes.xmin = axes.xaxis.min;\n                    axes.xmax = axes.xaxis.max;\n                    axes.ymin = axes.yaxis.min;\n                    axes.ymax = axes.yaxis.max;\n\n                    markings = markings(axes);\n                }\n\n                var i;\n                for (i = 0; i < markings.length; ++i) {\n                    var m = markings[i],\n                        xrange = extractRange(m, \"x\"),\n                        yrange = extractRange(m, \"y\");\n\n                    // fill in missing\n                    if (xrange.from == null) {\n                        xrange.from = xrange.axis.min;\n                    }\n\n                    if (xrange.to == null) {\n                        xrange.to = xrange.axis.max;\n                    }\n\n                    if (yrange.from == null) {\n                        yrange.from = yrange.axis.min;\n                    }\n\n                    if (yrange.to == null) {\n                        yrange.to = yrange.axis.max;\n                    }\n\n                    // clip\n                    if (xrange.to < xrange.axis.min || xrange.from > xrange.axis.max ||\n                        yrange.to < yrange.axis.min || yrange.from > yrange.axis.max) {\n                        continue;\n                    }\n\n                    xrange.from = Math.max(xrange.from, xrange.axis.min);\n                    xrange.to = Math.min(xrange.to, xrange.axis.max);\n                    yrange.from = Math.max(yrange.from, yrange.axis.min);\n                    yrange.to = Math.min(yrange.to, yrange.axis.max);\n\n                    var xequal = xrange.from === xrange.to,\n                        yequal = yrange.from === yrange.to;\n\n                    if (xequal && yequal) {\n                        continue;\n                    }\n\n                    // then draw\n                    xrange.from = Math.floor(xrange.axis.p2c(xrange.from));\n                    xrange.to = Math.floor(xrange.axis.p2c(xrange.to));\n                    yrange.from = Math.floor(yrange.axis.p2c(yrange.from));\n                    yrange.to = Math.floor(yrange.axis.p2c(yrange.to));\n\n                    if (xequal || yequal) {\n                        var lineWidth = m.lineWidth || options.grid.markingsLineWidth,\n                            subPixel = lineWidth % 2 ? 0.5 : 0;\n                        ctx.beginPath();\n                        ctx.strokeStyle = m.color || options.grid.markingsColor;\n                        ctx.lineWidth = lineWidth;\n                        if (xequal) {\n                            ctx.moveTo(xrange.to + subPixel, yrange.from);\n                            ctx.lineTo(xrange.to + subPixel, yrange.to);\n                        } else {\n                            ctx.moveTo(xrange.from, yrange.to + subPixel);\n                            ctx.lineTo(xrange.to, yrange.to + subPixel);\n                        }\n                        ctx.stroke();\n                    } else {\n                        ctx.fillStyle = m.color || options.grid.markingsColor;\n                        ctx.fillRect(xrange.from, yrange.to,\n                            xrange.to - xrange.from,\n                            yrange.from - yrange.to);\n                    }\n                }\n            }\n        }\n\n        function findEdges(axis) {\n            var box = axis.box,\n                x = 0,\n                y = 0;\n\n            // find the edges\n            if (axis.direction === \"x\") {\n                x = 0;\n                y = box.top - plotOffset.top + (axis.position === \"top\" ? box.height : 0);\n            } else {\n                y = 0;\n                x = box.left - plotOffset.left + (axis.position === \"left\" ? box.width : 0) + axis.boxPosition.centerX;\n            }\n\n            return {\n                x: x,\n                y: y\n            };\n        };\n\n        function alignPosition(lineWidth, pos) {\n            return ((lineWidth % 2) !== 0) ? Math.floor(pos) + 0.5 : pos;\n        };\n\n        function drawTickBar(axis) {\n            ctx.lineWidth = 1;\n            var edges = findEdges(axis),\n                x = edges.x,\n                y = edges.y;\n\n            // draw tick bar\n            if (axis.show) {\n                var xoff = 0,\n                    yoff = 0;\n\n                ctx.strokeStyle = axis.options.color;\n                ctx.beginPath();\n                if (axis.direction === \"x\") {\n                    xoff = plotWidth + 1;\n                } else {\n                    yoff = plotHeight + 1;\n                }\n\n                if (axis.direction === \"x\") {\n                    y = alignPosition(ctx.lineWidth, y);\n                } else {\n                    x = alignPosition(ctx.lineWidth, x);\n                }\n\n                ctx.moveTo(x, y);\n                ctx.lineTo(x + xoff, y + yoff);\n                ctx.stroke();\n            }\n        };\n\n        function drawTickMarks(axis) {\n            var t = axis.tickLength,\n                minorTicks = axis.showMinorTicks,\n                minorTicksNr = MINOR_TICKS_COUNT_CONSTANT,\n                edges = findEdges(axis),\n                x = edges.x,\n                y = edges.y,\n                i = 0;\n\n            // draw major tick marks\n            ctx.strokeStyle = axis.options.color;\n            ctx.beginPath();\n\n            for (i = 0; i < axis.ticks.length; ++i) {\n                var v = axis.ticks[i].v,\n                    xoff = 0,\n                    yoff = 0,\n                    xminor = 0,\n                    yminor = 0,\n                    j;\n\n                if (!isNaN(v) && v >= axis.min && v <= axis.max) {\n                    if (axis.direction === \"x\") {\n                        x = axis.p2c(v);\n                        yoff = t;\n\n                        if (axis.position === \"top\") {\n                            yoff = -yoff;\n                        }\n                    } else {\n                        y = axis.p2c(v);\n                        xoff = t;\n\n                        if (axis.position === \"left\") {\n                            xoff = -xoff;\n                        }\n                    }\n\n                    if (axis.direction === \"x\") {\n                        x = alignPosition(ctx.lineWidth, x);\n                    } else {\n                        y = alignPosition(ctx.lineWidth, y);\n                    }\n\n                    ctx.moveTo(x, y);\n                    ctx.lineTo(x + xoff, y + yoff);\n                }\n\n                //draw minor tick marks\n                if (minorTicks === true && i < axis.ticks.length - 1) {\n                    var v1 = axis.ticks[i].v,\n                        v2 = axis.ticks[i + 1].v,\n                        step = (v2 - v1) / (minorTicksNr + 1);\n\n                    for (j = 1; j <= minorTicksNr; j++) {\n                        // compute minor tick position\n                        if (axis.direction === \"x\") {\n                            yminor = t / 2; // minor ticks are half length\n                            x = alignPosition(ctx.lineWidth, axis.p2c(v1 + j * step))\n\n                            if (axis.position === \"top\") {\n                                yminor = -yminor;\n                            }\n\n                            // don't go over the plot borders\n                            if ((x < 0) || (x > plotWidth)) {\n                                continue;\n                            }\n                        } else {\n                            xminor = t / 2; // minor ticks are half length\n                            y = alignPosition(ctx.lineWidth, axis.p2c(v1 + j * step));\n\n                            if (axis.position === \"left\") {\n                                xminor = -xminor;\n                            }\n\n                            // don't go over the plot borders\n                            if ((y < 0) || (y > plotHeight)) {\n                                continue;\n                            }\n                        }\n\n                        ctx.moveTo(x, y);\n                        ctx.lineTo(x + xminor, y + yminor);\n                    }\n                }\n            }\n\n            ctx.stroke();\n        };\n\n        function drawGridLines(axis) {\n            // check if the line will be overlapped with a border\n            var overlappedWithBorder = function (value) {\n                var bw = options.grid.borderWidth;\n                return (((typeof bw === \"object\" && bw[axis.position] > 0) || bw > 0) && (value === axis.min || value === axis.max));\n            };\n\n            ctx.strokeStyle = options.grid.tickColor;\n            ctx.beginPath();\n            var i;\n            for (i = 0; i < axis.ticks.length; ++i) {\n                var v = axis.ticks[i].v,\n                    xoff = 0,\n                    yoff = 0,\n                    x = 0,\n                    y = 0;\n\n                if (isNaN(v) || v < axis.min || v > axis.max) continue;\n\n                // skip those lying on the axes if we got a border\n                if (overlappedWithBorder(v)) continue;\n\n                if (axis.direction === \"x\") {\n                    x = axis.p2c(v);\n                    y = plotHeight;\n                    yoff = -plotHeight;\n                } else {\n                    x = 0;\n                    y = axis.p2c(v);\n                    xoff = plotWidth;\n                }\n\n                if (axis.direction === \"x\") {\n                    x = alignPosition(ctx.lineWidth, x);\n                } else {\n                    y = alignPosition(ctx.lineWidth, y);\n                }\n\n                ctx.moveTo(x, y);\n                ctx.lineTo(x + xoff, y + yoff);\n            }\n\n            ctx.stroke();\n        };\n\n        function drawBorder() {\n            // If either borderWidth or borderColor is an object, then draw the border\n            // line by line instead of as one rectangle\n            var bw = options.grid.borderWidth,\n                bc = options.grid.borderColor;\n\n            if (typeof bw === \"object\" || typeof bc === \"object\") {\n                if (typeof bw !== \"object\") {\n                    bw = {\n                        top: bw,\n                        right: bw,\n                        bottom: bw,\n                        left: bw\n                    };\n                }\n                if (typeof bc !== \"object\") {\n                    bc = {\n                        top: bc,\n                        right: bc,\n                        bottom: bc,\n                        left: bc\n                    };\n                }\n\n                if (bw.top > 0) {\n                    ctx.strokeStyle = bc.top;\n                    ctx.lineWidth = bw.top;\n                    ctx.beginPath();\n                    ctx.moveTo(0 - bw.left, 0 - bw.top / 2);\n                    ctx.lineTo(plotWidth, 0 - bw.top / 2);\n                    ctx.stroke();\n                }\n\n                if (bw.right > 0) {\n                    ctx.strokeStyle = bc.right;\n                    ctx.lineWidth = bw.right;\n                    ctx.beginPath();\n                    ctx.moveTo(plotWidth + bw.right / 2, 0 - bw.top);\n                    ctx.lineTo(plotWidth + bw.right / 2, plotHeight);\n                    ctx.stroke();\n                }\n\n                if (bw.bottom > 0) {\n                    ctx.strokeStyle = bc.bottom;\n                    ctx.lineWidth = bw.bottom;\n                    ctx.beginPath();\n                    ctx.moveTo(plotWidth + bw.right, plotHeight + bw.bottom / 2);\n                    ctx.lineTo(0, plotHeight + bw.bottom / 2);\n                    ctx.stroke();\n                }\n\n                if (bw.left > 0) {\n                    ctx.strokeStyle = bc.left;\n                    ctx.lineWidth = bw.left;\n                    ctx.beginPath();\n                    ctx.moveTo(0 - bw.left / 2, plotHeight + bw.bottom);\n                    ctx.lineTo(0 - bw.left / 2, 0);\n                    ctx.stroke();\n                }\n            } else {\n                ctx.lineWidth = bw;\n                ctx.strokeStyle = options.grid.borderColor;\n                ctx.strokeRect(-bw / 2, -bw / 2, plotWidth + bw, plotHeight + bw);\n            }\n        };\n\n        function drawGrid() {\n            var axes, bw;\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            drawMarkings();\n\n            axes = allAxes();\n            bw = options.grid.borderWidth;\n\n            for (var j = 0; j < axes.length; ++j) {\n                var axis = axes[j];\n\n                if (!axis.show) {\n                    continue;\n                }\n\n                drawTickBar(axis);\n                if (axis.showTicks === true) {\n                    drawTickMarks(axis);\n                }\n\n                if (axis.gridLines === true) {\n                    drawGridLines(axis, bw);\n                }\n            }\n\n            // draw border\n            if (bw) {\n                drawBorder();\n            }\n\n            ctx.restore();\n        }\n\n        function drawAxisLabels() {\n            $.each(allAxes(), function(_, axis) {\n                var box = axis.box,\n                    legacyStyles = axis.direction + \"Axis \" + axis.direction + axis.n + \"Axis\",\n                    layer = \"flot-\" + axis.direction + \"-axis flot-\" + axis.direction + axis.n + \"-axis \" + legacyStyles,\n                    font = axis.options.font || \"flot-tick-label tickLabel\",\n                    i, x, y, halign, valign, info,\n                    margin = 3,\n                    nullBox = {x: NaN, y: NaN, width: NaN, height: NaN}, newLabelBox, labelBoxes = [],\n                    overlapping = function(x11, y11, x12, y12, x21, y21, x22, y22) {\n                        return ((x11 <= x21 && x21 <= x12) || (x21 <= x11 && x11 <= x22)) &&\n                               ((y11 <= y21 && y21 <= y12) || (y21 <= y11 && y11 <= y22));\n                    },\n                    overlapsOtherLabels = function(newLabelBox, previousLabelBoxes) {\n                        return previousLabelBoxes.some(function(labelBox) {\n                            return overlapping(\n                                newLabelBox.x, newLabelBox.y, newLabelBox.x + newLabelBox.width, newLabelBox.y + newLabelBox.height,\n                                labelBox.x, labelBox.y, labelBox.x + labelBox.width, labelBox.y + labelBox.height);\n                        });\n                    },\n                    drawAxisLabel = function (tick, labelBoxes) {\n                        if (!tick || !tick.label || tick.v < axis.min || tick.v > axis.max) {\n                            return nullBox;\n                        }\n\n                        info = surface.getTextInfo(layer, tick.label, font);\n\n                        if (axis.direction === \"x\") {\n                            halign = \"center\";\n                            x = plotOffset.left + axis.p2c(tick.v);\n                            if (axis.position === \"bottom\") {\n                                y = box.top + box.padding - axis.boxPosition.centerY;\n                            } else {\n                                y = box.top + box.height - box.padding + axis.boxPosition.centerY;\n                                valign = \"bottom\";\n                            }\n                            newLabelBox = {x: x - info.width / 2 - margin, y: y - margin, width: info.width + 2 * margin, height: info.height + 2 * margin};\n                        } else {\n                            valign = \"middle\";\n                            y = plotOffset.top + axis.p2c(tick.v);\n                            if (axis.position === \"left\") {\n                                x = box.left + box.width - box.padding - axis.boxPosition.centerX;\n                                halign = \"right\";\n                            } else {\n                                x = box.left + box.padding + axis.boxPosition.centerX;\n                            }\n                            newLabelBox = {x: x - info.width / 2 - margin, y: y - margin, width: info.width + 2 * margin, height: info.height + 2 * margin};\n                        }\n\n                        if (overlapsOtherLabels(newLabelBox, labelBoxes)) {\n                            return nullBox;\n                        }\n\n                        surface.addText(layer, x, y, tick.label, font, null, null, halign, valign);\n\n                        return newLabelBox;\n                    };\n\n                // Remove text before checking for axis.show and ticks.length;\n                // otherwise plugins, like flot-tickrotor, that draw their own\n                // tick labels will end up with both theirs and the defaults.\n\n                surface.removeText(layer);\n\n                executeHooks(hooks.drawAxis, [axis, surface]);\n\n                if (!axis.show) {\n                    return;\n                }\n\n                switch (axis.options.showTickLabels) {\n                    case 'none':\n                        break;\n                    case 'endpoints':\n                        labelBoxes.push(drawAxisLabel(axis.ticks[0], labelBoxes));\n                        labelBoxes.push(drawAxisLabel(axis.ticks[axis.ticks.length - 1], labelBoxes));\n                        break;\n                    case 'major':\n                        labelBoxes.push(drawAxisLabel(axis.ticks[0], labelBoxes));\n                        labelBoxes.push(drawAxisLabel(axis.ticks[axis.ticks.length - 1], labelBoxes));\n                        for (i = 1; i < axis.ticks.length - 1; ++i) {\n                            labelBoxes.push(drawAxisLabel(axis.ticks[i], labelBoxes));\n                        }\n                        break;\n                    case 'all':\n                        labelBoxes.push(drawAxisLabel(axis.ticks[0], []));\n                        labelBoxes.push(drawAxisLabel(axis.ticks[axis.ticks.length - 1], labelBoxes));\n                        for (i = 1; i < axis.ticks.length - 1; ++i) {\n                            labelBoxes.push(drawAxisLabel(axis.ticks[i], labelBoxes));\n                        }\n                        break;\n                }\n            });\n        }\n\n        function drawSeries(series) {\n            if (series.lines.show) {\n                $.plot.drawSeries.drawSeriesLines(series, ctx, plotOffset, plotWidth, plotHeight, plot.drawSymbol, getColorOrGradient);\n            }\n\n            if (series.bars.show) {\n                $.plot.drawSeries.drawSeriesBars(series, ctx, plotOffset, plotWidth, plotHeight, plot.drawSymbol, getColorOrGradient);\n            }\n\n            if (series.points.show) {\n                $.plot.drawSeries.drawSeriesPoints(series, ctx, plotOffset, plotWidth, plotHeight, plot.drawSymbol, getColorOrGradient);\n            }\n        }\n\n        function computeRangeForDataSeries(series, force, isValid) {\n            var points = series.datapoints.points,\n                ps = series.datapoints.pointsize,\n                format = series.datapoints.format,\n                topSentry = Number.POSITIVE_INFINITY,\n                bottomSentry = Number.NEGATIVE_INFINITY,\n                range = {\n                    xmin: topSentry,\n                    ymin: topSentry,\n                    xmax: bottomSentry,\n                    ymax: bottomSentry\n                };\n\n            for (var j = 0; j < points.length; j += ps) {\n                if (points[j] === null) {\n                    continue;\n                }\n\n                if (typeof (isValid) === 'function' && !isValid(points[j])) {\n                    continue;\n                }\n\n                for (var m = 0; m < ps; ++m) {\n                    var val = points[j + m],\n                        f = format[m];\n                    if (f === null || f === undefined) {\n                        continue;\n                    }\n\n                    if (typeof (isValid) === 'function' && !isValid(val)) {\n                        continue;\n                    }\n\n                    if ((!force && !f.computeRange) || val === Infinity || val === -Infinity) {\n                        continue;\n                    }\n\n                    if (f.x === true) {\n                        if (val < range.xmin) {\n                            range.xmin = val;\n                        }\n\n                        if (val > range.xmax) {\n                            range.xmax = val;\n                        }\n                    }\n\n                    if (f.y === true) {\n                        if (val < range.ymin) {\n                            range.ymin = val;\n                        }\n\n                        if (val > range.ymax) {\n                            range.ymax = val;\n                        }\n                    }\n                }\n            }\n\n            return range;\n        };\n\n        function adjustSeriesDataRange(series, range) {\n            if (series.bars.show) {\n                // make sure we got room for the bar on the dancing floor\n                var delta;\n\n                // update bar width if needed\n                var useAbsoluteBarWidth = series.bars.barWidth[1];\n                if (series.datapoints && series.datapoints.points && !useAbsoluteBarWidth) {\n                    computeBarWidth(series);\n                }\n\n                var barWidth = series.bars.barWidth[0] || series.bars.barWidth;\n                switch (series.bars.align) {\n                    case \"left\":\n                        delta = 0;\n                        break;\n                    case \"right\":\n                        delta = -barWidth;\n                        break;\n                    default:\n                        delta = -barWidth / 2;\n                }\n\n                if (series.bars.horizontal) {\n                    range.ymin += delta;\n                    range.ymax += delta + barWidth;\n                }\n                else {\n                    range.xmin += delta;\n                    range.xmax += delta + barWidth;\n                }\n            }\n\n            if ((series.bars.show && series.bars.zero) || (series.lines.show && series.lines.zero)) {\n                var ps = series.datapoints.pointsize;\n\n                // make sure the 0 point is included in the computed y range when requested\n                if (ps <= 2) {\n                    /*if ps > 0 the points were already taken into account for autoScale */\n                    range.ymin = Math.min(0, range.ymin);\n                    range.ymax = Math.max(0, range.ymax);\n                }\n            }\n\n            return range;\n        };\n\n        function computeBarWidth(series) {\n            var pointsize = series.datapoints.pointsize, minDistance = Number.MAX_VALUE,\n                distance = series.datapoints.points[pointsize] - series.datapoints.points[0] || 1;\n\n            if (isFinite(distance)) {\n                minDistance = distance;\n            }\n            for (var j = pointsize; j < series.datapoints.points.length - pointsize; j += pointsize) {\n                distance = Math.abs(series.datapoints.points[pointsize + j] - series.datapoints.points[j]);\n                if (distance < minDistance && isFinite(distance)) {\n                    minDistance = distance;\n                }\n            }\n\n            if (typeof series.bars.barWidth === \"number\") {\n                series.bars.barWidth = series.bars.barWidth * minDistance;\n            } else {\n                series.bars.barWidth[0] = series.bars.barWidth[0] * minDistance;\n            }\n        }\n\n        // returns the data item the mouse is over/ the cursor is closest to, or null if none is found\n        function findNearbyItem(mouseX, mouseY, seriesFilter, radius, computeDistance) {\n            var maxDistance = radius,\n                smallestDistance = maxDistance * maxDistance + 1,\n                item = null,\n                dx, dy, dist,\n                i, j, ps;\n\n            for (i = series.length - 1; i >= 0; --i) {\n                if (!seriesFilter(i)) continue;\n\n                var s = series[i];\n                if (!s.datapoints) return;\n                var x, y,\n                    axisx = s.xaxis,\n                    axisy = s.yaxis,\n                    points = s.datapoints.points,\n                    mx = axisx.c2p(mouseX), // precompute some stuff to make the loop faster\n                    my = axisy.c2p(mouseY),\n                    maxx = maxDistance / axisx.scale,\n                    maxy = maxDistance / axisy.scale;\n\n                ps = s.datapoints.pointsize;\n                // with inverse transforms, we can't use the maxx/maxy\n                // optimization, sadly\n                if (axisx.options.inverseTransform) {\n                    maxx = Number.MAX_VALUE;\n                }\n\n                if (axisy.options.inverseTransform) {\n                    maxy = Number.MAX_VALUE;\n                }\n\n                for (j = 0; j < points.length; j += ps) {\n                    x = points[j];\n                    y = points[j + 1];\n                    if (x == null) {\n                        continue;\n                    }\n\n                    if (x - mx > maxx || x - mx < -maxx ||\n                        y - my > maxy || y - my < -maxy) {\n                        continue;\n                    }\n\n                    // We have to calculate distances in pixels, not in\n                    // data units, because the scales of the axes may be different\n                    dx = Math.abs(axisx.p2c(x) - mouseX);\n                    dy = Math.abs(axisy.p2c(y) - mouseY);\n                    dist = computeDistance ? computeDistance(dx, dy) : dx * dx + dy * dy;\n\n                    // use <= to ensure last point takes precedence\n                    // (last generally means on top of)\n                    if (dist < smallestDistance) {\n                        smallestDistance = dist;\n                        item = [i, j / ps];\n                    }\n                }\n            }\n\n            if (item) {\n                i = item[0];\n                j = item[1];\n                ps = series[i].datapoints.pointsize;\n\n                return {\n                    datapoint: series[i].datapoints.points.slice(j * ps, (j + 1) * ps),\n                    dataIndex: j,\n                    series: series[i],\n                    seriesIndex: i\n                };\n            }\n\n            return null;\n        }\n\n        function findNearbyInterpolationPoint(posX, posY, seriesFilter) {\n            var i, j, dist, dx, dy, ps,\n                item,\n                smallestDistance = Number.MAX_VALUE;\n\n            for (i = 0; i < series.length; ++i) {\n                if (!seriesFilter(i)) {\n                    continue;\n                }\n                var points = series[i].datapoints.points;\n                ps = series[i].datapoints.pointsize;\n\n                // if the data is coming from positive -> negative, reverse the comparison\n                const comparer = points[points.length - ps] < points[0]\n                    ? function (x1, x2) { return x1 > x2 }\n                    : function (x1, x2) { return x2 > x1 };\n\n                // do not interpolate outside the bounds of the data.\n                if (comparer(posX, points[0])) {\n                    continue;\n                }\n\n                // Find the nearest points, x-wise\n                for (j = ps; j < points.length; j += ps) {\n                    if (comparer(posX, points[j])) {\n                        break;\n                    }\n                }\n\n                // Now Interpolate\n                var y,\n                    p1x = points[j - ps],\n                    p1y = points[j - ps + 1],\n                    p2x = points[j],\n                    p2y = points[j + 1];\n\n                if ((p1x === undefined) || (p2x === undefined) ||\n                    (p1y === undefined) || (p2y === undefined)) {\n                    continue;\n                }\n\n                if (p1x === p2x) {\n                    y = p2y\n                } else {\n                    y = p1y + (p2y - p1y) * (posX - p1x) / (p2x - p1x);\n                }\n\n                posY = y;\n\n                dx = Math.abs(series[i].xaxis.p2c(p2x) - posX);\n                dy = Math.abs(series[i].yaxis.p2c(p2y) - posY);\n                dist = dx * dx + dy * dy;\n\n                if (dist < smallestDistance) {\n                    smallestDistance = dist;\n                    item = [posX, posY, i, j];\n                }\n            }\n\n            if (item) {\n                i = item[2];\n                j = item[3];\n                ps = series[i].datapoints.pointsize;\n                points = series[i].datapoints.points;\n                p1x = points[j - ps];\n                p1y = points[j - ps + 1];\n                p2x = points[j];\n                p2y = points[j + 1];\n\n                return {\n                    datapoint: [item[0], item[1]],\n                    leftPoint: [p1x, p1y],\n                    rightPoint: [p2x, p2y],\n                    seriesIndex: i\n                };\n            }\n\n            return null;\n        }\n\n        function triggerRedrawOverlay() {\n            var t = options.interaction.redrawOverlayInterval;\n            if (t === -1) { // skip event queue\n                drawOverlay();\n                return;\n            }\n\n            if (!redrawTimeout) {\n                redrawTimeout = setTimeout(function() {\n                    drawOverlay(plot);\n                }, t);\n            }\n        }\n\n        function drawOverlay(plot) {\n            redrawTimeout = null;\n\n            if (!octx) {\n                return;\n            }\n            overlay.clear();\n            executeHooks(hooks.drawOverlay, [octx, overlay]);\n            var event = new CustomEvent('onDrawingDone');\n            plot.getEventHolder().dispatchEvent(event);\n        }\n\n        function getColorOrGradient(spec, bottom, top, defaultColor) {\n            if (typeof spec === \"string\") {\n                return spec;\n            } else {\n                // assume this is a gradient spec; IE currently only\n                // supports a simple vertical gradient properly, so that's\n                // what we support too\n                var gradient = ctx.createLinearGradient(0, top, 0, bottom);\n\n                for (var i = 0, l = spec.colors.length; i < l; ++i) {\n                    var c = spec.colors[i];\n                    if (typeof c !== \"string\") {\n                        var co = $.color.parse(defaultColor);\n                        if (c.brightness != null) {\n                            co = co.scale('rgb', c.brightness);\n                        }\n\n                        if (c.opacity != null) {\n                            co.a *= c.opacity;\n                        }\n\n                        c = co.toString();\n                    }\n                    gradient.addColorStop(i / (l - 1), c);\n                }\n\n                return gradient;\n            }\n        }\n    }\n\n    // Add the plot function to the top level of the jQuery object\n\n    $.plot = function(placeholder, data, options) {\n        var plot = new Plot($(placeholder), data, options, $.plot.plugins);\n        return plot;\n    };\n\n    $.plot.version = \"1.0.3\";\n\n    $.plot.plugins = [];\n\n    // Also add the plot function as a chainable property\n    $.fn.plot = function(data, options) {\n        return this.each(function() {\n            $.plot(this, data, options);\n        });\n    };\n\n    $.plot.linearTickGenerator = defaultTickGenerator;\n    $.plot.defaultTickFormatter = defaultTickFormatter;\n    $.plot.expRepTickFormatter = expRepTickFormatter;\n})(jQuery);\n","(function ($) {\n    'use strict';\n    var saturated = {\n        saturate: function (a) {\n            if (a === Infinity) {\n                return Number.MAX_VALUE;\n            }\n\n            if (a === -Infinity) {\n                return -Number.MAX_VALUE;\n            }\n\n            return a;\n        },\n        delta: function(min, max, noTicks) {\n            return ((max - min) / noTicks) === Infinity ? (max / noTicks - min / noTicks) : (max - min) / noTicks\n        },\n        multiply: function (a, b) {\n            return saturated.saturate(a * b);\n        },\n        // returns c * bInt * a. Beahves properly in the case where c is negative\n        // and bInt * a is bigger that Number.MAX_VALUE (Infinity)\n        multiplyAdd: function (a, bInt, c) {\n            if (isFinite(a * bInt)) {\n                return saturated.saturate(a * bInt + c);\n            } else {\n                var result = c;\n\n                for (var i = 0; i < bInt; i++) {\n                    result += a;\n                }\n\n                return saturated.saturate(result);\n            }\n        },\n        // round to nearby lower multiple of base\n        floorInBase: function(n, base) {\n            return base * Math.floor(n / base);\n        }\n    };\n\n    $.plot.saturated = saturated;\n})(jQuery);\n","/** ## jquery.flot.browser.js\n\nThis plugin is used to make available some browser-related utility functions.\n\n### Methods\n*/\n\n(function ($) {\n    'use strict';\n\n    var browser = {\n        /**\n        - getPageXY(e)\n\n         Calculates the pageX and pageY using the screenX, screenY properties of the event\n         and the scrolling of the page. This is needed because the pageX and pageY\n         properties of the event are not correct while running tests in Edge. */\n        getPageXY: function (e) {\n            // This code is inspired from https://stackoverflow.com/a/3464890\n            var doc = document.documentElement,\n                pageX = e.clientX + (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0),\n                pageY = e.clientY + (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n            return { X: pageX, Y: pageY };\n        },\n\n        /**\n        - getPixelRatio(context)\n\n         This function returns the current pixel ratio defined by the product of desktop\n         zoom and page zoom.\n         Additional info: https://www.html5rocks.com/en/tutorials/canvas/hidpi/\n        */\n        getPixelRatio: function(context) {\n            var devicePixelRatio = window.devicePixelRatio || 1,\n                backingStoreRatio =\n                context.webkitBackingStorePixelRatio ||\n                context.mozBackingStorePixelRatio ||\n                context.msBackingStorePixelRatio ||\n                context.oBackingStorePixelRatio ||\n                context.backingStorePixelRatio || 1;\n            return devicePixelRatio / backingStoreRatio;\n        },\n\n        /**\n        - isSafari, isMobileSafari, isOpera, isFirefox, isIE, isEdge, isChrome, isBlink\n\n         This is a collection of functions, used to check if the code is running in a\n         particular browser or Javascript engine.\n        */\n        isSafari: function() {\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\n            // Safari 3.0+ \"[object HTMLElementConstructor]\"\n            return /constructor/i.test(window.top.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!window.top['safari'] || (typeof window.top.safari !== 'undefined' && window.top.safari.pushNotification));\n        },\n\n        isMobileSafari: function() {\n            //isMobileSafari adapted from https://stackoverflow.com/questions/3007480/determine-if-user-navigated-from-mobile-safari\n            return navigator.userAgent.match(/(iPod|iPhone|iPad)/) && navigator.userAgent.match(/AppleWebKit/);\n        },\n\n        isOpera: function() {\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\n            //Opera 8.0+\n            return (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n        },\n\n        isFirefox: function() {\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\n            // Firefox 1.0+\n            return typeof InstallTrigger !== 'undefined';\n        },\n\n        isIE: function() {\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\n            // Internet Explorer 6-11\n            return /*@cc_on!@*/false || !!document.documentMode;\n        },\n\n        isEdge: function() {\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\n            // Edge 20+\n            return !browser.isIE() && !!window.StyleMedia;\n        },\n\n        isChrome: function() {\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\n            // Chrome 1+\n            return !!window.chrome && !!window.chrome.webstore;\n        },\n\n        isBlink: function() {\n            // *** https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\n            return (browser.isChrome() || browser.isOpera()) && !!window.CSS;\n        }\n    };\n\n    $.plot.browser = browser;\n})(jQuery);\n","/**\n## jquery.flot.drawSeries.js\n\nThis plugin is used by flot for drawing lines, plots, bars or area.\n\n### Public methods\n*/\n\n(function($) {\n    \"use strict\";\n\n    function DrawSeries() {\n        function plotLine(datapoints, xoffset, yoffset, axisx, axisy, ctx) {\n            var points = datapoints.points,\n                ps = datapoints.pointsize,\n                prevx = null,\n                prevy = null;\n            var x1 = 0.0,\n                y1 = 0.0,\n                x2 = 0.0,\n                y2 = 0.0,\n                i = 0;\n\n            ctx.beginPath();\n            for (i = ps; i < points.length; i += ps) {\n                x1 = points[i - ps];\n                y1 = points[i - ps + 1];\n                x2 = points[i];\n                y2 = points[i + 1];\n\n                if (x1 === null || x2 === null) {\n                    continue;\n                }\n\n                // clip with ymin\n                if (y1 <= y2 && y1 < axisy.min) {\n                    if (y2 < axisy.min) {\n                        // line segment is outside\n                        continue;\n                    }\n                    // compute new intersection point\n                    x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                    y1 = axisy.min;\n                } else if (y2 <= y1 && y2 < axisy.min) {\n                    if (y1 < axisy.min) {\n                        continue;\n                    }\n\n                    x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                    y2 = axisy.min;\n                }\n\n                // clip with ymax\n                if (y1 >= y2 && y1 > axisy.max) {\n                    if (y2 > axisy.max) {\n                        continue;\n                    }\n\n                    x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                    y1 = axisy.max;\n                } else if (y2 >= y1 && y2 > axisy.max) {\n                    if (y1 > axisy.max) {\n                        continue;\n                    }\n\n                    x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                    y2 = axisy.max;\n                }\n\n                // clip with xmin\n                if (x1 <= x2 && x1 < axisx.min) {\n                    if (x2 < axisx.min) {\n                        continue;\n                    }\n\n                    y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                    x1 = axisx.min;\n                } else if (x2 <= x1 && x2 < axisx.min) {\n                    if (x1 < axisx.min) {\n                        continue;\n                    }\n\n                    y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                    x2 = axisx.min;\n                }\n\n                // clip with xmax\n                if (x1 >= x2 && x1 > axisx.max) {\n                    if (x2 > axisx.max) {\n                        continue;\n                    }\n\n                    y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                    x1 = axisx.max;\n                } else if (x2 >= x1 && x2 > axisx.max) {\n                    if (x1 > axisx.max) {\n                        continue;\n                    }\n\n                    y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                    x2 = axisx.max;\n                }\n\n                if (x1 !== prevx || y1 !== prevy) {\n                    ctx.moveTo(axisx.p2c(x1) + xoffset, axisy.p2c(y1) + yoffset);\n                }\n\n                prevx = x2;\n                prevy = y2;\n                ctx.lineTo(axisx.p2c(x2) + xoffset, axisy.p2c(y2) + yoffset);\n            }\n            ctx.stroke();\n        }\n\n        function plotLineArea(datapoints, axisx, axisy, fillTowards, ctx) {\n            var points = datapoints.points,\n                ps = datapoints.pointsize,\n                bottom = fillTowards > axisy.min ? Math.min(axisy.max, fillTowards) : axisy.min,\n                i = 0,\n                ypos = 1,\n                areaOpen = false,\n                segmentStart = 0,\n                segmentEnd = 0;\n\n            // we process each segment in two turns, first forward\n            // direction to sketch out top, then once we hit the\n            // end we go backwards to sketch the bottom\n            while (true) {\n                if (ps > 0 && i > points.length + ps) {\n                    break;\n                }\n\n                i += ps; // ps is negative if going backwards\n\n                var x1 = points[i - ps],\n                    y1 = points[i - ps + ypos],\n                    x2 = points[i],\n                    y2 = points[i + ypos];\n\n                if (ps === -2) {\n                    /* going backwards and no value for the bottom provided in the series*/\n                    y1 = y2 = bottom;\n                }\n\n                if (areaOpen) {\n                    if (ps > 0 && x1 != null && x2 == null) {\n                        // at turning point\n                        segmentEnd = i;\n                        ps = -ps;\n                        ypos = 2;\n                        continue;\n                    }\n\n                    if (ps < 0 && i === segmentStart + ps) {\n                        // done with the reverse sweep\n                        ctx.fill();\n                        areaOpen = false;\n                        ps = -ps;\n                        i = segmentStart = segmentEnd + ps;\n                        continue;\n                    }\n                }\n\n                if (x1 == null || x2 == null) {\n                    continue;\n                }\n\n                // clip x values\n\n                // clip with xmin\n                if (x1 <= x2 && x1 < axisx.min) {\n                    if (x2 < axisx.min) {\n                        continue;\n                    }\n\n                    y1 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                    x1 = axisx.min;\n                } else if (x2 <= x1 && x2 < axisx.min) {\n                    if (x1 < axisx.min) {\n                        continue;\n                    }\n\n                    y2 = (axisx.min - x1) / (x2 - x1) * (y2 - y1) + y1;\n                    x2 = axisx.min;\n                }\n\n                // clip with xmax\n                if (x1 >= x2 && x1 > axisx.max) {\n                    if (x2 > axisx.max) {\n                        continue;\n                    }\n\n                    y1 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                    x1 = axisx.max;\n                } else if (x2 >= x1 && x2 > axisx.max) {\n                    if (x1 > axisx.max) {\n                        continue;\n                    }\n\n                    y2 = (axisx.max - x1) / (x2 - x1) * (y2 - y1) + y1;\n                    x2 = axisx.max;\n                }\n\n                if (!areaOpen) {\n                    // open area\n                    ctx.beginPath();\n                    ctx.moveTo(axisx.p2c(x1), axisy.p2c(bottom));\n                    areaOpen = true;\n                }\n\n                // now first check the case where both is outside\n                if (y1 >= axisy.max && y2 >= axisy.max) {\n                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.max));\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.max));\n                    continue;\n                } else if (y1 <= axisy.min && y2 <= axisy.min) {\n                    ctx.lineTo(axisx.p2c(x1), axisy.p2c(axisy.min));\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(axisy.min));\n                    continue;\n                }\n\n                // else it's a bit more complicated, there might\n                // be a flat maxed out rectangle first, then a\n                // triangular cutout or reverse; to find these\n                // keep track of the current x values\n                var x1old = x1,\n                    x2old = x2;\n\n                // clip the y values, without shortcutting, we\n                // go through all cases in turn\n\n                // clip with ymin\n                if (y1 <= y2 && y1 < axisy.min && y2 >= axisy.min) {\n                    x1 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                    y1 = axisy.min;\n                } else if (y2 <= y1 && y2 < axisy.min && y1 >= axisy.min) {\n                    x2 = (axisy.min - y1) / (y2 - y1) * (x2 - x1) + x1;\n                    y2 = axisy.min;\n                }\n\n                // clip with ymax\n                if (y1 >= y2 && y1 > axisy.max && y2 <= axisy.max) {\n                    x1 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                    y1 = axisy.max;\n                } else if (y2 >= y1 && y2 > axisy.max && y1 <= axisy.max) {\n                    x2 = (axisy.max - y1) / (y2 - y1) * (x2 - x1) + x1;\n                    y2 = axisy.max;\n                }\n\n                // if the x value was changed we got a rectangle\n                // to fill\n                if (x1 !== x1old) {\n                    ctx.lineTo(axisx.p2c(x1old), axisy.p2c(y1));\n                    // it goes to (x1, y1), but we fill that below\n                }\n\n                // fill triangular section, this sometimes result\n                // in redundant points if (x1, y1) hasn't changed\n                // from previous line to, but we just ignore that\n                ctx.lineTo(axisx.p2c(x1), axisy.p2c(y1));\n                ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n\n                // fill the other rectangle if it's there\n                if (x2 !== x2old) {\n                    ctx.lineTo(axisx.p2c(x2), axisy.p2c(y2));\n                    ctx.lineTo(axisx.p2c(x2old), axisy.p2c(y2));\n                }\n            }\n        }\n\n        /**\n        - drawSeriesLines(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient)\n\n         This function is used for drawing lines or area fill.  In case the series has line decimation function\n         attached, before starting to draw, as an optimization the points will first be decimated.\n\n         The series parameter contains the series to be drawn on ctx context. The plotOffset, plotWidth and\n         plotHeight are the corresponding parameters of flot used to determine the drawing surface.\n         The function getColorOrGradient is used to compute the fill style of lines and area.\n        */\n        function drawSeriesLines(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient) {\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n            ctx.lineJoin = \"round\";\n\n            if (series.lines.dashes && ctx.setLineDash) {\n                ctx.setLineDash(series.lines.dashes);\n            }\n\n            var datapoints = {\n                format: series.datapoints.format,\n                points: series.datapoints.points,\n                pointsize: series.datapoints.pointsize\n            };\n\n            if (series.decimate) {\n                datapoints.points = series.decimate(series, series.xaxis.min, series.xaxis.max, plotWidth, series.yaxis.min, series.yaxis.max, plotHeight);\n            }\n\n            var lw = series.lines.lineWidth;\n\n            ctx.lineWidth = lw;\n            ctx.strokeStyle = series.color;\n            var fillStyle = getFillStyle(series.lines, series.color, 0, plotHeight, getColorOrGradient);\n            if (fillStyle) {\n                ctx.fillStyle = fillStyle;\n                plotLineArea(datapoints, series.xaxis, series.yaxis, series.lines.fillTowards || 0, ctx);\n            }\n\n            if (lw > 0) {\n                plotLine(datapoints, 0, 0, series.xaxis, series.yaxis, ctx);\n            }\n\n            ctx.restore();\n        }\n\n        /**\n        - drawSeriesPoints(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient)\n\n         This function is used for drawing points using a given symbol. In case the series has points decimation\n         function attached, before starting to draw, as an optimization the points will first be decimated.\n\n         The series parameter contains the series to be drawn on ctx context. The plotOffset, plotWidth and\n         plotHeight are the corresponding parameters of flot used to determine the drawing surface.\n         The function drawSymbol is used to compute and draw the symbol chosen for the points.\n        */\n        function drawSeriesPoints(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient) {\n            function drawCircle(ctx, x, y, radius, shadow, fill) {\n                ctx.moveTo(x + radius, y);\n                ctx.arc(x, y, radius, 0, shadow ? Math.PI : Math.PI * 2, false);\n            }\n            drawCircle.fill = true;\n            function plotPoints(datapoints, radius, fill, offset, shadow, axisx, axisy, drawSymbolFn) {\n                var points = datapoints.points,\n                    ps = datapoints.pointsize;\n\n                ctx.beginPath();\n                for (var i = 0; i < points.length; i += ps) {\n                    var x = points[i],\n                        y = points[i + 1];\n                    if (x == null || x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max) {\n                        continue;\n                    }\n\n                    x = axisx.p2c(x);\n                    y = axisy.p2c(y) + offset;\n\n                    drawSymbolFn(ctx, x, y, radius, shadow, fill);\n                }\n                if (drawSymbolFn.fill && !shadow) {\n                    ctx.fill();\n                }\n                ctx.stroke();\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            var datapoints = {\n                format: series.datapoints.format,\n                points: series.datapoints.points,\n                pointsize: series.datapoints.pointsize\n            };\n\n            if (series.decimatePoints) {\n                datapoints.points = series.decimatePoints(series, series.xaxis.min, series.xaxis.max, plotWidth, series.yaxis.min, series.yaxis.max, plotHeight);\n            }\n\n            var lw = series.points.lineWidth,\n                radius = series.points.radius,\n                symbol = series.points.symbol,\n                drawSymbolFn;\n\n            if (symbol === 'circle') {\n                drawSymbolFn = drawCircle;\n            } else if (typeof symbol === 'string' && drawSymbol && drawSymbol[symbol]) {\n                drawSymbolFn = drawSymbol[symbol];\n            } else if (typeof drawSymbol === 'function') {\n                drawSymbolFn = drawSymbol;\n            }\n\n            // If the user sets the line width to 0, we change it to a very\n            // small value. A line width of 0 seems to force the default of 1.\n\n            if (lw === 0) {\n                lw = 0.0001;\n            }\n\n            ctx.lineWidth = lw;\n            ctx.fillStyle = getFillStyle(series.points, series.color, null, null, getColorOrGradient);\n            ctx.strokeStyle = series.color;\n            plotPoints(datapoints, radius,\n                true, 0, false,\n                series.xaxis, series.yaxis, drawSymbolFn);\n            ctx.restore();\n        }\n\n        function drawBar(x, y, b, barLeft, barRight, fillStyleCallback, axisx, axisy, c, horizontal, lineWidth) {\n            var left = x + barLeft,\n                right = x + barRight,\n                bottom = b, top = y,\n                drawLeft, drawRight, drawTop, drawBottom = false,\n                tmp;\n\n            drawLeft = drawRight = drawTop = true;\n\n            // in horizontal mode, we start the bar from the left\n            // instead of from the bottom so it appears to be\n            // horizontal rather than vertical\n            if (horizontal) {\n                drawBottom = drawRight = drawTop = true;\n                drawLeft = false;\n                left = b;\n                right = x;\n                top = y + barLeft;\n                bottom = y + barRight;\n\n                // account for negative bars\n                if (right < left) {\n                    tmp = right;\n                    right = left;\n                    left = tmp;\n                    drawLeft = true;\n                    drawRight = false;\n                }\n            }\n            else {\n                drawLeft = drawRight = drawTop = true;\n                drawBottom = false;\n                left = x + barLeft;\n                right = x + barRight;\n                bottom = b;\n                top = y;\n\n                // account for negative bars\n                if (top < bottom) {\n                    tmp = top;\n                    top = bottom;\n                    bottom = tmp;\n                    drawBottom = true;\n                    drawTop = false;\n                }\n            }\n\n            // clip\n            if (right < axisx.min || left > axisx.max ||\n                top < axisy.min || bottom > axisy.max) {\n                return;\n            }\n\n            if (left < axisx.min) {\n                left = axisx.min;\n                drawLeft = false;\n            }\n\n            if (right > axisx.max) {\n                right = axisx.max;\n                drawRight = false;\n            }\n\n            if (bottom < axisy.min) {\n                bottom = axisy.min;\n                drawBottom = false;\n            }\n\n            if (top > axisy.max) {\n                top = axisy.max;\n                drawTop = false;\n            }\n\n            left = axisx.p2c(left);\n            bottom = axisy.p2c(bottom);\n            right = axisx.p2c(right);\n            top = axisy.p2c(top);\n\n            // fill the bar\n            if (fillStyleCallback) {\n                c.fillStyle = fillStyleCallback(bottom, top);\n                c.fillRect(left, top, right - left, bottom - top)\n            }\n\n            // draw outline\n            if (lineWidth > 0 && (drawLeft || drawRight || drawTop || drawBottom)) {\n                c.beginPath();\n\n                // FIXME: inline moveTo is buggy with excanvas\n                c.moveTo(left, bottom);\n                if (drawLeft) {\n                    c.lineTo(left, top);\n                } else {\n                    c.moveTo(left, top);\n                }\n\n                if (drawTop) {\n                    c.lineTo(right, top);\n                } else {\n                    c.moveTo(right, top);\n                }\n\n                if (drawRight) {\n                    c.lineTo(right, bottom);\n                } else {\n                    c.moveTo(right, bottom);\n                }\n\n                if (drawBottom) {\n                    c.lineTo(left, bottom);\n                } else {\n                    c.moveTo(left, bottom);\n                }\n\n                c.stroke();\n            }\n        }\n\n        /**\n        - drawSeriesBars(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient)\n\n         This function is used for drawing series represented as bars. In case the series has decimation\n         function attached, before starting to draw, as an optimization the points will first be decimated.\n\n         The series parameter contains the series to be drawn on ctx context. The plotOffset, plotWidth and\n         plotHeight are the corresponding parameters of flot used to determine the drawing surface.\n         The function getColorOrGradient is used to compute the fill style of bars.\n        */\n        function drawSeriesBars(series, ctx, plotOffset, plotWidth, plotHeight, drawSymbol, getColorOrGradient) {\n            function plotBars(datapoints, barLeft, barRight, fillStyleCallback, axisx, axisy) {\n                var points = datapoints.points,\n                    ps = datapoints.pointsize,\n                    fillTowards = series.bars.fillTowards || 0,\n                    calculatedBottom = fillTowards > axisy.min ? Math.min(axisy.max, fillTowards) : axisy.min;\n\n                for (var i = 0; i < points.length; i += ps) {\n                    if (points[i] == null) {\n                        continue;\n                    }\n\n                    // Use third point as bottom if pointsize is 3\n                    var bottom = ps === 3 ? points[i + 2] : calculatedBottom;\n                    drawBar(points[i], points[i + 1], bottom, barLeft, barRight, fillStyleCallback, axisx, axisy, ctx, series.bars.horizontal, series.bars.lineWidth);\n                }\n            }\n\n            ctx.save();\n            ctx.translate(plotOffset.left, plotOffset.top);\n\n            var datapoints = {\n                format: series.datapoints.format,\n                points: series.datapoints.points,\n                pointsize: series.datapoints.pointsize\n            };\n\n            if (series.decimate) {\n                datapoints.points = series.decimate(series, series.xaxis.min, series.xaxis.max, plotWidth);\n            }\n\n            ctx.lineWidth = series.bars.lineWidth;\n            ctx.strokeStyle = series.color;\n\n            var barLeft;\n            var barWidth = series.bars.barWidth[0] || series.bars.barWidth;\n            switch (series.bars.align) {\n                case \"left\":\n                    barLeft = 0;\n                    break;\n                case \"right\":\n                    barLeft = -barWidth;\n                    break;\n                default:\n                    barLeft = -barWidth / 2;\n            }\n\n            var fillStyleCallback = series.bars.fill ? function(bottom, top) {\n                return getFillStyle(series.bars, series.color, bottom, top, getColorOrGradient);\n            } : null;\n\n            plotBars(datapoints, barLeft, barLeft + barWidth, fillStyleCallback, series.xaxis, series.yaxis);\n            ctx.restore();\n        }\n\n        function getFillStyle(filloptions, seriesColor, bottom, top, getColorOrGradient) {\n            var fill = filloptions.fill;\n            if (!fill) {\n                return null;\n            }\n\n            if (filloptions.fillColor) {\n                return getColorOrGradient(filloptions.fillColor, bottom, top, seriesColor);\n            }\n\n            var c = $.color.parse(seriesColor);\n            c.a = typeof fill === \"number\" ? fill : 0.4;\n            c.normalize();\n            return c.toString();\n        }\n\n        this.drawSeriesLines = drawSeriesLines;\n        this.drawSeriesPoints = drawSeriesPoints;\n        this.drawSeriesBars = drawSeriesBars;\n        this.drawBar = drawBar;\n    };\n\n    $.plot.drawSeries = new DrawSeries();\n})(jQuery);\n","(function ($) {\n    'use strict';\n    $.plot.uiConstants = {\n        SNAPPING_CONSTANT: 20,\n        PANHINT_LENGTH_CONSTANT: 10,\n        MINOR_TICKS_COUNT_CONSTANT: 4,\n        TICK_LENGTH_CONSTANT: 10,\n        ZOOM_DISTANCE_MARGIN: 25\n    };\n})(jQuery);\n","/* Pretty handling of log axes.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nCopyright (c) 2015 Ciprian Ceteras cipix2000@gmail.com.\nCopyright (c) 2017 Raluca Portase\nLicensed under the MIT license.\n\nSet axis.mode to \"log\" to enable.\n*/\n\n/* global jQuery*/\n\n/**\n## jquery.flot.logaxis\nThis plugin is used to create logarithmic axis. This includes tick generation,\nformatters and transformers to and from logarithmic representation.\n\n### Methods and hooks\n*/\n\n(function ($) {\n    'use strict';\n\n    var options = {\n        xaxis: {}\n    };\n\n    /*tick generators and formatters*/\n    var PREFERRED_LOG_TICK_VALUES = computePreferedLogTickValues(Number.MAX_VALUE, 10),\n        EXTENDED_LOG_TICK_VALUES = computePreferedLogTickValues(Number.MAX_VALUE, 4);\n\n    function computePreferedLogTickValues(endLimit, rangeStep) {\n        var log10End = Math.floor(Math.log(endLimit) * Math.LOG10E) - 1,\n            log10Start = -log10End,\n            val, range, vals = [];\n\n        for (var power = log10Start; power <= log10End; power++) {\n            range = Math.pow(10, power);\n            for (var mult = 1; mult < 9; mult += rangeStep) {\n                val = range * mult;\n                vals.push(val);\n            }\n        }\n        return vals;\n    }\n\n    /**\n    - logTickGenerator(plot, axis, noTicks)\n\n    Generates logarithmic ticks, depending on axis range.\n    In case the number of ticks that can be generated is less than the expected noTicks/4,\n    a linear tick generation is used.\n    */\n    var logTickGenerator = function (plot, axis, noTicks) {\n        var ticks = [],\n            minIdx = -1,\n            maxIdx = -1,\n            surface = plot.getCanvas(),\n            logTickValues = PREFERRED_LOG_TICK_VALUES,\n            min = clampAxis(axis, plot),\n            max = axis.max;\n\n        if (!noTicks) {\n            noTicks = 0.3 * Math.sqrt(axis.direction === \"x\" ? surface.width : surface.height);\n        }\n\n        PREFERRED_LOG_TICK_VALUES.some(function (val, i) {\n            if (val >= min) {\n                minIdx = i;\n                return true;\n            } else {\n                return false;\n            }\n        });\n\n        PREFERRED_LOG_TICK_VALUES.some(function (val, i) {\n            if (val >= max) {\n                maxIdx = i;\n                return true;\n            } else {\n                return false;\n            }\n        });\n\n        if (maxIdx === -1) {\n            maxIdx = PREFERRED_LOG_TICK_VALUES.length - 1;\n        }\n\n        if (maxIdx - minIdx <= noTicks / 4 && logTickValues.length !== EXTENDED_LOG_TICK_VALUES.length) {\n            //try with multiple of 5 for tick values\n            logTickValues = EXTENDED_LOG_TICK_VALUES;\n            minIdx *= 2;\n            maxIdx *= 2;\n        }\n\n        var lastDisplayed = null,\n            inverseNoTicks = 1 / noTicks,\n            tickValue, pixelCoord, tick;\n\n        // Count the number of tick values would appear, if we can get at least\n        // nTicks / 4 accept them.\n        if (maxIdx - minIdx >= noTicks / 4) {\n            for (var idx = maxIdx; idx >= minIdx; idx--) {\n                tickValue = logTickValues[idx];\n                pixelCoord = (Math.log(tickValue) - Math.log(min)) / (Math.log(max) - Math.log(min));\n                tick = tickValue;\n\n                if (lastDisplayed === null) {\n                    lastDisplayed = {\n                        pixelCoord: pixelCoord,\n                        idealPixelCoord: pixelCoord\n                    };\n                } else {\n                    if (Math.abs(pixelCoord - lastDisplayed.pixelCoord) >= inverseNoTicks) {\n                        lastDisplayed = {\n                            pixelCoord: pixelCoord,\n                            idealPixelCoord: lastDisplayed.idealPixelCoord - inverseNoTicks\n                        };\n                    } else {\n                        tick = null;\n                    }\n                }\n\n                if (tick) {\n                    ticks.push(tick);\n                }\n            }\n            // Since we went in backwards order.\n            ticks.reverse();\n        } else {\n            var tickSize = plot.computeTickSize(min, max, noTicks),\n                customAxis = {min: min, max: max, tickSize: tickSize};\n            ticks = $.plot.linearTickGenerator(customAxis);\n        }\n\n        return ticks;\n    };\n\n    var clampAxis = function (axis, plot) {\n        var min = axis.min,\n            max = axis.max;\n\n        if (min <= 0) {\n            //for empty graph if axis.min is not strictly positive make it 0.1\n            if (axis.datamin === null) {\n                min = axis.min = 0.1;\n            } else {\n                min = processAxisOffset(plot, axis);\n            }\n\n            if (max < min) {\n                axis.max = axis.datamax !== null ? axis.datamax : axis.options.max;\n                axis.options.offset.below = 0;\n                axis.options.offset.above = 0;\n            }\n        }\n\n        return min;\n    }\n\n    /**\n    - logTickFormatter(value, axis, precision)\n\n    This is the corresponding tickFormatter of the logaxis.\n    For a number greater that 10^6 or smaller than 10^(-3), this will be drawn\n    with e representation\n    */\n    var logTickFormatter = function (value, axis, precision) {\n        var tenExponent = value > 0 ? Math.floor(Math.log(value) / Math.LN10) : 0;\n\n        if (precision) {\n            if ((tenExponent >= -4) && (tenExponent <= 7)) {\n                return $.plot.defaultTickFormatter(value, axis, precision);\n            } else {\n                return $.plot.expRepTickFormatter(value, axis, precision);\n            }\n        }\n        if ((tenExponent >= -4) && (tenExponent <= 7)) {\n            //if we have float numbers, return a limited length string(ex: 0.0009 is represented as 0.000900001)\n            var formattedValue = tenExponent < 0 ? value.toFixed(-tenExponent) : value.toFixed(tenExponent + 2);\n            if (formattedValue.indexOf('.') !== -1) {\n                var lastZero = formattedValue.lastIndexOf('0');\n\n                while (lastZero === formattedValue.length - 1) {\n                    formattedValue = formattedValue.slice(0, -1);\n                    lastZero = formattedValue.lastIndexOf('0');\n                }\n\n                //delete the dot if is last\n                if (formattedValue.indexOf('.') === formattedValue.length - 1) {\n                    formattedValue = formattedValue.slice(0, -1);\n                }\n            }\n            return formattedValue;\n        } else {\n            return $.plot.expRepTickFormatter(value, axis);\n        }\n    };\n\n    /*logaxis caracteristic functions*/\n    var logTransform = function (v) {\n        if (v < PREFERRED_LOG_TICK_VALUES[0]) {\n            v = PREFERRED_LOG_TICK_VALUES[0];\n        }\n\n        return Math.log(v);\n    };\n\n    var logInverseTransform = function (v) {\n        return Math.exp(v);\n    };\n\n    var invertedTransform = function (v) {\n        return -v;\n    }\n\n    var invertedLogTransform = function (v) {\n        return -logTransform(v);\n    }\n\n    var invertedLogInverseTransform = function (v) {\n        return logInverseTransform(-v);\n    }\n\n    /**\n    - setDataminRange(plot, axis)\n\n    It is used for clamping the starting point of a logarithmic axis.\n    This will set the axis datamin range to 0.1 or to the first datapoint greater then 0.\n    The function is usefull since the logarithmic representation can not show\n    values less than or equal to 0.\n    */\n    function setDataminRange(plot, axis) {\n        if (axis.options.mode === 'log' && axis.datamin <= 0) {\n            if (axis.datamin === null) {\n                axis.datamin = 0.1;\n            } else {\n                axis.datamin = processAxisOffset(plot, axis);\n            }\n        }\n    }\n\n    function processAxisOffset(plot, axis) {\n        var series = plot.getData(),\n            range = series\n                .filter(function(series) {\n                    return series.xaxis === axis || series.yaxis === axis;\n                })\n                .map(function(series) {\n                    return plot.computeRangeForDataSeries(series, null, isValid);\n                }),\n            min = axis.direction === 'x' ? Math.min(0.1, range[0].xmin) : Math.min(0.1, range[0].ymin);\n\n        axis.min = min;\n\n        return min;\n    }\n\n    function isValid(a) {\n        return a > 0;\n    }\n\n    function init(plot) {\n        plot.hooks.processOptions.push(function (plot) {\n            $.each(plot.getAxes(), function (axisName, axis) {\n                var opts = axis.options;\n                if (opts.mode === 'log') {\n                    axis.tickGenerator = function (axis) {\n                        var noTicks = 11;\n                        return logTickGenerator(plot, axis, noTicks);\n                    };\n                    if (typeof axis.options.tickFormatter !== 'function') {\n                        axis.options.tickFormatter = logTickFormatter;\n                    }\n                    axis.options.transform = opts.inverted ? invertedLogTransform : logTransform;\n                    axis.options.inverseTransform = opts.inverted ? invertedLogInverseTransform : logInverseTransform;\n                    axis.options.autoScaleMargin = 0;\n                    plot.hooks.setRange.push(setDataminRange);\n                } else if (opts.inverted) {\n                    axis.options.transform = invertedTransform;\n                    axis.options.inverseTransform = invertedTransform;\n                }\n            });\n        });\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'log',\n        version: '0.1'\n    });\n\n    $.plot.logTicksGenerator = logTickGenerator;\n    $.plot.logTickFormatter = logTickFormatter;\n})(jQuery);\n","/* Flot plugin that adds some extra symbols for plotting points.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe symbols are accessed as strings through the standard symbol options:\n\n    series: {\n        points: {\n            symbol: \"square\" // or \"diamond\", \"triangle\", \"cross\", \"plus\", \"ellipse\", \"rectangle\"\n        }\n    }\n\n*/\n\n(function ($) {\n    // we normalize the area of each symbol so it is approximately the\n    // same as a circle of the given radius\n\n    var square = function (ctx, x, y, radius, shadow) {\n            // pi * r^2 = (2s)^2  =>  s = r * sqrt(pi)/2\n            var size = radius * Math.sqrt(Math.PI) / 2;\n            ctx.rect(x - size, y - size, size + size, size + size);\n        },\n        rectangle = function (ctx, x, y, radius, shadow) {\n            // pi * r^2 = (2s)^2  =>  s = r * sqrt(pi)/2\n            var size = radius * Math.sqrt(Math.PI) / 2;\n            ctx.rect(x - size, y - size, size + size, size + size);\n        },\n        diamond = function (ctx, x, y, radius, shadow) {\n            // pi * r^2 = 2s^2  =>  s = r * sqrt(pi/2)\n            var size = radius * Math.sqrt(Math.PI / 2);\n            ctx.moveTo(x - size, y);\n            ctx.lineTo(x, y - size);\n            ctx.lineTo(x + size, y);\n            ctx.lineTo(x, y + size);\n            ctx.lineTo(x - size, y);\n            ctx.lineTo(x, y - size);\n        },\n        triangle = function (ctx, x, y, radius, shadow) {\n            // pi * r^2 = 1/2 * s^2 * sin (pi / 3)  =>  s = r * sqrt(2 * pi / sin(pi / 3))\n            var size = radius * Math.sqrt(2 * Math.PI / Math.sin(Math.PI / 3));\n            var height = size * Math.sin(Math.PI / 3);\n            ctx.moveTo(x - size / 2, y + height / 2);\n            ctx.lineTo(x + size / 2, y + height / 2);\n            if (!shadow) {\n                ctx.lineTo(x, y - height / 2);\n                ctx.lineTo(x - size / 2, y + height / 2);\n                ctx.lineTo(x + size / 2, y + height / 2);\n            }\n        },\n        cross = function (ctx, x, y, radius, shadow) {\n            // pi * r^2 = (2s)^2  =>  s = r * sqrt(pi)/2\n            var size = radius * Math.sqrt(Math.PI) / 2;\n            ctx.moveTo(x - size, y - size);\n            ctx.lineTo(x + size, y + size);\n            ctx.moveTo(x - size, y + size);\n            ctx.lineTo(x + size, y - size);\n        },\n        ellipse = function(ctx, x, y, radius, shadow, fill) {\n            if (!shadow) {\n                ctx.moveTo(x + radius, y);\n                ctx.arc(x, y, radius, 0, Math.PI * 2, false);\n            }\n        },\n        plus = function (ctx, x, y, radius, shadow) {\n            var size = radius * Math.sqrt(Math.PI / 2);\n            ctx.moveTo(x - size, y);\n            ctx.lineTo(x + size, y);\n            ctx.moveTo(x, y + size);\n            ctx.lineTo(x, y - size);\n        },\n        handlers = {\n            square: square,\n            rectangle: rectangle,\n            diamond: diamond,\n            triangle: triangle,\n            cross: cross,\n            ellipse: ellipse,\n            plus: plus\n        };\n\n    square.fill = true;\n    rectangle.fill = true;\n    diamond.fill = true;\n    triangle.fill = true;\n    ellipse.fill = true;\n\n    function init(plot) {\n        plot.drawSymbol = handlers;\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        name: 'symbols',\n        version: '1.0'\n    });\n})(jQuery);\n","/* Support for flat 1D data series.\n\nA 1D flat data series is a data series in the form of a regular 1D array. The\nmain reason for using a flat data series is that it performs better, consumes\nless memory and generates less garbage collection than the regular flot format.\n\nExample:\n\n    plot.setData([[[0,0], [1,1], [2,2], [3,3]]]); // regular flot format\n    plot.setData([{flatdata: true, data: [0, 1, 2, 3]}]); // flatdata format\n\nSet series.flatdata to true to enable this plugin.\n\nYou can use series.start to specify the starting index of the series (default is 0)\nYou can use series.step to specify the interval between consecutive indexes of the series (default is 1)\n*/\n\n/* global jQuery*/\n\n(function ($) {\n    'use strict';\n\n    function process1DRawData(plot, series, data, datapoints) {\n        if (series.flatdata === true) {\n            var start = series.start || 0;\n            var step = typeof series.step === 'number' ? series.step : 1;\n            datapoints.pointsize = 2;\n            for (var i = 0, j = 0; i < data.length; i++, j += 2) {\n                datapoints.points[j] = start + (i * step);\n                datapoints.points[j + 1] = data[i];\n            }\n            if (datapoints.points !== undefined) {\n                datapoints.points.length = data.length * 2;\n            } else {\n                datapoints.points = [];\n            }\n        }\n    }\n\n    $.plot.plugins.push({\n        init: function(plot) {\n            plot.hooks.processRawData.push(process1DRawData);\n        },\n        name: 'flatdata',\n        version: '0.0.2'\n    });\n})(jQuery);\n","/* Flot plugin for adding the ability to pan and zoom the plot.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nCopyright (c) 2016 Ciprian Ceteras.\nCopyright (c) 2017 Raluca Portase.\nLicensed under the MIT license.\n\n*/\n\n/**\n## jquery.flot.navigate.js\n\nThis flot plugin is used for adding the ability to pan and zoom the plot.\nA higher level overview is available at [interactions](interactions.md) documentation.\n\nThe default behaviour is scrollwheel up/down to zoom in, drag\nto pan. The plugin defines plot.zoom({ center }), plot.zoomOut() and\nplot.pan( offset ) so you easily can add custom controls. It also fires\n\"plotpan\" and \"plotzoom\" events, useful for synchronizing plots.\n\nThe plugin supports these options:\n```js\n    zoom: {\n        interactive: false,\n        active: false,\n        amount: 1.5         // 2 = 200% (zoom in), 0.5 = 50% (zoom out)\n    }\n\n    pan: {\n        interactive: false,\n        active: false,\n        cursor: \"move\",     // CSS mouse cursor value used when dragging, e.g. \"pointer\"\n        frameRate: 20,\n        mode: \"smart\"       // enable smart pan mode\n    }\n\n    xaxis: {\n        axisZoom: true, //zoom axis when mouse over it is allowed\n        plotZoom: true, //zoom axis is allowed for plot zoom\n        axisPan: true, //pan axis when mouse over it is allowed\n        plotPan: true //pan axis is allowed for plot pan\n    }\n\n    yaxis: {\n        axisZoom: true, //zoom axis when mouse over it is allowed\n        plotZoom: true, //zoom axis is allowed for plot zoom\n        axisPan: true, //pan axis when mouse over it is allowed\n        plotPan: true //pan axis is allowed for plot pan\n    }\n```\n**interactive** enables the built-in drag/click behaviour. If you enable\ninteractive for pan, then you'll have a basic plot that supports moving\naround; the same for zoom.\n\n**active** is true after a touch tap on plot. This enables plot navigation.\nOnce activated, zoom and pan cannot be deactivated. When the plot becomes active,\n\"plotactivated\" event is triggered.\n\n**amount** specifies the default amount to zoom in (so 1.5 = 150%) relative to\nthe current viewport.\n\n**cursor** is a standard CSS mouse cursor string used for visual feedback to the\nuser when dragging.\n\n**frameRate** specifies the maximum number of times per second the plot will\nupdate itself while the user is panning around on it (set to null to disable\nintermediate pans, the plot will then not update until the mouse button is\nreleased).\n\nExample API usage:\n```js\n    plot = $.plot(...);\n\n    // zoom default amount in on the pixel ( 10, 20 )\n    plot.zoom({ center: { left: 10, top: 20 } });\n\n    // zoom out again\n    plot.zoomOut({ center: { left: 10, top: 20 } });\n\n    // zoom 200% in on the pixel (10, 20)\n    plot.zoom({ amount: 2, center: { left: 10, top: 20 } });\n\n    // pan 100 pixels to the left and 20 down\n    plot.pan({ left: -100, top: 20 })\n```\n\nHere, \"center\" specifies where the center of the zooming should happen. Note\nthat this is defined in pixel space, not the space of the data points (you can\nuse the p2c helpers on the axes in Flot to help you convert between these).\n\n**amount** is the amount to zoom the viewport relative to the current range, so\n1 is 100% (i.e. no change), 1.5 is 150% (zoom in), 0.7 is 70% (zoom out). You\ncan set the default in the options.\n*/\n\n/* eslint-enable */\n(function($) {\n    'use strict';\n\n    var options = {\n        zoom: {\n            interactive: false,\n            active: false,\n            amount: 1.5 // how much to zoom relative to current position, 2 = 200% (zoom in), 0.5 = 50% (zoom out)\n        },\n        pan: {\n            interactive: false,\n            active: false,\n            cursor: \"move\",\n            frameRate: 60\n        },\n        xaxis: {\n            axisZoom: true, //zoom axis when mouse over it is allowed\n            plotZoom: true, //zoom axis is allowed for plot zoom\n            axisPan: true, //pan axis when mouse over it is allowed\n            plotPan: true //pan axis is allowed for plot pan\n        },\n        yaxis: {\n            axisZoom: true,\n            plotZoom: true,\n            axisPan: true,\n            plotPan: true\n        }\n    };\n\n    var saturated = $.plot.saturated;\n    var browser = $.plot.browser;\n    var SNAPPING_CONSTANT = $.plot.uiConstants.SNAPPING_CONSTANT;\n    var PANHINT_LENGTH_CONSTANT = $.plot.uiConstants.PANHINT_LENGTH_CONSTANT;\n\n    function init(plot) {\n        var panAxes = null;\n        var canDrag = false;\n\n        function onZoomClick(e, zoomOut, amount) {\n            var page = browser.getPageXY(e);\n\n            var c = plot.offset();\n            c.left = page.X - c.left;\n            c.top = page.Y - c.top;\n\n            var ec = plot.getPlaceholder().offset();\n            ec.left = page.X - ec.left;\n            ec.top = page.Y - ec.top;\n\n            var axes = plot.getXAxes().concat(plot.getYAxes()).filter(function (axis) {\n                var box = axis.box;\n                if (box !== undefined) {\n                    return (ec.left > box.left) && (ec.left < box.left + box.width) &&\n                        (ec.top > box.top) && (ec.top < box.top + box.height);\n                }\n            });\n\n            if (axes.length === 0) {\n                axes = undefined;\n            }\n\n            if (zoomOut) {\n                plot.zoomOut({\n                    center: c,\n                    axes: axes,\n                    amount: amount\n                });\n            } else {\n                plot.zoom({\n                    center: c,\n                    axes: axes,\n                    amount: amount\n                });\n            }\n        }\n\n        var prevCursor = 'default',\n            panHint = null,\n            panTimeout = null,\n            plotState,\n            isPanAction = false;\n\n        function onMouseWheel(e, delta) {\n            var maxAbsoluteDeltaOnMac = 1,\n                isMacScroll = Math.abs(e.originalEvent.deltaY) <= maxAbsoluteDeltaOnMac,\n                defaultNonMacScrollAmount = null,\n                macMagicRatio = 50,\n                amount = isMacScroll ? 1 + Math.abs(e.originalEvent.deltaY) / macMagicRatio : defaultNonMacScrollAmount;\n\n            if (isPanAction) {\n                onDragEnd(e);\n            }\n\n            if (plot.getOptions().zoom.active) {\n                e.preventDefault();\n                onZoomClick(e, delta < 0, amount);\n                return false;\n            }\n        }\n\n        plot.navigationState = function(startPageX, startPageY) {\n            var axes = this.getAxes();\n            var result = {};\n            Object.keys(axes).forEach(function(axisName) {\n                var axis = axes[axisName];\n                result[axisName] = {\n                    navigationOffset: { below: axis.options.offset.below || 0,\n                        above: axis.options.offset.above || 0},\n                    axisMin: axis.min,\n                    axisMax: axis.max,\n                    diagMode: false\n                }\n            });\n\n            result.startPageX = startPageX || 0;\n            result.startPageY = startPageY || 0;\n            return result;\n        }\n\n        function onMouseDown(e) {\n            canDrag = true;\n        }\n\n        function onMouseUp(e) {\n            canDrag = false;\n        }\n\n        function isLeftMouseButtonPressed(e) {\n            return e.button === 0;\n        }\n\n        function onDragStart(e) {\n            if (!canDrag || !isLeftMouseButtonPressed(e)) {\n                return false;\n            }\n\n            isPanAction = true;\n            var page = browser.getPageXY(e);\n\n            var ec = plot.getPlaceholder().offset();\n            ec.left = page.X - ec.left;\n            ec.top = page.Y - ec.top;\n\n            panAxes = plot.getXAxes().concat(plot.getYAxes()).filter(function (axis) {\n                var box = axis.box;\n                if (box !== undefined) {\n                    return (ec.left > box.left) && (ec.left < box.left + box.width) &&\n                        (ec.top > box.top) && (ec.top < box.top + box.height);\n                }\n            });\n\n            if (panAxes.length === 0) {\n                panAxes = undefined;\n            }\n\n            var c = plot.getPlaceholder().css('cursor');\n            if (c) {\n                prevCursor = c;\n            }\n\n            plot.getPlaceholder().css('cursor', plot.getOptions().pan.cursor);\n            plotState = plot.navigationState(page.X, page.Y);\n        }\n\n        function onDrag(e) {\n            var page = browser.getPageXY(e);\n            var frameRate = plot.getOptions().pan.frameRate;\n\n            if (frameRate === -1) {\n                plot.smartPan({\n                    x: plotState.startPageX - page.X,\n                    y: plotState.startPageY - page.Y\n                }, plotState, panAxes);\n\n                return;\n            }\n\n            if (panTimeout || !frameRate) return;\n\n            panTimeout = setTimeout(function() {\n                plot.smartPan({\n                    x: plotState.startPageX - page.X,\n                    y: plotState.startPageY - page.Y\n                }, plotState, panAxes);\n\n                panTimeout = null;\n            }, 1 / frameRate * 1000);\n        }\n\n        function onDragEnd(e) {\n            if (panTimeout) {\n                clearTimeout(panTimeout);\n                panTimeout = null;\n            }\n\n            isPanAction = false;\n            var page = browser.getPageXY(e);\n\n            plot.getPlaceholder().css('cursor', prevCursor);\n            plot.smartPan({\n                x: plotState.startPageX - page.X,\n                y: plotState.startPageY - page.Y\n            }, plotState, panAxes);\n            panHint = null;\n        }\n\n        function onDblClick(e) {\n            plot.activate();\n\n            var axes = plot.getTouchedAxis(e.clientX, e.clientY),\n                event;\n            if (axes[0]) {\n                event = new $.Event('re-center', { detail: {\n                    axisTouched: axes[0]\n                }});\n            } else {\n                event = new $.Event('re-center', {detail: e});\n            }\n            plot.getPlaceholder().trigger(event);\n        }\n\n        function onClick(e) {\n            plot.activate();\n\n            if (isPanAction) {\n                onDragEnd(e);\n            }\n\n            return false;\n        }\n\n        plot.activate = function() {\n            var o = plot.getOptions();\n            if (!o.pan.active || !o.zoom.active) {\n                o.pan.active = true;\n                o.zoom.active = true;\n                plot.getPlaceholder().trigger(\"plotactivated\", [plot]);\n            }\n        }\n\n        function bindEvents(plot, eventHolder) {\n            var o = plot.getOptions();\n            if (o.zoom.interactive) {\n                eventHolder.mousewheel(onMouseWheel);\n            }\n\n            if (o.pan.interactive) {\n                plot.addEventHandler(\"dragstart\", onDragStart, eventHolder, 0);\n                plot.addEventHandler(\"drag\", onDrag, eventHolder, 0);\n                plot.addEventHandler(\"dragend\", onDragEnd, eventHolder, 0);\n                eventHolder.bind(\"mousedown\", onMouseDown);\n                eventHolder.bind(\"mouseup\", onMouseUp);\n            }\n\n            eventHolder.dblclick(onDblClick);\n            eventHolder.click(onClick);\n        }\n\n        plot.zoomOut = function(args) {\n            if (!args) {\n                args = {};\n            }\n\n            if (!args.amount) {\n                args.amount = plot.getOptions().zoom.amount;\n            }\n\n            args.amount = 1 / args.amount;\n            plot.zoom(args);\n        };\n\n        plot.zoom = function(args) {\n            if (!args) {\n                args = {};\n            }\n\n            var c = args.center,\n                amount = args.amount || plot.getOptions().zoom.amount,\n                w = plot.width(),\n                h = plot.height(),\n                axes = args.axes || plot.getAxes();\n\n            if (!c) {\n                c = {\n                    left: w / 2,\n                    top: h / 2\n                };\n            }\n\n            var xf = c.left / w,\n                yf = c.top / h,\n                minmax = {\n                    x: {\n                        min: c.left - xf * w / amount,\n                        max: c.left + (1 - xf) * w / amount\n                    },\n                    y: {\n                        min: c.top - yf * h / amount,\n                        max: c.top + (1 - yf) * h / amount\n                    }\n                };\n\n            for (var key in axes) {\n                if (!axes.hasOwnProperty(key)) {\n                    continue;\n                }\n\n                var axis = axes[key],\n                    opts = axis.options,\n                    min = minmax[axis.direction].min,\n                    max = minmax[axis.direction].max,\n                    navigationOffset = axis.options.offset;\n\n                //skip axis without axisZoom when zooming only on certain axis or axis without plotZoom for zoom on entire plot\n                if ((!opts.axisZoom && args.axes) || (!args.axes && !opts.plotZoom)) {\n                    continue;\n                }\n\n                min = $.plot.saturated.saturate(axis.c2p(min));\n                max = $.plot.saturated.saturate(axis.c2p(max));\n                if (min > max) {\n                    // make sure min < max\n                    var tmp = min;\n                    min = max;\n                    max = tmp;\n                }\n\n                var offsetBelow = $.plot.saturated.saturate(navigationOffset.below - (axis.min - min));\n                var offsetAbove = $.plot.saturated.saturate(navigationOffset.above - (axis.max - max));\n                opts.offset = { below: offsetBelow, above: offsetAbove };\n            };\n\n            plot.setupGrid(true);\n            plot.draw();\n\n            if (!args.preventEvent) {\n                plot.getPlaceholder().trigger(\"plotzoom\", [plot, args]);\n            }\n        };\n\n        plot.pan = function(args) {\n            var delta = {\n                x: +args.left,\n                y: +args.top\n            };\n\n            if (isNaN(delta.x)) delta.x = 0;\n            if (isNaN(delta.y)) delta.y = 0;\n\n            $.each(args.axes || plot.getAxes(), function(_, axis) {\n                var opts = axis.options,\n                    d = delta[axis.direction];\n\n                //skip axis without axisPan when panning only on certain axis or axis without plotPan for pan the entire plot\n                if ((!opts.axisPan && args.axes) || (!opts.plotPan && !args.axes)) {\n                    return;\n                }\n\n                if (d !== 0) {\n                    var navigationOffsetBelow = saturated.saturate(axis.c2p(axis.p2c(axis.min) - d) - axis.c2p(axis.p2c(axis.min))),\n                        navigationOffsetAbove = saturated.saturate(axis.c2p(axis.p2c(axis.max) - d) - axis.c2p(axis.p2c(axis.max)));\n\n                    if (!isFinite(navigationOffsetBelow)) {\n                        navigationOffsetBelow = 0;\n                    }\n\n                    if (!isFinite(navigationOffsetAbove)) {\n                        navigationOffsetAbove = 0;\n                    }\n\n                    opts.offset = {\n                        below: saturated.saturate(navigationOffsetBelow + (opts.offset.below || 0)),\n                        above: saturated.saturate(navigationOffsetAbove + (opts.offset.above || 0))\n                    };\n                }\n            });\n\n            plot.setupGrid(true);\n            plot.draw();\n            if (!args.preventEvent) {\n                plot.getPlaceholder().trigger(\"plotpan\", [plot, args]);\n            }\n        };\n\n        plot.recenter = function(args) {\n            $.each(args.axes || plot.getAxes(), function(_, axis) {\n                if (args.axes) {\n                    if (this.direction === 'x') {\n                        axis.options.offset = { below: 0 };\n                    } else if (this.direction === 'y') {\n                        axis.options.offset = { above: 0 };\n                    }\n                } else {\n                    axis.options.offset = { below: 0, above: 0 };\n                }\n            });\n            plot.setupGrid(true);\n            plot.draw();\n        };\n\n        var shouldSnap = function(delta) {\n            return (Math.abs(delta.y) < SNAPPING_CONSTANT && Math.abs(delta.x) >= SNAPPING_CONSTANT) ||\n                (Math.abs(delta.x) < SNAPPING_CONSTANT && Math.abs(delta.y) >= SNAPPING_CONSTANT);\n        }\n\n        // adjust delta so the pan action is constrained on the vertical or horizontal direction\n        // it the movements in the other direction are small\n        var adjustDeltaToSnap = function(delta) {\n            if (Math.abs(delta.x) < SNAPPING_CONSTANT && Math.abs(delta.y) >= SNAPPING_CONSTANT) {\n                return {x: 0, y: delta.y};\n            }\n\n            if (Math.abs(delta.y) < SNAPPING_CONSTANT && Math.abs(delta.x) >= SNAPPING_CONSTANT) {\n                return {x: delta.x, y: 0};\n            }\n\n            return delta;\n        }\n\n        var isDiagonalMode = function(delta) {\n            if (Math.abs(delta.x) > 0 && Math.abs(delta.y) > 0) {\n                return true;\n            }\n            return false;\n        }\n\n        var restoreAxisOffset = function(axes, initialState, delta) {\n            var axis;\n            Object.keys(axes).forEach(function(axisName) {\n                axis = axes[axisName];\n                if (delta[axis.direction] === 0) {\n                    axis.options.offset.below = initialState[axisName].navigationOffset.below;\n                    axis.options.offset.above = initialState[axisName].navigationOffset.above;\n                }\n            });\n        }\n\n        var prevDelta = { x: 0, y: 0 };\n        plot.smartPan = function(delta, initialState, panAxes, preventEvent) {\n            var snap = shouldSnap(delta),\n                axes = plot.getAxes(),\n                opts;\n            delta = adjustDeltaToSnap(delta);\n\n            if (isDiagonalMode(delta)) {\n                initialState.diagMode = true;\n            }\n\n            if (snap && initialState.diagMode === true) {\n                initialState.diagMode = false;\n                restoreAxisOffset(axes, initialState, delta);\n            }\n\n            if (snap) {\n                panHint = {\n                    start: {\n                        x: initialState.startPageX - plot.offset().left + plot.getPlotOffset().left,\n                        y: initialState.startPageY - plot.offset().top + plot.getPlotOffset().top\n                    },\n                    end: {\n                        x: initialState.startPageX - delta.x - plot.offset().left + plot.getPlotOffset().left,\n                        y: initialState.startPageY - delta.y - plot.offset().top + plot.getPlotOffset().top\n                    }\n                }\n            } else {\n                panHint = {\n                    start: {\n                        x: initialState.startPageX - plot.offset().left + plot.getPlotOffset().left,\n                        y: initialState.startPageY - plot.offset().top + plot.getPlotOffset().top\n                    },\n                    end: false\n                }\n            }\n\n            if (isNaN(delta.x)) delta.x = 0;\n            if (isNaN(delta.y)) delta.y = 0;\n\n            if (panAxes) {\n                axes = panAxes;\n            }\n\n            var axis, axisMin, axisMax, p, d;\n            Object.keys(axes).forEach(function(axisName) {\n                axis = axes[axisName];\n                axisMin = axis.min;\n                axisMax = axis.max;\n                opts = axis.options;\n\n                d = delta[axis.direction];\n                p = prevDelta[axis.direction];\n\n                //skip axis without axisPan when panning only on certain axis or axis without plotPan for pan the entire plot\n                if ((!opts.axisPan && panAxes) || (!panAxes && !opts.plotPan)) {\n                    return;\n                }\n\n                if (d !== 0) {\n                    var navigationOffsetBelow = saturated.saturate(axis.c2p(axis.p2c(axisMin) - (p - d)) - axis.c2p(axis.p2c(axisMin))),\n                        navigationOffsetAbove = saturated.saturate(axis.c2p(axis.p2c(axisMax) - (p - d)) - axis.c2p(axis.p2c(axisMax)));\n\n                    if (!isFinite(navigationOffsetBelow)) {\n                        navigationOffsetBelow = 0;\n                    }\n\n                    if (!isFinite(navigationOffsetAbove)) {\n                        navigationOffsetAbove = 0;\n                    }\n\n                    axis.options.offset.below = saturated.saturate(navigationOffsetBelow + (axis.options.offset.below || 0));\n                    axis.options.offset.above = saturated.saturate(navigationOffsetAbove + (axis.options.offset.above || 0));\n                }\n            });\n\n            prevDelta = delta;\n            plot.setupGrid(true);\n            plot.draw();\n\n            if (!preventEvent) {\n                plot.getPlaceholder().trigger(\"plotpan\", [plot, delta, panAxes, initialState]);\n            }\n        };\n\n        function shutdown(plot, eventHolder) {\n            eventHolder.unbind(\"mousewheel\", onMouseWheel);\n            eventHolder.unbind(\"mousedown\", onMouseDown);\n            eventHolder.unbind(\"mouseup\", onMouseUp);\n            eventHolder.unbind(\"dragstart\", onDragStart);\n            eventHolder.unbind(\"drag\", onDrag);\n            eventHolder.unbind(\"dragend\", onDragEnd);\n            eventHolder.unbind(\"dblclick\", onDblClick);\n            eventHolder.unbind(\"click\", onClick);\n\n            if (panTimeout) clearTimeout(panTimeout);\n        }\n\n        function drawOverlay(plot, ctx) {\n            if (panHint) {\n                ctx.strokeStyle = 'rgba(96, 160, 208, 0.7)';\n                ctx.lineWidth = 2;\n                ctx.lineJoin = \"round\";\n                var startx = Math.round(panHint.start.x),\n                    starty = Math.round(panHint.start.y),\n                    endx, endy;\n\n                if (panAxes) {\n                    if (panAxes[0].direction === 'x') {\n                        endy = Math.round(panHint.start.y);\n                        endx = Math.round(panHint.end.x);\n                    } else if (panAxes[0].direction === 'y') {\n                        endx = Math.round(panHint.start.x);\n                        endy = Math.round(panHint.end.y);\n                    }\n                } else {\n                    endx = Math.round(panHint.end.x);\n                    endy = Math.round(panHint.end.y);\n                }\n\n                ctx.beginPath();\n\n                if (panHint.end === false) {\n                    ctx.moveTo(startx, starty - PANHINT_LENGTH_CONSTANT);\n                    ctx.lineTo(startx, starty + PANHINT_LENGTH_CONSTANT);\n\n                    ctx.moveTo(startx + PANHINT_LENGTH_CONSTANT, starty);\n                    ctx.lineTo(startx - PANHINT_LENGTH_CONSTANT, starty);\n                } else {\n                    var dirX = starty === endy;\n\n                    ctx.moveTo(startx - (dirX ? 0 : PANHINT_LENGTH_CONSTANT), starty - (dirX ? PANHINT_LENGTH_CONSTANT : 0));\n                    ctx.lineTo(startx + (dirX ? 0 : PANHINT_LENGTH_CONSTANT), starty + (dirX ? PANHINT_LENGTH_CONSTANT : 0));\n\n                    ctx.moveTo(startx, starty);\n                    ctx.lineTo(endx, endy);\n\n                    ctx.moveTo(endx - (dirX ? 0 : PANHINT_LENGTH_CONSTANT), endy - (dirX ? PANHINT_LENGTH_CONSTANT : 0));\n                    ctx.lineTo(endx + (dirX ? 0 : PANHINT_LENGTH_CONSTANT), endy + (dirX ? PANHINT_LENGTH_CONSTANT : 0));\n                }\n\n                ctx.stroke();\n            }\n        }\n\n        plot.getTouchedAxis = function(touchPointX, touchPointY) {\n            var ec = plot.getPlaceholder().offset();\n            ec.left = touchPointX - ec.left;\n            ec.top = touchPointY - ec.top;\n\n            var axis = plot.getXAxes().concat(plot.getYAxes()).filter(function (axis) {\n                var box = axis.box;\n                if (box !== undefined) {\n                    return (ec.left > box.left) && (ec.left < box.left + box.width) &&\n                            (ec.top > box.top) && (ec.top < box.top + box.height);\n                }\n            });\n\n            return axis;\n        }\n\n        plot.hooks.drawOverlay.push(drawOverlay);\n        plot.hooks.bindEvents.push(bindEvents);\n        plot.hooks.shutdown.push(shutdown);\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'navigate',\n        version: '1.3'\n    });\n})(jQuery);\n","/* Flot plugin for stacking data sets rather than overlyaing them.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin assumes the data is sorted on x (or y if stacking horizontally).\nFor line charts, it is assumed that if a line has an undefined gap (from a\nnull point), then the line above it should have the same gap - insert zeros\ninstead of \"null\" if you want another behaviour. This also holds for the start\nand end of the chart. Note that stacking a mix of positive and negative values\nin most instances doesn't make sense (so it looks weird).\n\nTwo or more series are stacked when their \"stack\" attribute is set to the same\nkey (which can be any number or string or just \"true\"). To specify the default\nstack, you can set the stack option like this:\n\n    series: {\n        stack: null/false, true, or a key (number/string)\n    }\n\nYou can also specify it for a single series, like this:\n\n    $.plot( $(\"#placeholder\"), [{\n        data: [ ... ],\n        stack: true\n    }])\n\nThe stacking order is determined by the order of the data series in the array\n(later series end up on top of the previous).\n\nInternally, the plugin modifies the datapoints in each series, adding an\noffset to the y value. For line series, extra data points are inserted through\ninterpolation. If there's a second y value, it's also adjusted (e.g for bar\ncharts or filled areas).\n\n*/\n\n(function ($) {\n    var options = {\n        series: { stack: null } // or number/string\n    };\n\n    function init(plot) {\n        function findMatchingSeries(s, allseries) {\n            var res = null;\n            for (var i = 0; i < allseries.length; ++i) {\n                if (s === allseries[i]) break;\n\n                if (allseries[i].stack === s.stack) {\n                    res = allseries[i];\n                }\n            }\n\n            return res;\n        }\n\n        function addBottomPoints (s, datapoints) {\n            var formattedPoints = [];\n            for (var i = 0; i < datapoints.points.length; i += 2) {\n                formattedPoints.push(datapoints.points[i]);\n                formattedPoints.push(datapoints.points[i + 1]);\n                formattedPoints.push(0);\n            }\n\n            datapoints.format.push({\n                x: false,\n                y: true,\n                number: true,\n                required: false,\n                computeRange: s.yaxis.options.autoScale !== 'none',\n                defaultValue: 0\n            });\n            datapoints.points = formattedPoints;\n            datapoints.pointsize = 3;\n        }\n\n        function stackData(plot, s, datapoints) {\n            if (s.stack == null || s.stack === false) return;\n\n            var needsBottom = s.bars.show || (s.lines.show && s.lines.fill);\n            var hasBottom = datapoints.pointsize > 2 && (horizontal ? datapoints.format[2].x : datapoints.format[2].y);\n            // Series data is missing bottom points - need to format\n            if (needsBottom && !hasBottom) {\n                addBottomPoints(s, datapoints);\n            }\n\n            var other = findMatchingSeries(s, plot.getData());\n            if (!other) return;\n\n            var ps = datapoints.pointsize,\n                points = datapoints.points,\n                otherps = other.datapoints.pointsize,\n                otherpoints = other.datapoints.points,\n                newpoints = [],\n                px, py, intery, qx, qy, bottom,\n                withlines = s.lines.show,\n                horizontal = s.bars.horizontal,\n                withsteps = withlines && s.lines.steps,\n                fromgap = true,\n                keyOffset = horizontal ? 1 : 0,\n                accumulateOffset = horizontal ? 0 : 1,\n                i = 0, j = 0, l, m;\n\n            while (true) {\n                if (i >= points.length) break;\n\n                l = newpoints.length;\n\n                if (points[i] == null) {\n                    // copy gaps\n                    for (m = 0; m < ps; ++m) {\n                        newpoints.push(points[i + m]);\n                    }\n\n                    i += ps;\n                } else if (j >= otherpoints.length) {\n                    // for lines, we can't use the rest of the points\n                    if (!withlines) {\n                        for (m = 0; m < ps; ++m) {\n                            newpoints.push(points[i + m]);\n                        }\n                    }\n\n                    i += ps;\n                } else if (otherpoints[j] == null) {\n                    // oops, got a gap\n                    for (m = 0; m < ps; ++m) {\n                        newpoints.push(null);\n                    }\n\n                    fromgap = true;\n                    j += otherps;\n                } else {\n                    // cases where we actually got two points\n                    px = points[i + keyOffset];\n                    py = points[i + accumulateOffset];\n                    qx = otherpoints[j + keyOffset];\n                    qy = otherpoints[j + accumulateOffset];\n                    bottom = 0;\n\n                    if (px === qx) {\n                        for (m = 0; m < ps; ++m) {\n                            newpoints.push(points[i + m]);\n                        }\n\n                        newpoints[l + accumulateOffset] += qy;\n                        bottom = qy;\n\n                        i += ps;\n                        j += otherps;\n                    } else if (px > qx) {\n                        // we got past point below, might need to\n                        // insert interpolated extra point\n                        if (withlines && i > 0 && points[i - ps] != null) {\n                            intery = py + (points[i - ps + accumulateOffset] - py) * (qx - px) / (points[i - ps + keyOffset] - px);\n                            newpoints.push(qx);\n                            newpoints.push(intery + qy);\n                            for (m = 2; m < ps; ++m) {\n                                newpoints.push(points[i + m]);\n                            }\n\n                            bottom = qy;\n                        }\n\n                        j += otherps;\n                    } else { // px < qx\n                        if (fromgap && withlines) {\n                            // if we come from a gap, we just skip this point\n                            i += ps;\n                            continue;\n                        }\n\n                        for (m = 0; m < ps; ++m) {\n                            newpoints.push(points[i + m]);\n                        }\n\n                        // we might be able to interpolate a point below,\n                        // this can give us a better y\n                        if (withlines && j > 0 && otherpoints[j - otherps] != null) {\n                            bottom = qy + (otherpoints[j - otherps + accumulateOffset] - qy) * (px - qx) / (otherpoints[j - otherps + keyOffset] - qx);\n                        }\n\n                        newpoints[l + accumulateOffset] += bottom;\n\n                        i += ps;\n                    }\n\n                    fromgap = false;\n\n                    if (l !== newpoints.length && needsBottom) {\n                        newpoints[l + 2] += bottom;\n                    }\n                }\n\n                // maintain the line steps invariant\n                if (withsteps && l !== newpoints.length && l > 0 &&\n                    newpoints[l] !== null &&\n                    newpoints[l] !== newpoints[l - ps] &&\n                    newpoints[l + 1] !== newpoints[l - ps + 1]) {\n                    for (m = 0; m < ps; ++m) {\n                        newpoints[l + ps + m] = newpoints[l + m];\n                    }\n\n                    newpoints[l + 1] = newpoints[l - ps + 1];\n                }\n            }\n\n            datapoints.points = newpoints;\n        }\n\n        plot.hooks.processDatapoints.push(stackData);\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'stack',\n        version: '1.2'\n    });\n})(jQuery);\n","/* global jQuery */\n\n(function($) {\n    'use strict';\n\n    var options = {\n        pan: {\n            enableTouch: false\n        }\n    };\n\n    var ZOOM_DISTANCE_MARGIN = $.plot.uiConstants.ZOOM_DISTANCE_MARGIN;\n\n    function init(plot) {\n        plot.hooks.processOptions.push(initTouchNavigation);\n    }\n\n    function initTouchNavigation(plot, options) {\n        var gestureState = {\n                zoomEnable: false,\n                prevDistance: null,\n                prevTapTime: 0,\n                prevPanPosition: { x: 0, y: 0 },\n                prevTapPosition: { x: 0, y: 0 }\n            },\n            navigationState = {\n                prevTouchedAxis: 'none',\n                currentTouchedAxis: 'none',\n                touchedAxis: null,\n                navigationConstraint: 'unconstrained'\n            },\n            pan, pinch, doubleTap;\n\n        function bindEvents(plot, eventHolder) {\n            var o = plot.getOptions();\n\n            if (o.pan.interactive) {\n                eventHolder[0].addEventListener('panstart', pan.start, false);\n                eventHolder[0].addEventListener('pandrag', pan.drag, false);\n                eventHolder[0].addEventListener('panend', pan.end, false);\n                eventHolder[0].addEventListener('pinchstart', pinch.start, false);\n                eventHolder[0].addEventListener('pinchdrag', pinch.drag, false);\n                eventHolder[0].addEventListener('pinchend', pinch.end, false);\n                eventHolder[0].addEventListener('doubletap', doubleTap.recenterPlot, false);\n            }\n        }\n\n        function shutdown(plot, eventHolder) {\n            eventHolder[0].removeEventListener('panstart', pan.start);\n            eventHolder[0].removeEventListener('pandrag', pan.drag);\n            eventHolder[0].removeEventListener('panend', pan.end);\n            eventHolder[0].removeEventListener('pinchstart', pinch.start);\n            eventHolder[0].removeEventListener('pinchdrag', pinch.drag);\n            eventHolder[0].removeEventListener('pinchend', pinch.end);\n            eventHolder[0].removeEventListener('doubletap', doubleTap.recenterPlot);\n        }\n\n        pan = {\n            start: function(e) {\n                presetNavigationState(e, 'pan', gestureState);\n                updateData(e, 'pan', gestureState, navigationState);\n            },\n\n            drag: function(e) {\n                presetNavigationState(e, 'pan', gestureState);\n                plot.pan({\n                    left: delta(e, 'pan', gestureState).x,\n                    top: delta(e, 'pan', gestureState).y,\n                    axes: navigationState.touchedAxis\n                });\n                updatePrevPanPosition(e, 'pan', gestureState, navigationState);\n            },\n\n            end: function(e) {\n                presetNavigationState(e, 'pan', gestureState);\n                if (wasPinchEvent(e, gestureState)) {\n                    updateprevPanPosition(e, 'pan', gestureState, navigationState);\n                }\n            }\n        };\n        var pinchDragTimeout;\n        pinch = {\n            start: function(e) {\n                if (pinchDragTimeout) {\n                    clearTimeout(pinchDragTimeout);\n                    pinchDragTimeout = null;\n                }\n                presetNavigationState(e, 'pinch', gestureState);\n                setPrevDistance(e, gestureState);\n                updateData(e, 'pinch', gestureState, navigationState);\n            },\n\n            drag: function(e) {\n                if (pinchDragTimeout) {\n                    return;\n                }\n                pinchDragTimeout = setTimeout(function() {\n                    presetNavigationState(e, 'pinch', gestureState);\n                    plot.pan({\n                        left: delta(e, 'pinch', gestureState).x,\n                        top: delta(e, 'pinch', gestureState).y,\n                        axes: navigationState.touchedAxis\n                    });\n                    updatePrevPanPosition(e, 'pinch', gestureState, navigationState);\n\n                    var dist = pinchDistance(e);\n\n                    if (gestureState.zoomEnable || Math.abs(dist - gestureState.prevDistance) > ZOOM_DISTANCE_MARGIN) {\n                        zoomPlot(plot, e, gestureState, navigationState);\n\n                        //activate zoom mode\n                        gestureState.zoomEnable = true;\n                    }\n                    pinchDragTimeout = null;\n                }, 1000 / 60);\n            },\n\n            end: function(e) {\n                if (pinchDragTimeout) {\n                    clearTimeout(pinchDragTimeout);\n                    pinchDragTimeout = null;\n                }\n                presetNavigationState(e, 'pinch', gestureState);\n                gestureState.prevDistance = null;\n            }\n        };\n\n        doubleTap = {\n            recenterPlot: function(e) {\n                recenterPlotOnDoubleTap(plot, e, gestureState, navigationState);\n            }\n        };\n\n        if (options.pan.enableTouch === true) {\n            plot.hooks.bindEvents.push(bindEvents);\n            plot.hooks.shutdown.push(shutdown);\n        }\n\n        function presetNavigationState(e, gesture, gestureState) {\n            navigationState.touchedAxis = getAxis(plot, e, gesture, navigationState);\n            if (noAxisTouched(navigationState)) {\n                navigationState.navigationConstraint = 'unconstrained';\n            } else {\n                navigationState.navigationConstraint = 'axisConstrained';\n            }\n        }\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'navigateTouch',\n        version: '0.3'\n    });\n\n    function recenterPlotOnDoubleTap(plot, e, gestureState, navigationState) {\n        checkAxesForDoubleTap(plot, e, navigationState);\n        if ((navigationState.currentTouchedAxis === 'x' && navigationState.prevTouchedAxis === 'x') ||\n            (navigationState.currentTouchedAxis === 'y' && navigationState.prevTouchedAxis === 'y') ||\n            (navigationState.currentTouchedAxis === 'none' && navigationState.prevTouchedAxis === 'none')) {\n            plot.recenter({ axes: navigationState.touchedAxis });\n        }\n    }\n\n    function checkAxesForDoubleTap(plot, e, navigationState) {\n        var axis = plot.getTouchedAxis(e.detail.firstTouch.x, e.detail.firstTouch.y);\n        if (axis[0] !== undefined) {\n            navigationState.prevTouchedAxis = axis[0].direction;\n        }\n\n        axis = plot.getTouchedAxis(e.detail.secondTouch.x, e.detail.secondTouch.y);\n        if (axis[0] !== undefined) {\n            navigationState.touchedAxis = axis;\n            navigationState.currentTouchedAxis = axis[0].direction;\n        }\n\n        if (noAxisTouched(navigationState)) {\n            navigationState.touchedAxis = null;\n            navigationState.prevTouchedAxis = 'none';\n            navigationState.currentTouchedAxis = 'none';\n        }\n    }\n\n    function zoomPlot(plot, e, gestureState, navigationState) {\n        var offset = plot.offset(),\n            center = {\n                left: 0,\n                top: 0\n            },\n            zoomAmount = pinchDistance(e) / gestureState.prevDistance,\n            dist = pinchDistance(e);\n\n        center.left = getPoint(e, 'pinch').x - offset.left;\n        center.top = getPoint(e, 'pinch').y - offset.top;\n\n        // send the computed touched axis to the zoom function so that it only zooms on that one\n        plot.zoom({\n            center: center,\n            amount: zoomAmount,\n            axes: navigationState.touchedAxis\n        });\n        gestureState.prevDistance = dist;\n    }\n\n    function wasPinchEvent(e, gestureState) {\n        return (gestureState.zoomEnable && e.detail.touches.length === 1);\n    }\n\n    function getAxis(plot, e, gesture, navigationState) {\n        if (e.type === 'pinchstart') {\n            var axisTouch1 = plot.getTouchedAxis(e.detail.touches[0].pageX, e.detail.touches[0].pageY);\n            var axisTouch2 = plot.getTouchedAxis(e.detail.touches[1].pageX, e.detail.touches[1].pageY);\n\n            if (axisTouch1.length === axisTouch2.length && axisTouch1.toString() === axisTouch2.toString()) {\n                return axisTouch1;\n            }\n        } else if (e.type === 'panstart') {\n            return plot.getTouchedAxis(e.detail.touches[0].pageX, e.detail.touches[0].pageY);\n        } else if (e.type === 'pinchend') {\n            //update axis since instead on pinch, a pan event is made\n            return plot.getTouchedAxis(e.detail.touches[0].pageX, e.detail.touches[0].pageY);\n        } else {\n            return navigationState.touchedAxis;\n        }\n    }\n\n    function noAxisTouched(navigationState) {\n        return (!navigationState.touchedAxis || navigationState.touchedAxis.length === 0);\n    }\n\n    function setPrevDistance(e, gestureState) {\n        gestureState.prevDistance = pinchDistance(e);\n    }\n\n    function updateData(e, gesture, gestureState, navigationState) {\n        var axisDir,\n            point = getPoint(e, gesture);\n\n        switch (navigationState.navigationConstraint) {\n            case 'unconstrained':\n                navigationState.touchedAxis = null;\n                gestureState.prevTapPosition = {\n                    x: gestureState.prevPanPosition.x,\n                    y: gestureState.prevPanPosition.y\n                };\n                gestureState.prevPanPosition = {\n                    x: point.x,\n                    y: point.y\n                };\n                break;\n            case 'axisConstrained':\n                axisDir = navigationState.touchedAxis[0].direction;\n                navigationState.currentTouchedAxis = axisDir;\n                gestureState.prevTapPosition[axisDir] = gestureState.prevPanPosition[axisDir];\n                gestureState.prevPanPosition[axisDir] = point[axisDir];\n                break;\n            default:\n                break;\n        }\n    }\n\n    function distance(x1, y1, x2, y2) {\n        return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n    }\n\n    function pinchDistance(e) {\n        var t1 = e.detail.touches[0],\n            t2 = e.detail.touches[1];\n        return distance(t1.pageX, t1.pageY, t2.pageX, t2.pageY);\n    }\n\n    function updatePrevPanPosition(e, gesture, gestureState, navigationState) {\n        var point = getPoint(e, gesture);\n\n        switch (navigationState.navigationConstraint) {\n            case 'unconstrained':\n                gestureState.prevPanPosition.x = point.x;\n                gestureState.prevPanPosition.y = point.y;\n                break;\n            case 'axisConstrained':\n                gestureState.prevPanPosition[navigationState.currentTouchedAxis] =\n                point[navigationState.currentTouchedAxis];\n                break;\n            default:\n                break;\n        }\n    }\n\n    function delta(e, gesture, gestureState) {\n        var point = getPoint(e, gesture);\n\n        return {\n            x: point.x - gestureState.prevPanPosition.x,\n            y: point.y - gestureState.prevPanPosition.y\n        }\n    }\n\n    function getPoint(e, gesture) {\n        if (gesture === 'pinch') {\n            return {\n                x: (e.detail.touches[0].pageX + e.detail.touches[1].pageX) / 2,\n                y: (e.detail.touches[0].pageY + e.detail.touches[1].pageY) / 2\n            }\n        } else {\n            return {\n                x: e.detail.touches[0].pageX,\n                y: e.detail.touches[0].pageY\n            }\n        }\n    }\n})(jQuery);\n","/* global jQuery */\n\n/**\n## jquery.flot.hover.js\n\nThis plugin is used for mouse hover and tap on a point of plot series.\nIt supports the following options:\n```js\ngrid: {\n    hoverable: false, //to trigger plothover event on mouse hover or tap on a point\n    clickable: false //to trigger plotclick event on mouse hover\n}\n```\n\nIt listens to native mouse move event or click, as well as artificial generated\ntap and touchevent.\n\nWhen the mouse is over a point or a tap on a point is performed, that point or\nthe correscponding bar will be highlighted and a \"plothover\" event will be generated.\n\nCustom \"touchevent\" is triggered when any touch interaction is made. Hover plugin\nhandles this events by unhighlighting all of the previously highlighted points and generates\n\"plothovercleanup\" event to notify any part that is handling plothover (for exemple to cleanup\nthe tooltip from webcharts).\n*/\n\n(function($) {\n    'use strict';\n\n    var options = {\n        grid: {\n            hoverable: false,\n            clickable: false\n        }\n    };\n\n    var browser = $.plot.browser;\n\n    function init(plot) {\n        plot.hooks.processOptions.push(initHover);\n    }\n\n    function initHover(plot, options) {\n        var highlights = [];\n\n        var eventType = {\n            click: 'click',\n            hover: 'hover'\n        }\n\n        var lastMouseMoveEvent = plot.getPlaceholder()[0].lastMouseMoveEvent;\n\n        plot.highlight = highlight;\n        plot.unhighlight = unhighlight;\n\n        function bindEvents(plot, eventHolder) {\n            var o = plot.getOptions();\n\n            if (o.grid.hoverable || o.grid.clickable) {\n                eventHolder[0].addEventListener('touchevent', triggerCleanupEvent, false);\n                eventHolder[0].addEventListener('tap', tap.generatePlothoverEvent, false);\n            }\n\n            if (options.grid.clickable) {\n                eventHolder.click(onClick);\n            }\n\n            if (options.grid.hoverable) {\n                eventHolder.mousemove(onMouseMove);\n\n                // Use bind, rather than .mouseleave, because we officially\n                // still support jQuery 1.2.6, which doesn't define a shortcut\n                // for mouseenter or mouseleave.  This was a bug/oversight that\n                // was fixed somewhere around 1.3.x.  We can return to using\n                // .mouseleave when we drop support for 1.2.6.\n\n                eventHolder.bind(\"mouseleave\", onMouseLeave);\n            }\n        }\n\n        function shutdown(plot, eventHolder) {\n            eventHolder[0].removeEventListener('tap', tap.generatePlothoverEvent);\n            eventHolder[0].removeEventListener('tap', triggerCleanupEvent);\n            eventHolder.unbind(\"mousemove\", onMouseMove);\n            eventHolder.unbind(\"mouseleave\", onMouseLeave);\n            eventHolder.unbind(\"click\", onClick);\n            highlights = [];\n        }\n\n        function doTriggerClickHoverEvent(event, eventType, searchDistance) {\n            var series = plot.getData();\n            if (event !== undefined \n                && series.length > 0 \n                && series[0].xaxis.c2p !== undefined \n                && series[0].yaxis.c2p !== undefined) {\n                var eventToTrigger = \"plot\" + eventType;\n                var seriesFlag = eventType + \"able\";\n                triggerClickHoverEvent(eventToTrigger, event,\n                    function(i) {\n                        return series[i][seriesFlag] !== false;\n                    }, searchDistance);\n            }\n        }\n\n        var tap = {\n            generatePlothoverEvent: function (e) {\n                var o = plot.getOptions(),\n                    newEvent = new CustomEvent('mouseevent');\n\n                //transform from touch event to mouse event format\n                newEvent.pageX = e.detail.changedTouches[0].pageX;\n                newEvent.pageY = e.detail.changedTouches[0].pageY;\n                newEvent.clientX = e.detail.changedTouches[0].clientX;\n                newEvent.clientY = e.detail.changedTouches[0].clientY;\n\n                if (o.grid.hoverable) {\n                    doTriggerClickHoverEvent(newEvent, eventType.hover, 30);\n                }\n                return false;\n            }\n        };\n\n        if (options.grid.hoverable || options.grid.clickable) {\n            plot.hooks.bindEvents.push(bindEvents);\n            plot.hooks.shutdown.push(shutdown);\n            plot.hooks.drawOverlay.push(drawOverlay);\n            plot.hooks.processRawData.push(processRawData);\n        }\n\n        function onMouseMove(e) {\n            lastMouseMoveEvent = e;\n            plot.getPlaceholder()[0].lastMouseMoveEvent = e;\n            doTriggerClickHoverEvent(e, eventType.hover);\n        }\n\n        function onMouseLeave(e) {\n            lastMouseMoveEvent = undefined;\n            plot.getPlaceholder()[0].lastMouseMoveEvent = undefined;\n            triggerClickHoverEvent(\"plothover\", e,\n                function(i) {\n                    return false;\n                });\n        }\n\n        function onClick(e) {\n            doTriggerClickHoverEvent(e, eventType.click);\n        }\n\n        function triggerCleanupEvent() {\n            plot.unhighlight();\n            plot.getPlaceholder().trigger('plothovercleanup');\n        }\n\n        // trigger click or hover event (they send the same parameters\n        // so we share their code)\n        function triggerClickHoverEvent(eventname, event, seriesFilter, searchDistance) {\n            var options = plot.getOptions(),\n                offset = plot.offset(),\n                page = browser.getPageXY(event),\n                canvasX = page.X - offset.left,\n                canvasY = page.Y - offset.top,\n                pos = plot.c2p({\n                    left: canvasX,\n                    top: canvasY\n                }),\n                distance = searchDistance !== undefined ? searchDistance : options.grid.mouseActiveRadius;\n\n            pos.pageX = page.X;\n            pos.pageY = page.Y;\n\n            var item = plot.findNearbyItem(canvasX, canvasY, seriesFilter, distance);\n\n            if (item) {\n                // fill in mouse pos for any listeners out there\n                item.pageX = parseInt(item.series.xaxis.p2c(item.datapoint[0]) + offset.left, 10);\n                item.pageY = parseInt(item.series.yaxis.p2c(item.datapoint[1]) + offset.top, 10);\n            }\n\n            if (options.grid.autoHighlight) {\n                // clear auto-highlights\n                for (var i = 0; i < highlights.length; ++i) {\n                    var h = highlights[i];\n                    if ((h.auto === eventname &&\n                        !(item && h.series === item.series &&\n                            h.point[0] === item.datapoint[0] &&\n                            h.point[1] === item.datapoint[1])) || !item) {\n                        unhighlight(h.series, h.point);\n                    }\n                }\n\n                if (item) {\n                    highlight(item.series, item.datapoint, eventname);\n                }\n            }\n\n            plot.getPlaceholder().trigger(eventname, [pos, item]);\n        }\n\n        function highlight(s, point, auto) {\n            if (typeof s === \"number\") {\n                s = plot.getData()[s];\n            }\n\n            if (typeof point === \"number\") {\n                var ps = s.datapoints.pointsize;\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n            }\n\n            var i = indexOfHighlight(s, point);\n            if (i === -1) {\n                highlights.push({\n                    series: s,\n                    point: point,\n                    auto: auto\n                });\n\n                plot.triggerRedrawOverlay();\n            } else if (!auto) {\n                highlights[i].auto = false;\n            }\n        }\n\n        function unhighlight(s, point) {\n            if (s == null && point == null) {\n                highlights = [];\n                plot.triggerRedrawOverlay();\n                return;\n            }\n\n            if (typeof s === \"number\") {\n                s = plot.getData()[s];\n            }\n\n            if (typeof point === \"number\") {\n                var ps = s.datapoints.pointsize;\n                point = s.datapoints.points.slice(ps * point, ps * (point + 1));\n            }\n\n            var i = indexOfHighlight(s, point);\n            if (i !== -1) {\n                highlights.splice(i, 1);\n\n                plot.triggerRedrawOverlay();\n            }\n        }\n\n        function indexOfHighlight(s, p) {\n            for (var i = 0; i < highlights.length; ++i) {\n                var h = highlights[i];\n                if (h.series === s &&\n                    h.point[0] === p[0] &&\n                    h.point[1] === p[1]) {\n                    return i;\n                }\n            }\n\n            return -1;\n        }\n\n        function processRawData() {\n            triggerCleanupEvent();\n            doTriggerClickHoverEvent(lastMouseMoveEvent, eventType.hover);\n        }\n\n        function drawOverlay(plot, octx, overlay) {\n            var plotOffset = plot.getPlotOffset(),\n                i, hi;\n\n            octx.save();\n            octx.translate(plotOffset.left, plotOffset.top);\n            for (i = 0; i < highlights.length; ++i) {\n                hi = highlights[i];\n\n                if (hi.series.bars.show) drawBarHighlight(hi.series, hi.point, octx);\n                else drawPointHighlight(hi.series, hi.point, octx, plot);\n            }\n            octx.restore();\n        }\n    }\n\n    function drawPointHighlight(series, point, octx, plot) {\n        var x = point[0],\n            y = point[1],\n            axisx = series.xaxis,\n            axisy = series.yaxis,\n            highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString();\n\n        if (x < axisx.min || x > axisx.max || y < axisy.min || y > axisy.max) {\n            return;\n        }\n\n        var pointRadius = series.points.radius + series.points.lineWidth / 2;\n        octx.lineWidth = pointRadius;\n        octx.strokeStyle = highlightColor;\n        var radius = 1.5 * pointRadius;\n        x = axisx.p2c(x);\n        y = axisy.p2c(y);\n\n        octx.beginPath();\n        var symbol = series.points.symbol;\n        if (symbol === 'circle') {\n            octx.arc(x, y, radius, 0, 2 * Math.PI, false);\n        } else if (typeof symbol === 'string' && plot.drawSymbol && plot.drawSymbol[symbol]) {\n            plot.drawSymbol[symbol](octx, x, y, radius, false);\n        }\n\n        octx.closePath();\n        octx.stroke();\n    }\n\n    function drawBarHighlight(series, point, octx) {\n        var highlightColor = (typeof series.highlightColor === \"string\") ? series.highlightColor : $.color.parse(series.color).scale('a', 0.5).toString(),\n            fillStyle = highlightColor,\n            barLeft;\n\n        var barWidth = series.bars.barWidth[0] || series.bars.barWidth;\n        switch (series.bars.align) {\n            case \"left\":\n                barLeft = 0;\n                break;\n            case \"right\":\n                barLeft = -barWidth;\n                break;\n            default:\n                barLeft = -barWidth / 2;\n        }\n\n        octx.lineWidth = series.bars.lineWidth;\n        octx.strokeStyle = highlightColor;\n\n        var fillTowards = series.bars.fillTowards || 0,\n            bottom = fillTowards > series.yaxis.min ? Math.min(series.yaxis.max, fillTowards) : series.yaxis.min;\n\n        $.plot.drawSeries.drawBar(point[0], point[1], point[2] || bottom, barLeft, barLeft + barWidth,\n            function() {\n                return fillStyle;\n            }, series.xaxis, series.yaxis, octx, series.bars.horizontal, series.bars.lineWidth);\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'hover',\n        version: '0.1'\n    });\n})(jQuery);\n","\n/* global jQuery */\n\n(function($) {\n    'use strict';\n\n    var options = {\n        pan: {\n            enableTouch: false\n        }\n    };\n\n    function init(plot) {\n        plot.hooks.processOptions.push(initTouchNavigation);\n    }\n\n    function initTouchNavigation(plot, options) {\n        var gestureState = {\n                twoTouches: false,\n                currentTapStart: { x: 0, y: 0 },\n                currentTapEnd: { x: 0, y: 0 },\n                prevTap: { x: 0, y: 0 },\n                currentTap: { x: 0, y: 0 },\n                interceptedLongTap: false,\n                allowEventPropagation: false,\n                prevTapTime: null,\n                tapStartTime: null,\n                longTapTriggerId: null\n            },\n            maxDistanceBetweenTaps = 20,\n            maxIntervalBetweenTaps = 500,\n            maxLongTapDistance = 20,\n            minLongTapDuration = 1500,\n            pressedTapDuration = 125,\n            mainEventHolder;\n\n        function interpretGestures(e) {\n            var o = plot.getOptions();\n\n            if (!o.pan.active && !o.zoom.active) {\n                return;\n            }\n\n            updateOnMultipleTouches(e);\n            mainEventHolder.dispatchEvent(new CustomEvent('touchevent', { detail: e }));\n\n            if (isPinchEvent(e)) {\n                executeAction(e, 'pinch');\n            } else {\n                executeAction(e, 'pan');\n                if (!wasPinchEvent(e)) {\n                    if (isDoubleTap(e)) {\n                        executeAction(e, 'doubleTap');\n                    }\n                    executeAction(e, 'tap');\n                    executeAction(e, 'longTap');\n                }\n            }\n        }\n\n        function executeAction(e, gesture) {\n            switch (gesture) {\n                case 'pan':\n                    pan[e.type](e);\n                    break;\n                case 'pinch':\n                    pinch[e.type](e);\n                    break;\n                case 'doubleTap':\n                    doubleTap.onDoubleTap(e);\n                    break;\n                case 'longTap':\n                    longTap[e.type](e);\n                    break;\n                case 'tap':\n                    tap[e.type](e);\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        function bindEvents(plot, eventHolder) {\n            mainEventHolder = eventHolder[0];\n            eventHolder[0].addEventListener('touchstart', interpretGestures, false);\n            eventHolder[0].addEventListener('touchmove', interpretGestures, false);\n            eventHolder[0].addEventListener('touchend', interpretGestures, false);\n        }\n\n        function shutdown(plot, eventHolder) {\n            eventHolder[0].removeEventListener('touchstart', interpretGestures);\n            eventHolder[0].removeEventListener('touchmove', interpretGestures);\n            eventHolder[0].removeEventListener('touchend', interpretGestures);\n            if (gestureState.longTapTriggerId) {\n                clearTimeout(gestureState.longTapTriggerId);\n                gestureState.longTapTriggerId = null;\n            }\n        }\n\n        var pan = {\n            touchstart: function(e) {\n                updatePrevForDoubleTap();\n                updateCurrentForDoubleTap(e);\n                updateStateForLongTapStart(e);\n\n                mainEventHolder.dispatchEvent(new CustomEvent('panstart', { detail: e }));\n            },\n\n            touchmove: function(e) {\n                preventEventPropagation(e);\n\n                updateCurrentForDoubleTap(e);\n                updateStateForLongTapEnd(e);\n\n                if (!gestureState.allowEventPropagation) {\n                    mainEventHolder.dispatchEvent(new CustomEvent('pandrag', { detail: e }));\n                }\n            },\n\n            touchend: function(e) {\n                preventEventPropagation(e);\n\n                if (wasPinchEvent(e)) {\n                    mainEventHolder.dispatchEvent(new CustomEvent('pinchend', { detail: e }));\n                    mainEventHolder.dispatchEvent(new CustomEvent('panstart', { detail: e }));\n                } else if (noTouchActive(e)) {\n                    mainEventHolder.dispatchEvent(new CustomEvent('panend', { detail: e }));\n                }\n            }\n        };\n\n        var pinch = {\n            touchstart: function(e) {\n                mainEventHolder.dispatchEvent(new CustomEvent('pinchstart', { detail: e }));\n            },\n\n            touchmove: function(e) {\n                preventEventPropagation(e);\n                gestureState.twoTouches = isPinchEvent(e);\n                if (!gestureState.allowEventPropagation) {\n                    mainEventHolder.dispatchEvent(new CustomEvent('pinchdrag', { detail: e }));\n                }\n            },\n\n            touchend: function(e) {\n                preventEventPropagation(e);\n            }\n        };\n\n        var doubleTap = {\n            onDoubleTap: function(e) {\n                preventEventPropagation(e);\n                mainEventHolder.dispatchEvent(new CustomEvent('doubletap', { detail: e }));\n            }\n        };\n\n        var longTap = {\n            touchstart: function(e) {\n                longTap.waitForLongTap(e);\n            },\n\n            touchmove: function(e) {\n            },\n\n            touchend: function(e) {\n                if (gestureState.longTapTriggerId) {\n                    clearTimeout(gestureState.longTapTriggerId);\n                    gestureState.longTapTriggerId = null;\n                }\n            },\n\n            isLongTap: function(e) {\n                var currentTime = new Date().getTime(),\n                    tapDuration = currentTime - gestureState.tapStartTime;\n                if (tapDuration >= minLongTapDuration && !gestureState.interceptedLongTap) {\n                    if (distance(gestureState.currentTapStart.x, gestureState.currentTapStart.y, gestureState.currentTapEnd.x, gestureState.currentTapEnd.y) < maxLongTapDistance) {\n                        gestureState.interceptedLongTap = true;\n                        return true;\n                    }\n                }\n                return false;\n            },\n\n            waitForLongTap: function(e) {\n                var longTapTrigger = function() {\n                    if (longTap.isLongTap(e)) {\n                        mainEventHolder.dispatchEvent(new CustomEvent('longtap', { detail: e }));\n                    }\n                    gestureState.longTapTriggerId = null;\n                };\n                if (!gestureState.longTapTriggerId) {\n                    gestureState.longTapTriggerId = setTimeout(longTapTrigger, minLongTapDuration);\n                }\n            }\n        };\n\n        var tap = {\n            touchstart: function(e) {\n                gestureState.tapStartTime = new Date().getTime();\n            },\n\n            touchmove: function(e) {\n            },\n\n            touchend: function(e) {\n                if (tap.isTap(e)) {\n                    mainEventHolder.dispatchEvent(new CustomEvent('tap', { detail: e }));\n                    preventEventPropagation(e);\n                }\n            },\n\n            isTap: function(e) {\n                var currentTime = new Date().getTime(),\n                    tapDuration = currentTime - gestureState.tapStartTime;\n                if (tapDuration <= pressedTapDuration) {\n                    if (distance(gestureState.currentTapStart.x, gestureState.currentTapStart.y, gestureState.currentTapEnd.x, gestureState.currentTapEnd.y) < maxLongTapDistance) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        };\n\n        if (options.pan.enableTouch === true) {\n            plot.hooks.bindEvents.push(bindEvents);\n            plot.hooks.shutdown.push(shutdown);\n        };\n\n        function updatePrevForDoubleTap() {\n            gestureState.prevTap = {\n                x: gestureState.currentTap.x,\n                y: gestureState.currentTap.y\n            };\n        };\n\n        function updateCurrentForDoubleTap(e) {\n            gestureState.currentTap = {\n                x: e.touches[0].pageX,\n                y: e.touches[0].pageY\n            };\n        }\n\n        function updateStateForLongTapStart(e) {\n            gestureState.tapStartTime = new Date().getTime();\n            gestureState.interceptedLongTap = false;\n            gestureState.currentTapStart = {\n                x: e.touches[0].pageX,\n                y: e.touches[0].pageY\n            };\n            gestureState.currentTapEnd = {\n                x: e.touches[0].pageX,\n                y: e.touches[0].pageY\n            };\n        };\n\n        function updateStateForLongTapEnd(e) {\n            gestureState.currentTapEnd = {\n                x: e.touches[0].pageX,\n                y: e.touches[0].pageY\n            };\n        };\n\n        function isDoubleTap(e) {\n            var currentTime = new Date().getTime(),\n                intervalBetweenTaps = currentTime - gestureState.prevTapTime;\n\n            if (intervalBetweenTaps >= 0 && intervalBetweenTaps < maxIntervalBetweenTaps) {\n                if (distance(gestureState.prevTap.x, gestureState.prevTap.y, gestureState.currentTap.x, gestureState.currentTap.y) < maxDistanceBetweenTaps) {\n                    e.firstTouch = gestureState.prevTap;\n                    e.secondTouch = gestureState.currentTap;\n                    return true;\n                }\n            }\n            gestureState.prevTapTime = currentTime;\n            return false;\n        }\n\n        function preventEventPropagation(e) {\n            if (!gestureState.allowEventPropagation) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n\n        function distance(x1, y1, x2, y2) {\n            return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n        }\n\n        function noTouchActive(e) {\n            return (e.touches && e.touches.length === 0);\n        }\n\n        function wasPinchEvent(e) {\n            return (gestureState.twoTouches && e.touches.length === 1);\n        }\n\n        function updateOnMultipleTouches(e) {\n            if (e.touches.length >= 3) {\n                gestureState.allowEventPropagation = true;\n            } else {\n                gestureState.allowEventPropagation = false;\n            }\n        }\n\n        function isPinchEvent(e) {\n            if (e.touches && e.touches.length >= 2) {\n                if (e.touches[0].target === plot.getEventHolder() &&\n                    e.touches[1].target === plot.getEventHolder()) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'navigateTouch',\n        version: '0.3'\n    });\n})(jQuery);\n","/* Pretty handling of time axes.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nSet axis.format to \"time\" to enable. See the section \"Time series data\" in\nAPI.txt for details.\n*/\n\n/** ## jquery.flot.absRelTime.js\n\nThis plugin is used to format the time axis in absolute time representation as\nwell as relative time representation.\n\nIt supports the following options:\n```js\nxaxis: {\n    timezone: null, // \"browser\" for local to the client or timezone for timezone-js\n    timeformat: null, // format string to use\n    twelveHourClock: false, // 12 or 24 time in time mode\n    monthNames: null // list of names of months\n    timeEpoch: '0000-12-31T18:00:00' // A time in UTC string format to use as an offset for the display of dates (see below)\n}\nyaxis: {\n    timeEpoch: '0000-12-31T18:00:00' // A time in UTC string format to use as an offset for the display of dates (see below)\n}\n```\n\nDepending upon the timeformat axis parameter value, the axis tick formatter will\nchoose between an absolute time representation if the value begins with '%A' or\nrelative time for timeformat '%r'.\n\nTime formatting options may follow the %A or %r specification in the timeformat string.\nThey take the form of:\n\n<(hh|HH):mm[:ss[.S+]]> or <#T> for localized version of time\n\n'<HH:mm>'          24-hour format\n'<hh:mm:ss>'       12-hour format\n'<hh:mm:ss.SSS>'   12-hour format, with three-digit fractional seconds\n'<#T.SSS>'         localized format, with three-digit fractional seconds\n\nDate formatting options will be honored when following the %A specification. Note that it\ncan be used in combination with the time formatting (with both sets of options between\nthe '<>' characters. If both date and time formatting options are present, currently time\nwill always be displayed first, and the date will be displayed on a newline.\n\nDate formats are as follows:\n\n<(dd/MM|MM/dd)/yy(yy)> or <#d> for localized version of date\n\n'<dd/MM>'         Day/Month  (no year)\n'<MM/dd/yy>'      Month/Day/2-digit year\n'<MM/dd/yyyy>'    Month/Day/4-digit year\n'<#d>'            localized date format (per preferred language setting of browser)\n\nIf the format for an axis is 'time', inside processOptions hook the tickGenerator\nand tickFormatter of the axis will be overrided with the custom ones used by time axes.\n\nThe formatted values look like in the example bellow:\n\n|format|value(s)|formatted value(s)|\n|------|----:|--------------:|\n|Absolute time|0|12:00:00 AM 1/1/0001|\n|Absolute time|300|12:05:00 AM 1/1/0001|\n|Relative Time|0, 300, 600|00:00:00, 00:05:00, 00:10:00|\n|Relative Time|300, 600, 900|00:00:00, 00:05:00, 00:10:00|\n\n### Relative time axis\nA relative time axis will show the time values with respect to the first data sample.\nBasically, the first datapoint from the points array will be considered time 00:00:00:00.\nIf the difference between two datapoints is small, the milliseconds will apear.\nOtherwise, the time representation will contain only the hour, minute and second.\nNOTE: If a formatString is provided, any date format will be ignored.\n\n### Absolute time axis\nThe absolute time representation contains, beside the hours, minutes and seconds\ncorresponding to the sample the date and year.\nThe value will be splitted on two rows, where the first row is the time and\nthe the second one the date in gregorian date format.\n*/\n\n(function($) {\n    'use strict';\n\n    var options = {\n        xaxis: {\n            timezone: null, // \"browser\" for local to the client or timezone for timezone-js\n            timeformat: null, // format string to use\n            twelveHourClock: false, // 12 or 24 time in time mode\n            monthNames: null, // list of names of months\n            // the UTC date in the form of \"total milliseconds from\" to use as the epoch for formatted values\n            // the default will format a date of \"0 milliseconds\" to be \"12:00:00 AM 01/01/0000\"\n            timeEpoch: -62135596800000\n        },\n        yaxis: {\n            // the UTC date in the form of \"total milliseconds from\" to use as the epoch for formatted values\n            // the default will format a date of \"0 milliseconds\" to be \"12:00:00 AM 01/01/0000\"\n            timeEpoch: -62135596800000\n        }\n    };\n\n    var floorInBase = $.plot.saturated.floorInBase;\n\n    // Returns a string with the date d formatted according to fmt.\n    // A subset of the Open Group's strftime format is supported.\n\n    function formatDate(d, fmt, monthNames, dayNames, showMilliseconds, axis) {\n        if (typeof d.strftime === \"function\") {\n            return d.strftime(fmt);\n        }\n\n        var leftPad = function(n, pad) {\n            n = \"\" + n;\n            if (pad) pad = \"\" + pad;\n            else pad = \"0\";\n\n            return n.length === 1 ? pad + n : n;\n        };\n\n        var padNTimes = function(n, pad, nTimes, right) {\n            n = \"\" + n;\n            if (pad) pad = \"\" + pad;\n            else pad = \"0\";\n\n            while (n.length < nTimes) {\n                if (right === true) {\n                    n = n + pad;\n                } else {\n                    n = pad + n;\n                }\n            }\n            return n;\n        };\n\n        function addMilliseconds(date, ms) {\n            var parts = date.split(' ');\n            if (parts.length > 1) {\n                var sufix = parts[parts.length - 1];\n                parts.splice(parts.length - 1, 1);\n\n                return parts.join(' ') + ms + ' ' + sufix;\n            } else {\n                return date + ms;\n            }\n        }\n\n        function formatLanguage() {\n            // horrible hack\n            if (window.NIEmbeddedBrowser && window.NIEmbeddedBrowser.formatLanguage) {\n                return window.NIEmbeddedBrowser.formatLanguage;\n            }\n\n            return navigator.locale || 'en-US';\n        }\n\n        // Returns the set of options to be used by an instance of Intl.DateTimeFormat\n        function getFormatterOptions(formatString) {\n            var options = {};\n            if (formatString === undefined || formatString === null) {\n                return options;\n            }\n\n            if (formatString.indexOf(\"#d\") >= 0) {\n                options['year'] = \"numeric\";\n                options['month'] = \"numeric\";\n                options['day'] = \"numeric\";\n            } else {\n                if (formatString.indexOf(\"yyyy\") >= 0) {\n                    options['year'] = \"numeric\";\n                } else if (formatString.indexOf(\"yy\") >= 0) {\n                    options['year'] = \"2-digit\";\n                }\n\n                options['month'] = \"numeric\";\n                options['day'] = \"numeric\";\n            }\n\n            if (formatString.indexOf(\"#T\") >= 0) {\n                options['hour'] = \"numeric\";\n                options['minute'] = \"numeric\";\n                options['second'] = \"numeric\";\n            } else { // format has either \"hh\" or \"HH\" (which always will show minutes)\n                options['hour'] = \"2-digit\";\n                options['minute'] = \"2-digit\";\n\n                if (formatString.indexOf(\"ss\") >= 0) {\n                    options['second'] = \"2-digit\";\n                }\n\n                options['hour12'] = formatString.indexOf(\"hh\") >= 0;\n            }\n\n            return options;\n        }\n\n        function getFormattedDateString(date, formatString, formatOptions, locale) {\n            var showYear = formatString.indexOf(\"yy\") >= 0 || formatString.indexOf(\"#d\") >= 0;\n            if (!showYear && !(formatString.indexOf(\"MM\") >= 0)) {\n                return \"\";\n            }\n\n            // System format\n            if (formatString.indexOf(\"#d\") >= 0) {\n                return Intl.DateTimeFormat(locale, {year: 'numeric', month: 'numeric', day: 'numeric'}).format(date);\n            }\n\n            // Custom format\n            var formatParts = Intl.DateTimeFormat(locale, formatOptions).formatToParts(date);\n            var formatPartsTypeList = formatParts.map(({type, value}) => { return type; });\n            var dayIndex = formatPartsTypeList.indexOf('day');\n            var monthIndex = formatPartsTypeList.indexOf('month');\n            var dayMonthDelimiter = formatParts[(monthIndex + dayIndex) / 2].value;\n            var dayValue = leftPad(formatParts[dayIndex].value);\n            var monthValue = leftPad(formatParts[monthIndex].value);\n            var yearValue = showYear ? formatParts[formatPartsTypeList.indexOf('year')].value : \"\";\n\n            if (showYear) {\n                var padAmount = formatString.indexOf(\"yyyy\") >= 0 ? 4 : 2;\n                yearValue = padNTimes(yearValue, \"0\", padAmount);\n            }\n\n            if (formatString.indexOf(\"dd\") < formatString.indexOf(\"MM\")) {\n                return dayValue + dayMonthDelimiter + monthValue + (showYear ? dayMonthDelimiter + yearValue : \"\");\n            } else {\n                return monthValue + dayMonthDelimiter + dayValue + (showYear ? dayMonthDelimiter + yearValue : \"\");\n            }\n        }\n\n        function getFractionalSecondsString(milliseconds, formatString, forceFractionalSeconds) {\n            var fractionalSecondsIndex = formatString.indexOf(\".S\");\n            var fractionalSecondsSearch = new RegExp(\".S+\", \"g\");\n            var fallbackDigitCount = forceFractionalSeconds ? 3 : 0;\n            var numberOfFractionalSeconds = fractionalSecondsIndex > 0 ? fractionalSecondsSearch.exec(formatString)[0].length - 1 : fallbackDigitCount;\n            var fractionalSecondsString = padNTimes(milliseconds, \"0\", 3);\n            fractionalSecondsString = padNTimes(fractionalSecondsString, \"0\", numberOfFractionalSeconds, true);\n            fractionalSecondsString = numberOfFractionalSeconds > 0 ? fractionalSecondsString.substring(0, numberOfFractionalSeconds) : \"\";\n            return fractionalSecondsString;\n        }\n\n        function getFormattedTimeString(date, formatString, formatOptions, locale) {\n            var showTime = formatString.indexOf(\"hh\") >= 0 || formatString.indexOf(\"HH\") >= 0 || formatString.indexOf(\"#T\") >= 0;\n            if (!showTime) {\n                return \"\";\n            }\n\n            var fractionalSecondsString = getFractionalSecondsString(date.getMilliseconds(), formatString);\n\n            // System format\n            if (formatString.indexOf(\"#T\") >= 0) {\n                var formattedDate = Intl.DateTimeFormat(locale, {hour: 'numeric', minute: 'numeric', second: 'numeric'}).format(date);\n                if (fractionalSecondsString !== \"\") {\n                    var lastDigitSearch = new RegExp(\"[0-9](?!.*[0-9])\", \"g\");\n                    lastDigitSearch.test(formattedDate);\n                    formattedDate = [formattedDate.slice(0, lastDigitSearch.lastIndex), \".\" + fractionalSecondsString, formattedDate.slice(lastDigitSearch.lastIndex)].join('');\n                }\n\n                return formattedDate;\n            }\n\n            // Custom format\n            var formatParts = Intl.DateTimeFormat(locale, formatOptions).formatToParts(date);\n            var formatPartsTypeList = formatParts.map(({type, value}) => { return type.toLowerCase(); });\n            var hourIndex = formatPartsTypeList.indexOf('hour');\n            var minuteIndex = formatPartsTypeList.indexOf('minute');\n            var hourMinuteDelimiter = formatParts[(hourIndex + minuteIndex) / 2].value;\n            var hourValue = leftPad(formatParts[hourIndex].value);\n            var minuteValue = leftPad(formatParts[minuteIndex].value);\n            var showSeconds = formatString.indexOf(\"ss\") >= 0;\n            var secondValue = showSeconds ? leftPad(formatParts[formatPartsTypeList.indexOf('second')].value) : \"\";\n            var dayPeriod = formatOptions['hour12'] === true ? formatParts[formatPartsTypeList.indexOf('dayperiod')].value : \"\";\n            return hourValue +\n                   hourMinuteDelimiter +\n                   minuteValue +\n                   (showSeconds ? hourMinuteDelimiter + secondValue : \"\") +\n                   (showSeconds && fractionalSecondsString.length > 0 ? \".\" + fractionalSecondsString : \"\") +\n                   (dayPeriod !== \"\" ? \" \" + dayPeriod : \"\");\n        }\n\n        function getFormattedDateTimeString(date, formatString) {\n            var locale = navigator.language || navigator.browserLanguage || navigator.languages[0];\n            var formatOptions = getFormatterOptions(formatString);\n            var dateString = getFormattedDateString(date, formatString, formatOptions, locale);\n            var timeString = getFormattedTimeString(date, formatString, formatOptions, locale);\n            return timeString + (dateString !== \"\" && timeString !== \"\" ? \"<br>\" : \"\") + dateString;\n        }\n\n        function getDefaultDateTimeString(gregorianDate, showMilliseconds, ms) {\n            var msString = showMilliseconds ? '.' + padNTimes(ms, '0', 3) : '';\n            var time = Globalize.format(gregorianDate, \"T\", formatLanguage());\n            time = addMilliseconds(time, msString) + '<br>' + Globalize.format(gregorianDate, \"d\", formatLanguage());\n            return time;\n        }\n\n        function toAbsoluteTimeStr(date, showMilliseconds, formatString, timeEpoch) {\n            var unixToAbsoluteEpochDiff = 62135596800000,\n                minDateValue = -8640000000000000,\n                d = date.valueOf(),\n                ms = Math.floor(d % 1000);\n\n            if (ms < 0) {\n                ms = 1000 + ms;\n            }\n\n            if (date < minDateValue + unixToAbsoluteEpochDiff) {\n                date = minDateValue + unixToAbsoluteEpochDiff;\n            }\n\n            var gregorianDate = makeUtcWrapper(new Date(date.valueOf() + timeEpoch)).date;\n\n            var time;\n            if (formatString !== \"\") {\n                try {\n                    time = getFormattedDateTimeString(gregorianDate, formatString);\n                }\n                catch(err) {\n                    time = getDefaultDateTimeString(gregorianDate, showMilliseconds, ms);\n                }\n            } else {\n                time = getDefaultDateTimeString(gregorianDate, showMilliseconds, ms);\n            }\n\n            return time;\n        }\n\n        function toRelativeTimeStr(date, showMilliseconds, formatString) {\n            var result = '';\n\n            var dateValue = date.valueOf(),\n                d = dateValue - (axis.valueOfFirstData === undefined ? 0 : axis.valueOfFirstData);\n\n            if (d < 0) {\n                d = -d;\n                result += '-';\n            }\n            var dateInSeconds = Math.floor(d / 1000);\n            var milliseconds = Math.floor(d % 1000);\n            var seconds = dateInSeconds % 60;\n            var dateInMinutes = Math.floor(dateInSeconds / 60);\n            var minutes = dateInMinutes % 60;\n            var dateInHours = Math.floor(dateInMinutes / 60);\n            var hours = dateInHours % 24;\n            var days = Math.floor(dateInHours / 24);\n            var showSeconds = formatString === \"\" || formatString.indexOf(\"ss\") >= 0;\n\n            if (days && formatString === \"\") {\n                result += days + '.';\n            }\n\n            result += leftPad(hours) + ':';\n            result += leftPad(minutes);\n            if (showSeconds) {\n                result += (\":\" + leftPad(seconds));\n                var fractionalSecondsString = getFractionalSecondsString(milliseconds, formatString, showMilliseconds);\n                result += (showMilliseconds || fractionalSecondsString.length > 0) ? '.' + fractionalSecondsString : \"\";\n            }\n\n            return result;\n        }\n\n        var r = [];\n        var escape = false;\n\n        if (!monthNames) {\n            monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n        }\n\n        if (!dayNames) {\n            dayNames = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n        }\n\n        for (var i = 0; i < fmt.length; ++i) {\n            var c = fmt.charAt(i),\n                localDateValue = d.date || d.getDate();\n            if (escape) {\n                var timeFormatStartIndex = fmt.indexOf('<');\n                var timeFormatEndIndex = fmt.indexOf('>');\n                var timeFormat = timeFormatStartIndex > 0 ? fmt.substring(timeFormatStartIndex + 1, timeFormatEndIndex) : \"\";\n                if (timeFormatStartIndex > 0) {\n                    i += (timeFormat.length + 2);\n                }\n\n                switch (c) {\n                    case 'r': c = toRelativeTimeStr(localDateValue, showMilliseconds, timeFormat); break;\n                    case 'A': c = toAbsoluteTimeStr(localDateValue, showMilliseconds, timeFormat, axis.options.timeEpoch); break;\n                }\n                r.push(c);\n                escape = false;\n            } else {\n                if (c === \"%\") {\n                    escape = true;\n                } else {\n                    r.push(c);\n                }\n            }\n        }\n\n        return r.join(\"\");\n    }\n\n    // To have a consistent view of time-based data independent of which time\n    // zone the client happens to be in we need a date-like object independent\n    // of time zones.  This is done through a wrapper that only calls the UTC\n    // versions of the accessor methods.\n\n    function makeUtcWrapper(d) {\n        function addProxyMethod(sourceObj, sourceMethod, targetObj, targetMethod) {\n            sourceObj[sourceMethod] = function() {\n                return targetObj[targetMethod].apply(targetObj, arguments);\n            };\n        }\n\n        var utc = {\n            date: d\n        };\n\n        // support strftime, if found\n        if (d.strftime !== undefined) {\n            addProxyMethod(utc, \"strftime\", d, \"strftime\");\n        }\n\n        addProxyMethod(utc, \"getTime\", d, \"getTime\");\n        addProxyMethod(utc, \"setTime\", d, \"setTime\");\n\n        var props = [\"Date\", \"Day\", \"FullYear\", \"Hours\", \"Milliseconds\", \"Minutes\", \"Month\", \"Seconds\"];\n\n        for (var p = 0; p < props.length; p++) {\n            addProxyMethod(utc, \"get\" + props[p], d, \"getUTC\" + props[p]);\n            addProxyMethod(utc, \"set\" + props[p], d, \"setUTC\" + props[p]);\n        }\n\n        return utc;\n    }\n\n    // select time zone strategy.  This returns a date-like object tied to the\n    // desired timezone\n    function dateGenerator(ts, opts) {\n        var maxDateValue = 8640000000000000;\n\n        ts *= 1000;\n\n        if (ts > maxDateValue) {\n            ts = maxDateValue;\n        } else if (ts < -maxDateValue) {\n            ts = -maxDateValue;\n        }\n\n        if (opts.timezone === \"browser\") {\n            return new Date(ts);\n        } else if (!opts.timezone || opts.timezone === \"utc\") {\n            return makeUtcWrapper(new Date(ts));\n        } else if (typeof timezoneJS !== \"undefined\" && typeof timezoneJS.Date !== \"undefined\") {\n            var d = new timezoneJS.Date();\n            // timezone-js is fickle, so be sure to set the time zone before\n            // setting the time.\n            d.setTimezone(opts.timezone);\n            d.setTime(ts);\n            return d;\n        } else {\n            return makeUtcWrapper(new Date(ts));\n        }\n    }\n\n    // map of app. size of time units in milliseconds\n    var timeUnitSize = {\n        \"millisecond\": 0.001,\n        \"second\": 1,\n        \"minute\": 60,\n        \"hour\": 60 * 60,\n        \"day\": 24 * 60 * 60,\n        \"month\": 30 * 24 * 60 * 60,\n        \"quarter\": 3 * 30 * 24 * 60 * 60,\n        \"year\": 365.2425 * 24 * 60 * 60\n    };\n\n    // the allowed tick sizes, after 1 year we use\n    // an integer algorithm\n\n    var baseSpec = [\n        [1, \"millisecond\"], [2, \"millisecond\"], [5, \"millisecond\"], [10, \"millisecond\"],\n        [25, \"millisecond\"], [50, \"millisecond\"], [100, \"millisecond\"], [250, \"millisecond\"], [500, \"millisecond\"],\n        [1, \"second\"], [2, \"second\"], [5, \"second\"], [10, \"second\"],\n        [30, \"second\"],\n        [1, \"minute\"], [2, \"minute\"], [5, \"minute\"], [10, \"minute\"],\n        [30, \"minute\"],\n        [1, \"hour\"], [2, \"hour\"], [4, \"hour\"],\n        [8, \"hour\"], [12, \"hour\"],\n        [1, \"day\"], [2, \"day\"], [3, \"day\"],\n        [0.25, \"month\"], [0.5, \"month\"], [1, \"month\"],\n        [2, \"month\"]\n    ];\n\n    // we don't know which variant(s) we'll need yet, but generating both is\n    // cheap\n\n    var specMonths = baseSpec.concat([[3, \"month\"], [6, \"month\"],\n        [1, \"year\"]]);\n    var specQuarters = baseSpec.concat([[1, \"quarter\"], [2, \"quarter\"],\n        [1, \"year\"]]);\n\n    //function used for relative time axis to compute the first data point from which the values are starting\n    function updateAxisFirstData(plot, axis) {\n        var plotData = plot.getData();\n        if (plotData.length > 0 && (plotData[0].data.length > 0 || plotData[0].datapoints.points.length > 0)) {\n            var i, firstPlotData, minFirstPlotData, datapoints = plotData[0].datapoints;\n            if (datapoints.points.length !== 0) {\n                if (plotData[0].xaxis === axis || plotData[0].yaxis === axis) {\n                    minFirstPlotData = axis.direction === \"x\" ? datapoints.points[0] : datapoints.points[1];\n                } else { minFirstPlotData = axis.max; }\n            } else { minFirstPlotData = axis.min; }\n\n            for (i = 1; i < plotData.length; i++) {\n                datapoints = plotData[i].datapoints;\n                if (plotData[i].xaxis === axis || plotData[i].yaxis === axis) {\n                    firstPlotData = axis.direction === \"x\" ? datapoints.points[0] : datapoints.points[1];\n                    if (minFirstPlotData > firstPlotData) {\n                        minFirstPlotData = firstPlotData;\n                    }\n                }\n            }\n\n            axis.valueOfFirstData = minFirstPlotData * 1000;\n        }\n    }\n\n    function init(plot) {\n        plot.hooks.processOptions.push(function (plot) {\n            $.each(plot.getAxes(), function(axisName, axis) {\n                var opts = axis.options;\n                if (opts.format === \"time\") {\n                    axis.tickGenerator = function(axis) {\n                        var ticks = [],\n                            d = dateGenerator(axis.min, opts),\n                            minSize = 0;\n\n                        if (axis.valueOfFirstData === undefined) {\n                            updateAxisFirstData(plot, axis);\n                        }\n\n                        // make quarter use a possibility if quarters are\n                        // mentioned in either of these options\n                        var spec = (opts.tickSize && opts.tickSize[1] ===\n                            \"quarter\") ||\n                            (opts.minTickSize && opts.minTickSize[1] ===\n                            \"quarter\") ? specQuarters : specMonths;\n\n                        if (opts.minTickSize !== null && opts.minTickSize !== undefined) {\n                            if (typeof opts.tickSize === \"number\") {\n                                minSize = opts.tickSize;\n                            } else {\n                                minSize = opts.minTickSize[0] * timeUnitSize[opts.minTickSize[1]];\n                            }\n                        }\n\n                        var delta = axis.delta * 2;\n                        for (var i = 0; i < spec.length - 1; ++i) {\n                            if (delta < (spec[i][0] * timeUnitSize[spec[i][1]] +\n                                spec[i + 1][0] * timeUnitSize[spec[i + 1][1]]) / 2 &&\n                                spec[i][0] * timeUnitSize[spec[i][1]] >= minSize) {\n                                break;\n                            }\n                        }\n\n                        var size = spec[i][0];\n                        var unit = spec[i][1];\n                        // special-case the possibility of several years\n                        if (unit === \"year\") {\n                            // if given a minTickSize in years, just use it,\n                            // ensuring that it's an integer\n\n                            if (opts.minTickSize !== null && opts.minTickSize !== undefined && opts.minTickSize[1] === \"year\") {\n                                size = Math.floor(opts.minTickSize[0]);\n                            } else {\n                                var magn = Math.pow(10, Math.floor(Math.log(axis.delta / timeUnitSize.year) / Math.LN10));\n                                var norm = (axis.delta / timeUnitSize.year) / magn;\n\n                                if (norm < 1.5) {\n                                    size = 1;\n                                } else if (norm < 3) {\n                                    size = 2;\n                                } else if (norm < 7.5) {\n                                    size = 5;\n                                } else {\n                                    size = 10;\n                                }\n\n                                size *= magn;\n                            }\n\n                            // minimum size for years is 1\n\n                            if (size < 1) {\n                                size = 1;\n                            }\n                        }\n\n                        axis.tickSize = opts.tickSize || [size, unit];\n                        var tickSize = axis.tickSize[0];\n                        unit = axis.tickSize[1];\n\n                        var step = tickSize * timeUnitSize[unit];\n\n                        if (unit === \"millisecond\") {\n                            d.setMilliseconds(floorInBase(d.getMilliseconds(), tickSize));\n                        } else if (unit === \"second\") {\n                            d.setSeconds(floorInBase(d.getSeconds(), tickSize));\n                        } else if (unit === \"minute\") {\n                            d.setMinutes(floorInBase(d.getMinutes(), tickSize));\n                        } else if (unit === \"hour\") {\n                            d.setHours(floorInBase(d.getHours(), tickSize));\n                        } else if (unit === \"month\") {\n                            d.setMonth(floorInBase(d.getMonth(), tickSize));\n                        } else if (unit === \"quarter\") {\n                            d.setMonth(3 * floorInBase(d.getMonth() / 3,\n                                tickSize));\n                        } else if (unit === \"year\") {\n                            d.setFullYear(floorInBase(d.getFullYear(), tickSize));\n                        }\n\n                        // reset smaller components\n\n                        if (step >= timeUnitSize.second) {\n                            d.setMilliseconds(0);\n                        }\n\n                        if (step >= timeUnitSize.minute) {\n                            d.setSeconds(0);\n                        }\n                        if (step >= timeUnitSize.hour) {\n                            d.setMinutes(0);\n                        }\n                        if (step >= timeUnitSize.day) {\n                            d.setHours(0);\n                        }\n                        if (step >= timeUnitSize.day * 4) {\n                            d.setDate(1);\n                        }\n                        if (step >= timeUnitSize.month * 2) {\n                            d.setMonth(floorInBase(d.getMonth(), 3));\n                        }\n                        if (step >= timeUnitSize.quarter * 2) {\n                            d.setMonth(floorInBase(d.getMonth(), 6));\n                        }\n                        if (step >= timeUnitSize.year) {\n                            d.setMonth(0);\n                        }\n\n                        var carry = 0;\n                        var v = Number.NaN;\n                        var v1000;\n                        var prev;\n                        do {\n                            prev = v;\n                            v1000 = d.getTime();\n                            v = v1000 / 1000;\n                            ticks.push(v);\n\n                            if (unit === \"month\" || unit === \"quarter\") {\n                                if (tickSize < 1) {\n                                    // a bit complicated - we'll divide the\n                                    // month/quarter up but we need to take\n                                    // care of fractions so we don't end up in\n                                    // the middle of a day\n                                    d.setDate(1);\n                                    var start = d.getTime();\n                                    d.setMonth(d.getMonth() +\n                                        (unit === \"quarter\" ? 3 : 1));\n                                    var end = d.getTime();\n                                    d.setTime((v + carry * timeUnitSize.hour + (end - start) * tickSize));\n                                    carry = d.getHours();\n                                    d.setHours(0);\n                                } else {\n                                    d.setMonth(d.getMonth() +\n                                        tickSize * (unit === \"quarter\" ? 3 : 1));\n                                }\n                            } else if (unit === \"year\") {\n                                d.setFullYear(d.getFullYear() + tickSize);\n                            } else {\n                                d.setTime((v + step) * 1000);\n                            }\n                        } while (v < axis.max && v !== prev);\n\n                        return ticks;\n                    };\n\n                    axis.tickFormatter = function (v, axis) {\n                        var d = dateGenerator(v, axis.options);\n                        // first check global format\n                        if (opts.timeformat !== null && opts.timeformat !== undefined) {\n                            return formatDate(d, opts.timeformat, opts.monthNames, opts.dayNames, axis.tickSize[1] === 'millisecond', axis);\n                        }\n                    };\n                }\n            });\n        });\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'time',\n        version: '1.0'\n    });\n\n    // Time-axis support used to be in Flot core, which exposed the\n    // formatDate function on the plot object.  Various plugins depend\n    // on the function, so we need to re-expose it here.\n\n    $.plot.formatDate = formatDate;\n    $.plot.dateGenerator = dateGenerator;\n})(jQuery);\n","/*\nAxis label plugin for engineering-flot\n\nDerived from:\nAxis Labels Plugin for flot.\nhttp://github.com/markrcote/flot-axislabels\n\nOriginal code is Copyright (c) 2010 Xuan Luo.\nOriginal code was released under the GPLv3 license by Xuan Luo, September 2010.\nOriginal code was rereleased under the MIT license by Xuan Luo, April 2012.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n(function($) {\n    \"use strict\";\n\n    var options = {\n        axisLabels: {\n            show: true\n        }\n    };\n\n    function AxisLabel(axisName, position, padding, placeholder, axisLabel, surface) {\n        this.axisName = axisName;\n        this.position = position;\n        this.padding = padding;\n        this.placeholder = placeholder;\n        this.axisLabel = axisLabel;\n        this.surface = surface;\n        this.width = 0;\n        this.height = 0;\n        this.elem = null;\n    }\n\n    AxisLabel.prototype.calculateSize = function() {\n        var axisId = this.axisName + 'Label',\n            layerId = axisId + 'Layer',\n            className = axisId + ' axisLabels';\n\n        var info = this.surface.getTextInfo(layerId, this.axisLabel, className);\n        this.labelWidth = info.width;\n        this.labelHeight = info.height;\n\n        if (this.position === 'left' || this.position === 'right') {\n            this.width = this.labelHeight + this.padding;\n            this.height = 0;\n        } else {\n            this.width = 0;\n            this.height = this.labelHeight + this.padding;\n        }\n    };\n\n    AxisLabel.prototype.transforms = function(degrees, x, y, svgLayer) {\n        var transforms = [], translate, rotate;\n        if (x !== 0 || y !== 0) {\n            translate = svgLayer.createSVGTransform();\n            translate.setTranslate(x, y);\n            transforms.push(translate);\n        }\n        if (degrees !== 0) {\n            rotate = svgLayer.createSVGTransform();\n            var centerX = Math.round(this.labelWidth / 2),\n                centerY = 0;\n            rotate.setRotate(degrees, centerX, centerY);\n            transforms.push(rotate);\n        }\n\n        return transforms;\n    };\n\n    AxisLabel.prototype.calculateOffsets = function(box) {\n        var offsets = {\n            x: 0,\n            y: 0,\n            degrees: 0\n        };\n        if (this.position === 'bottom') {\n            offsets.x = box.left + box.width / 2 - this.labelWidth / 2;\n            offsets.y = box.top + box.height - this.labelHeight;\n        } else if (this.position === 'top') {\n            offsets.x = box.left + box.width / 2 - this.labelWidth / 2;\n            offsets.y = box.top;\n        } else if (this.position === 'left') {\n            offsets.degrees = -90;\n            offsets.x = box.left - this.labelWidth / 2;\n            offsets.y = box.height / 2 + box.top;\n        } else if (this.position === 'right') {\n            offsets.degrees = 90;\n            offsets.x = box.left + box.width - this.labelWidth / 2;\n            offsets.y = box.height / 2 + box.top;\n        }\n        offsets.x = Math.round(offsets.x);\n        offsets.y = Math.round(offsets.y);\n\n        return offsets;\n    };\n\n    AxisLabel.prototype.cleanup = function() {\n        var axisId = this.axisName + 'Label',\n            layerId = axisId + 'Layer',\n            className = axisId + ' axisLabels';\n        this.surface.removeText(layerId, 0, 0, this.axisLabel, className);\n    };\n\n    AxisLabel.prototype.draw = function(box) {\n        var axisId = this.axisName + 'Label',\n            layerId = axisId + 'Layer',\n            className = axisId + ' axisLabels',\n            offsets = this.calculateOffsets(box),\n            style = {\n                position: 'absolute',\n                bottom: '',\n                right: '',\n                display: 'inline-block',\n                'white-space': 'nowrap'\n            };\n\n        var layer = this.surface.getSVGLayer(layerId);\n        var transforms = this.transforms(offsets.degrees, offsets.x, offsets.y, layer.parentNode);\n\n        this.surface.addText(layerId, 0, 0, this.axisLabel, className, undefined, undefined, undefined, undefined, transforms);\n        this.surface.render();\n        Object.keys(style).forEach(function(key) {\n            layer.style[key] = style[key];\n        });\n    };\n\n    function init(plot) {\n        plot.hooks.processOptions.push(function(plot, options) {\n            if (!options.axisLabels.show) {\n                return;\n            }\n\n            var axisLabels = {};\n            var defaultPadding = 2; // padding between axis and tick labels\n\n            plot.hooks.axisReserveSpace.push(function(plot, axis) {\n                var opts = axis.options;\n                var axisName = axis.direction + axis.n;\n\n                axis.labelHeight += axis.boxPosition.centerY;\n                axis.labelWidth += axis.boxPosition.centerX;\n\n                if (!opts || !opts.axisLabel || !axis.show) {\n                    return;\n                }\n\n                var padding = opts.axisLabelPadding === undefined\n                    ? defaultPadding\n                    : opts.axisLabelPadding;\n\n                var axisLabel = axisLabels[axisName];\n                if (!axisLabel) {\n                    axisLabel = new AxisLabel(axisName,\n                        opts.position, padding,\n                        plot.getPlaceholder()[0], opts.axisLabel, plot.getSurface());\n                    axisLabels[axisName] = axisLabel;\n                }\n\n                axisLabel.calculateSize();\n\n                // Incrementing the sizes of the tick labels.\n                axis.labelHeight += axisLabel.height;\n                axis.labelWidth += axisLabel.width;\n            });\n\n            // TODO - use the drawAxis hook\n            plot.hooks.draw.push(function(plot, ctx) {\n                $.each(plot.getAxes(), function(flotAxisName, axis) {\n                    var opts = axis.options;\n                    if (!opts || !opts.axisLabel || !axis.show) {\n                        return;\n                    }\n\n                    var axisName = axis.direction + axis.n;\n                    axisLabels[axisName].draw(axis.box);\n                });\n            });\n\n            plot.hooks.shutdown.push(function(plot, eventHolder) {\n                for (var axisName in axisLabels) {\n                    axisLabels[axisName].cleanup();\n                }\n            });\n        });\n    };\n\n    $.plot.plugins.push({\n        init: init,\n        options: options,\n        name: 'axisLabels',\n        version: '3.0'\n    });\n})(jQuery);\n","/* Flot plugin for selecting regions of a plot.\n\nCopyright (c) 2007-2014 IOLA and Ole Laursen.\nLicensed under the MIT license.\n\nThe plugin supports these options:\n\nselection: {\n    mode: null or \"x\" or \"y\" or \"xy\" or \"smart\",\n    color: color,\n    shape: \"round\" or \"miter\" or \"bevel\",\n    minSize: number of pixels\n}\n\nSelection support is enabled by setting the mode to one of \"x\", \"y\" or \"xy\".\nIn \"x\" mode, the user will only be able to specify the x range, similarly for\n\"y\" mode. For \"xy\", the selection becomes a rectangle where both ranges can be\nspecified. \"color\" is color of the selection (if you need to change the color\nlater on, you can get to it with plot.getOptions().selection.color). \"shape\"\nis the shape of the corners of the selection.\n\n\"minSize\" is the minimum size a selection can be in pixels. This value can\nbe customized to determine the smallest size a selection can be and still\nhave the selection rectangle be displayed. When customizing this value, the\nfact that it refers to pixels, not axis units must be taken into account.\nThus, for example, if there is a bar graph in time mode with BarWidth set to 1\nminute, setting \"minSize\" to 1 will not make the minimum selection size 1\nminute, but rather 1 pixel. Note also that setting \"minSize\" to 0 will prevent\n\"plotunselected\" events from being fired when the user clicks the mouse without\ndragging.\n\nWhen selection support is enabled, a \"plotselected\" event will be emitted on\nthe DOM element you passed into the plot function. The event handler gets a\nparameter with the ranges selected on the axes, like this:\n\n    placeholder.bind( \"plotselected\", function( event, ranges ) {\n        alert(\"You selected \" + ranges.xaxis.from + \" to \" + ranges.xaxis.to)\n        // similar for yaxis - with multiple axes, the extra ones are in\n        // x2axis, x3axis, ...\n    });\n\nThe \"plotselected\" event is only fired when the user has finished making the\nselection. A \"plotselecting\" event is fired during the process with the same\nparameters as the \"plotselected\" event, in case you want to know what's\nhappening while it's happening,\n\nA \"plotunselected\" event with no arguments is emitted when the user clicks the\nmouse to remove the selection. As stated above, setting \"minSize\" to 0 will\ndestroy this behavior.\n\nThe plugin allso adds the following methods to the plot object:\n\n- setSelection( ranges, preventEvent )\n\n  Set the selection rectangle. The passed in ranges is on the same form as\n  returned in the \"plotselected\" event. If the selection mode is \"x\", you\n  should put in either an xaxis range, if the mode is \"y\" you need to put in\n  an yaxis range and both xaxis and yaxis if the selection mode is \"xy\", like\n  this:\n\n    setSelection({ xaxis: { from: 0, to: 10 }, yaxis: { from: 40, to: 60 } });\n\n  setSelection will trigger the \"plotselected\" event when called. If you don't\n  want that to happen, e.g. if you're inside a \"plotselected\" handler, pass\n  true as the second parameter. If you are using multiple axes, you can\n  specify the ranges on any of those, e.g. as x2axis/x3axis/... instead of\n  xaxis, the plugin picks the first one it sees.\n\n- clearSelection( preventEvent )\n\n  Clear the selection rectangle. Pass in true to avoid getting a\n  \"plotunselected\" event.\n\n- getSelection()\n\n  Returns the current selection in the same format as the \"plotselected\"\n  event. If there's currently no selection, the function returns null.\n\n*/\n\n(function ($) {\n    function init(plot) {\n        var selection = {\n            first: {x: -1, y: -1},\n            second: {x: -1, y: -1},\n            show: false,\n            currentMode: 'xy',\n            active: false\n        };\n\n        var SNAPPING_CONSTANT = $.plot.uiConstants.SNAPPING_CONSTANT;\n\n        // FIXME: The drag handling implemented here should be\n        // abstracted out, there's some similar code from a library in\n        // the navigation plugin, this should be massaged a bit to fit\n        // the Flot cases here better and reused. Doing this would\n        // make this plugin much slimmer.\n        var savedhandlers = {};\n\n        var mouseUpHandler = null;\n\n        function onMouseMove(e) {\n            if (selection.active) {\n                updateSelection(e);\n\n                plot.getPlaceholder().trigger(\"plotselecting\", [ getSelection() ]);\n            }\n        }\n\n        function onMouseDown(e) {\n            // only accept left-click\n            if (e.which !== 1) return;\n\n            // cancel out any text selections\n            document.body.focus();\n\n            // prevent text selection and drag in old-school browsers\n            if (document.onselectstart !== undefined && savedhandlers.onselectstart == null) {\n                savedhandlers.onselectstart = document.onselectstart;\n                document.onselectstart = function () { return false; };\n            }\n            if (document.ondrag !== undefined && savedhandlers.ondrag == null) {\n                savedhandlers.ondrag = document.ondrag;\n                document.ondrag = function () { return false; };\n            }\n\n            setSelectionPos(selection.first, e);\n\n            selection.active = true;\n\n            // this is a bit silly, but we have to use a closure to be\n            // able to whack the same handler again\n            mouseUpHandler = function (e) { onMouseUp(e); };\n\n            $(document).one(\"mouseup\", mouseUpHandler);\n        }\n\n        function onMouseUp(e) {\n            mouseUpHandler = null;\n\n            // revert drag stuff for old-school browsers\n            if (document.onselectstart !== undefined) {\n                document.onselectstart = savedhandlers.onselectstart;\n            }\n\n            if (document.ondrag !== undefined) {\n                document.ondrag = savedhandlers.ondrag;\n            }\n\n            // no more dragging\n            selection.active = false;\n            updateSelection(e);\n\n            if (selectionIsSane()) {\n                triggerSelectedEvent();\n            } else {\n                // this counts as a clear\n                plot.getPlaceholder().trigger(\"plotunselected\", [ ]);\n                plot.getPlaceholder().trigger(\"plotselecting\", [ null ]);\n            }\n\n            return false;\n        }\n\n        function getSelection() {\n            if (!selectionIsSane()) return null;\n\n            if (!selection.show) return null;\n\n            var r = {},\n                c1 = {x: selection.first.x, y: selection.first.y},\n                c2 = {x: selection.second.x, y: selection.second.y};\n\n            if (selectionDirection(plot) === 'x') {\n                c1.y = 0;\n                c2.y = plot.height();\n            }\n\n            if (selectionDirection(plot) === 'y') {\n                c1.x = 0;\n                c2.x = plot.width();\n            }\n\n            $.each(plot.getAxes(), function (name, axis) {\n                if (axis.used) {\n                    var p1 = axis.c2p(c1[axis.direction]), p2 = axis.c2p(c2[axis.direction]);\n                    r[name] = { from: Math.min(p1, p2), to: Math.max(p1, p2) };\n                }\n            });\n            return r;\n        }\n\n        function triggerSelectedEvent() {\n            var r = getSelection();\n\n            plot.getPlaceholder().trigger(\"plotselected\", [ r ]);\n\n            // backwards-compat stuff, to be removed in future\n            if (r.xaxis && r.yaxis) {\n                plot.getPlaceholder().trigger(\"selected\", [ { x1: r.xaxis.from, y1: r.yaxis.from, x2: r.xaxis.to, y2: r.yaxis.to } ]);\n            }\n        }\n\n        function clamp(min, value, max) {\n            return value < min ? min : (value > max ? max : value);\n        }\n\n        function selectionDirection(plot) {\n            var o = plot.getOptions();\n\n            if (o.selection.mode === 'smart') {\n                return selection.currentMode;\n            } else {\n                return o.selection.mode;\n            }\n        }\n\n        function updateMode(pos) {\n            if (selection.first) {\n                var delta = {\n                    x: pos.x - selection.first.x,\n                    y: pos.y - selection.first.y\n                };\n\n                if (Math.abs(delta.x) < SNAPPING_CONSTANT) {\n                    selection.currentMode = 'y';\n                } else if (Math.abs(delta.y) < SNAPPING_CONSTANT) {\n                    selection.currentMode = 'x';\n                } else {\n                    selection.currentMode = 'xy';\n                }\n            }\n        }\n\n        function setSelectionPos(pos, e) {\n            var offset = plot.getPlaceholder().offset();\n            var plotOffset = plot.getPlotOffset();\n            pos.x = clamp(0, e.pageX - offset.left - plotOffset.left, plot.width());\n            pos.y = clamp(0, e.pageY - offset.top - plotOffset.top, plot.height());\n\n            if (pos !== selection.first) updateMode(pos);\n\n            if (selectionDirection(plot) === \"y\") {\n                pos.x = pos === selection.first ? 0 : plot.width();\n            }\n\n            if (selectionDirection(plot) === \"x\") {\n                pos.y = pos === selection.first ? 0 : plot.height();\n            }\n        }\n\n        function updateSelection(pos) {\n            if (pos.pageX == null) return;\n\n            setSelectionPos(selection.second, pos);\n            if (selectionIsSane()) {\n                selection.show = true;\n                plot.triggerRedrawOverlay();\n            } else clearSelection(true);\n        }\n\n        function clearSelection(preventEvent) {\n            if (selection.show) {\n                selection.show = false;\n                selection.currentMode = '';\n                plot.triggerRedrawOverlay();\n                if (!preventEvent) {\n                    plot.getPlaceholder().trigger(\"plotunselected\", [ ]);\n                }\n            }\n        }\n\n        // function taken from markings support in Flot\n        function extractRange(ranges, coord) {\n            var axis, from, to, key, axes = plot.getAxes();\n\n            for (var k in axes) {\n                axis = axes[k];\n                if (axis.direction === coord) {\n                    key = coord + axis.n + \"axis\";\n                    if (!ranges[key] && axis.n === 1) {\n                        // support x1axis as xaxis\n                        key = coord + \"axis\";\n                    }\n\n                    if (ranges[key]) {\n                        from = ranges[key].from;\n                        to = ranges[key].to;\n                        break;\n                    }\n                }\n            }\n\n            // backwards-compat stuff - to be removed in future\n            if (!ranges[key]) {\n                axis = coord === \"x\" ? plot.getXAxes()[0] : plot.getYAxes()[0];\n                from = ranges[coord + \"1\"];\n                to = ranges[coord + \"2\"];\n            }\n\n            // auto-reverse as an added bonus\n            if (from != null && to != null && from > to) {\n                var tmp = from;\n                from = to;\n                to = tmp;\n            }\n\n            return { from: from, to: to, axis: axis };\n        }\n\n        function setSelection(ranges, preventEvent) {\n            var range;\n\n            if (selectionDirection(plot) === \"y\") {\n                selection.first.x = 0;\n                selection.second.x = plot.width();\n            } else {\n                range = extractRange(ranges, \"x\");\n                selection.first.x = range.axis.p2c(range.from);\n                selection.second.x = range.axis.p2c(range.to);\n            }\n\n            if (selectionDirection(plot) === \"x\") {\n                selection.first.y = 0;\n                selection.second.y = plot.height();\n            } else {\n                range = extractRange(ranges, \"y\");\n                selection.first.y = range.axis.p2c(range.from);\n                selection.second.y = range.axis.p2c(range.to);\n            }\n\n            selection.show = true;\n            plot.triggerRedrawOverlay();\n            if (!preventEvent && selectionIsSane()) {\n                triggerSelectedEvent();\n            }\n        }\n\n        function selectionIsSane() {\n            var minSize = plot.getOptions().selection.minSize;\n            return Math.abs(selection.second.x - selection.first.x) >= minSize &&\n                Math.abs(selection.second.y - selection.first.y) >= minSize;\n        }\n\n        plot.clearSelection = clearSelection;\n        plot.setSelection = setSelection;\n        plot.getSelection = getSelection;\n\n        plot.hooks.bindEvents.push(function(plot, eventHolder) {\n            var o = plot.getOptions();\n            if (o.selection.mode != null) {\n                eventHolder.mousemove(onMouseMove);\n                eventHolder.mousedown(onMouseDown);\n            }\n        });\n\n        function drawSelectionDecorations(ctx, x, y, w, h, oX, oY, mode) {\n            var spacing = 3;\n            var fullEarWidth = 15;\n            var earWidth = Math.max(0, Math.min(fullEarWidth, w / 2 - 2, h / 2 - 2));\n            ctx.fillStyle = '#ffffff';\n\n            if (mode === 'xy') {\n                ctx.beginPath();\n                ctx.moveTo(x, y + earWidth);\n                ctx.lineTo(x - 3, y + earWidth);\n                ctx.lineTo(x - 3, y - 3);\n                ctx.lineTo(x + earWidth, y - 3);\n                ctx.lineTo(x + earWidth, y);\n                ctx.lineTo(x, y);\n                ctx.closePath();\n\n                ctx.moveTo(x, y + h - earWidth);\n                ctx.lineTo(x - 3, y + h - earWidth);\n                ctx.lineTo(x - 3, y + h + 3);\n                ctx.lineTo(x + earWidth, y + h + 3);\n                ctx.lineTo(x + earWidth, y + h);\n                ctx.lineTo(x, y + h);\n                ctx.closePath();\n\n                ctx.moveTo(x + w, y + earWidth);\n                ctx.lineTo(x + w + 3, y + earWidth);\n                ctx.lineTo(x + w + 3, y - 3);\n                ctx.lineTo(x + w - earWidth, y - 3);\n                ctx.lineTo(x + w - earWidth, y);\n                ctx.lineTo(x + w, y);\n                ctx.closePath();\n\n                ctx.moveTo(x + w, y + h - earWidth);\n                ctx.lineTo(x + w + 3, y + h - earWidth);\n                ctx.lineTo(x + w + 3, y + h + 3);\n                ctx.lineTo(x + w - earWidth, y + h + 3);\n                ctx.lineTo(x + w - earWidth, y + h);\n                ctx.lineTo(x + w, y + h);\n                ctx.closePath();\n\n                ctx.stroke();\n                ctx.fill();\n            }\n\n            x = oX;\n            y = oY;\n\n            if (mode === 'x') {\n                ctx.beginPath();\n                ctx.moveTo(x, y + fullEarWidth);\n                ctx.lineTo(x, y - fullEarWidth);\n                ctx.lineTo(x - spacing, y - fullEarWidth);\n                ctx.lineTo(x - spacing, y + fullEarWidth);\n                ctx.closePath();\n\n                ctx.moveTo(x + w, y + fullEarWidth);\n                ctx.lineTo(x + w, y - fullEarWidth);\n                ctx.lineTo(x + w + spacing, y - fullEarWidth);\n                ctx.lineTo(x + w + spacing, y + fullEarWidth);\n                ctx.closePath();\n                ctx.stroke();\n                ctx.fill();\n            }\n\n            if (mode === 'y') {\n                ctx.beginPath();\n\n                ctx.moveTo(x - fullEarWidth, y);\n                ctx.lineTo(x + fullEarWidth, y);\n                ctx.lineTo(x + fullEarWidth, y - spacing);\n                ctx.lineTo(x - fullEarWidth, y - spacing);\n                ctx.closePath();\n\n                ctx.moveTo(x - fullEarWidth, y + h);\n                ctx.lineTo(x + fullEarWidth, y + h);\n                ctx.lineTo(x + fullEarWidth, y + h + spacing);\n                ctx.lineTo(x - fullEarWidth, y + h + spacing);\n                ctx.closePath();\n                ctx.stroke();\n                ctx.fill();\n            }\n        }\n\n        plot.hooks.drawOverlay.push(function (plot, ctx) {\n            // draw selection\n            if (selection.show && selectionIsSane()) {\n                var plotOffset = plot.getPlotOffset();\n                var o = plot.getOptions();\n\n                ctx.save();\n                ctx.translate(plotOffset.left, plotOffset.top);\n\n                var c = $.color.parse(o.selection.color);\n\n                ctx.strokeStyle = c.scale('a', 1).toString();\n                ctx.lineWidth = 1;\n                ctx.lineJoin = o.selection.shape;\n                ctx.fillStyle = c.scale('a', 0.4).toString();\n\n                var x = Math.min(selection.first.x, selection.second.x) + 0.5,\n                    oX = x,\n                    y = Math.min(selection.first.y, selection.second.y) + 0.5,\n                    oY = y,\n                    w = Math.abs(selection.second.x - selection.first.x) - 1,\n                    h = Math.abs(selection.second.y - selection.first.y) - 1;\n\n                if (selectionDirection(plot) === 'x') {\n                    h += y;\n                    y = 0;\n                }\n\n                if (selectionDirection(plot) === 'y') {\n                    w += x;\n                    x = 0;\n                }\n\n                ctx.fillRect(0, 0, plot.width(), plot.height());\n                ctx.clearRect(x, y, w, h);\n                drawSelectionDecorations(ctx, x, y, w, h, oX, oY, selectionDirection(plot));\n\n                ctx.restore();\n            }\n        });\n\n        plot.hooks.shutdown.push(function (plot, eventHolder) {\n            eventHolder.unbind(\"mousemove\", onMouseMove);\n            eventHolder.unbind(\"mousedown\", onMouseDown);\n\n            if (mouseUpHandler) {\n                $(document).unbind(\"mouseup\", mouseUpHandler);\n            }\n        });\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: {\n            selection: {\n                mode: null, // one of null, \"x\", \"y\" or \"xy\"\n                color: \"#888888\",\n                shape: \"round\", // one of \"round\", \"miter\", or \"bevel\"\n                minSize: 5 // minimum number of pixels\n            }\n        },\n        name: 'selection',\n        version: '1.1'\n    });\n})(jQuery);\n","/** ## jquery.flot.composeImages.js\n\nThis plugin is used to expose a function used to overlap several canvases and\nSVGs, for the purpose of creating a snaphot out of them.\n\n### When composeImages is used:\nWhen multiple canvases and SVGs have to be overlapped into a single image\nand their offset on the page, must be preserved.\n\n### Where can be used:\nIn creating a downloadable snapshot of the plots, axes, cursors etc of a graph.\n\n### How it works:\nThe entry point is composeImages function. It expects an array of objects,\nwhich should be either canvases or SVGs (or a mix). It does a prevalidation\nof them, by verifying if they will be usable or not, later in the flow.\nAfter selecting only usable sources, it passes them to getGenerateTempImg\nfunction, which generates temporary images out of them. This function\nexpects that some of the passed sources (canvas or SVG) may still have\nproblems being converted to an image and makes sure the promises system,\nused by composeImages function, moves forward. As an example, SVGs with\nmissing information from header or with unsupported content, may lead to\nfailure in generating the temporary image. Temporary images are required\nmostly on extracting content from SVGs, but this is also where the x/y\noffsets are extracted for each image which will be added. For SVGs in\nparticular, their CSS rules have to be applied.\nAfter all temporary images are generated, they are overlapped using\ngetExecuteImgComposition function. This is where the destination canvas\nis set to the proper dimensions. It is then output by composeImages.\nThis function returns a promise, which can be used to wait for the whole\ncomposition process. It requires to be asynchronous, because this is how\ntemporary images load their data.\n*/\n\n(function($) {\n    \"use strict\";\n    const GENERALFAILURECALLBACKERROR = -100; //simply a negative number\n    const SUCCESSFULIMAGEPREPARATION = 0;\n    const EMPTYARRAYOFIMAGESOURCES = -1;\n    const NEGATIVEIMAGESIZE = -2;\n    var pixelRatio = 1;\n    var browser = $.plot.browser;\n    var getPixelRatio = browser.getPixelRatio;\n\n    function composeImages(canvasOrSvgSources, destinationCanvas) {\n        var validCanvasOrSvgSources = canvasOrSvgSources.filter(isValidSource);\n        pixelRatio = getPixelRatio(destinationCanvas.getContext('2d'));\n\n        var allImgCompositionPromises = validCanvasOrSvgSources.map(function(validCanvasOrSvgSource) {\n            var tempImg = new Image();\n            var currentPromise = new Promise(getGenerateTempImg(tempImg, validCanvasOrSvgSource));\n            return currentPromise;\n        });\n\n        var lastPromise = Promise.all(allImgCompositionPromises).then(getExecuteImgComposition(destinationCanvas), failureCallback);\n        return lastPromise;\n    }\n\n    function isValidSource(canvasOrSvgSource) {\n        var isValidFromCanvas = true;\n        var isValidFromContent = true;\n        if ((canvasOrSvgSource === null) || (canvasOrSvgSource === undefined)) {\n            isValidFromContent = false;\n        } else {\n            if (canvasOrSvgSource.tagName === 'CANVAS') {\n                if ((canvasOrSvgSource.getBoundingClientRect().right === canvasOrSvgSource.getBoundingClientRect().left) ||\n                    (canvasOrSvgSource.getBoundingClientRect().bottom === canvasOrSvgSource.getBoundingClientRect().top)) {\n                    isValidFromCanvas = false;\n                }\n            }\n        }\n        return isValidFromContent && isValidFromCanvas && (window.getComputedStyle(canvasOrSvgSource).visibility === 'visible');\n    }\n\n    function getGenerateTempImg(tempImg, canvasOrSvgSource) {\n        tempImg.sourceDescription = '<info className=\"' + canvasOrSvgSource.className + '\" tagName=\"' + canvasOrSvgSource.tagName + '\" id=\"' + canvasOrSvgSource.id + '\">';\n        tempImg.sourceComponent = canvasOrSvgSource;\n\n        return function doGenerateTempImg(successCallbackFunc, failureCallbackFunc) {\n            tempImg.onload = function(evt) {\n                tempImg.successfullyLoaded = true;\n                successCallbackFunc(tempImg);\n            };\n\n            tempImg.onabort = function(evt) {\n                tempImg.successfullyLoaded = false;\n                console.log('Can\\'t generate temp image from ' + tempImg.sourceDescription + '. It is possible that it is missing some properties or its content is not supported by this browser. Source component:', tempImg.sourceComponent);\n                successCallbackFunc(tempImg); //call successCallback, to allow snapshot of all working images\n            };\n\n            tempImg.onerror = function(evt) {\n                tempImg.successfullyLoaded = false;\n                console.log('Can\\'t generate temp image from ' + tempImg.sourceDescription + '. It is possible that it is missing some properties or its content is not supported by this browser. Source component:', tempImg.sourceComponent);\n                successCallbackFunc(tempImg); //call successCallback, to allow snapshot of all working images\n            };\n\n            generateTempImageFromCanvasOrSvg(canvasOrSvgSource, tempImg);\n        };\n    }\n\n    function getExecuteImgComposition(destinationCanvas) {\n        return function executeImgComposition(tempImgs) {\n            var compositionResult = copyImgsToCanvas(tempImgs, destinationCanvas);\n            return compositionResult;\n        };\n    }\n\n    function copyCanvasToImg(canvas, img) {\n        img.src = canvas.toDataURL('image/png');\n    }\n\n    function getCSSRules(document) {\n        var styleSheets = document.styleSheets,\n            rulesList = [];\n        for (var i = 0; i < styleSheets.length; i++) {\n            // in Chrome, the external CSS files are empty when the page is directly loaded from disk\n            var rules = styleSheets[i].cssRules || [];\n            for (var j = 0; j < rules.length; j++) {\n                var rule = rules[j];\n                rulesList.push(rule.cssText);\n            }\n        }\n        return rulesList;\n    }\n\n    function embedCSSRulesInSVG(rules, svg) {\n        var text = [\n            '<svg class=\"snapshot ' + svg.classList + '\" width=\"' + svg.width.baseVal.value * pixelRatio + '\" height=\"' + svg.height.baseVal.value * pixelRatio + '\" viewBox=\"0 0 ' + svg.width.baseVal.value + ' ' + svg.height.baseVal.value + '\" xmlns=\"http://www.w3.org/2000/svg\">',\n            '<style>',\n            '/* <![CDATA[ */',\n            rules.join('\\n'),\n            '/* ]]> */',\n            '</style>',\n            svg.innerHTML,\n            '</svg>'\n        ].join('\\n');\n        return text;\n    }\n\n    function copySVGToImgMostBrowsers(svg, img) {\n        var rules = getCSSRules(document),\n            source = embedCSSRulesInSVG(rules, svg);\n\n        source = patchSVGSource(source);\n\n        var blob = new Blob([source], {type: \"image/svg+xml;charset=utf-8\"}),\n            domURL = self.URL || self.webkitURL || self,\n            url = domURL.createObjectURL(blob);\n        img.src = url;\n    }\n\n    function copySVGToImgSafari(svg, img) {\n        // Use this method to convert a string buffer array to a binary string.\n        // Do so by breaking up large strings into smaller substrings; this is necessary to avoid the\n        // \"maximum call stack size exceeded\" exception that can happen when calling 'String.fromCharCode.apply'\n        // with a very long array.\n        function buildBinaryString (arrayBuffer) {\n            var binaryString = \"\";\n            const utf8Array = new Uint8Array(arrayBuffer);\n            const blockSize = 16384;\n            for (var i = 0; i < utf8Array.length; i = i + blockSize) {\n                const binarySubString = String.fromCharCode.apply(null, utf8Array.subarray(i, i + blockSize));\n                binaryString = binaryString + binarySubString;\n            }\n            return binaryString;\n        };\n\n        var rules = getCSSRules(document),\n            source = embedCSSRulesInSVG(rules, svg),\n            data,\n            utf8BinaryString;\n\n        source = patchSVGSource(source);\n\n        // Encode the string as UTF-8 and convert it to a binary string. The UTF-8 encoding is required to\n        // capture unicode characters correctly.\n        utf8BinaryString = buildBinaryString(new (TextEncoder || TextEncoderLite)('utf-8').encode(source));\n\n        data = \"data:image/svg+xml;base64,\" + btoa(utf8BinaryString);\n        img.src = data;\n    }\n\n    function patchSVGSource(svgSource) {\n        var source = '';\n        //add name spaces.\n        if (!svgSource.match(/^<svg[^>]+xmlns=\"http:\\/\\/www\\.w3\\.org\\/2000\\/svg\"/)) {\n            source = svgSource.replace(/^<svg/, '<svg xmlns=\"http://www.w3.org/2000/svg\"');\n        }\n        if (!svgSource.match(/^<svg[^>]+\"http:\\/\\/www\\.w3\\.org\\/1999\\/xlink\"/)) {\n            source = svgSource.replace(/^<svg/, '<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\"');\n        }\n\n        //add xml declaration\n        return '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source;\n    }\n\n    function copySVGToImg(svg, img) {\n        if (browser.isSafari() || browser.isMobileSafari()) {\n            copySVGToImgSafari(svg, img);\n        } else {\n            copySVGToImgMostBrowsers(svg, img);\n        }\n    }\n\n    function adaptDestSizeToZoom(destinationCanvas, sources) {\n        function containsSVGs(source) {\n            return source.srcImgTagName === 'svg';\n        }\n\n        if (sources.find(containsSVGs) !== undefined) {\n            if (pixelRatio < 1) {\n                destinationCanvas.width = destinationCanvas.width * pixelRatio;\n                destinationCanvas.height = destinationCanvas.height * pixelRatio;\n            }\n        }\n    }\n\n    function prepareImagesToBeComposed(sources, destination) {\n        var result = SUCCESSFULIMAGEPREPARATION;\n        if (sources.length === 0) {\n            result = EMPTYARRAYOFIMAGESOURCES; //nothing to do if called without sources\n        } else {\n            var minX = sources[0].genLeft;\n            var minY = sources[0].genTop;\n            var maxX = sources[0].genRight;\n            var maxY = sources[0].genBottom;\n            var i = 0;\n\n            for (i = 1; i < sources.length; i++) {\n                if (minX > sources[i].genLeft) {\n                    minX = sources[i].genLeft;\n                }\n\n                if (minY > sources[i].genTop) {\n                    minY = sources[i].genTop;\n                }\n            }\n\n            for (i = 1; i < sources.length; i++) {\n                if (maxX < sources[i].genRight) {\n                    maxX = sources[i].genRight;\n                }\n\n                if (maxY < sources[i].genBottom) {\n                    maxY = sources[i].genBottom;\n                }\n            }\n\n            if ((maxX - minX <= 0) || (maxY - minY <= 0)) {\n                result = NEGATIVEIMAGESIZE; //this might occur on hidden images\n            } else {\n                destination.width = Math.round(maxX - minX);\n                destination.height = Math.round(maxY - minY);\n\n                for (i = 0; i < sources.length; i++) {\n                    sources[i].xCompOffset = sources[i].genLeft - minX;\n                    sources[i].yCompOffset = sources[i].genTop - minY;\n                }\n\n                adaptDestSizeToZoom(destination, sources);\n            }\n        }\n        return result;\n    }\n\n    function copyImgsToCanvas(sources, destination) {\n        var prepareImagesResult = prepareImagesToBeComposed(sources, destination);\n        if (prepareImagesResult === SUCCESSFULIMAGEPREPARATION) {\n            var destinationCtx = destination.getContext('2d');\n\n            for (var i = 0; i < sources.length; i++) {\n                if (sources[i].successfullyLoaded === true) {\n                    destinationCtx.drawImage(sources[i], sources[i].xCompOffset * pixelRatio, sources[i].yCompOffset * pixelRatio);\n                }\n            }\n        }\n        return prepareImagesResult;\n    }\n\n    function adnotateDestImgWithBoundingClientRect(srcCanvasOrSvg, destImg) {\n        destImg.genLeft = srcCanvasOrSvg.getBoundingClientRect().left;\n        destImg.genTop = srcCanvasOrSvg.getBoundingClientRect().top;\n\n        if (srcCanvasOrSvg.tagName === 'CANVAS') {\n            destImg.genRight = destImg.genLeft + srcCanvasOrSvg.width;\n            destImg.genBottom = destImg.genTop + srcCanvasOrSvg.height;\n        }\n\n        if (srcCanvasOrSvg.tagName === 'svg') {\n            destImg.genRight = srcCanvasOrSvg.getBoundingClientRect().right;\n            destImg.genBottom = srcCanvasOrSvg.getBoundingClientRect().bottom;\n        }\n    }\n\n    function generateTempImageFromCanvasOrSvg(srcCanvasOrSvg, destImg) {\n        if (srcCanvasOrSvg.tagName === 'CANVAS') {\n            copyCanvasToImg(srcCanvasOrSvg, destImg);\n        }\n\n        if (srcCanvasOrSvg.tagName === 'svg') {\n            copySVGToImg(srcCanvasOrSvg, destImg);\n        }\n\n        destImg.srcImgTagName = srcCanvasOrSvg.tagName;\n        adnotateDestImgWithBoundingClientRect(srcCanvasOrSvg, destImg);\n    }\n\n    function failureCallback() {\n        return GENERALFAILURECALLBACKERROR;\n    }\n\n    // used for testing\n    $.plot.composeImages = composeImages;\n\n    function init(plot) {\n        // used to extend the public API of the plot\n        plot.composeImages = composeImages;\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        name: 'composeImages',\n        version: '1.0'\n    });\n})(jQuery);\n","/* Flot plugin for drawing legends.\n\n*/\n\n(function($) {\n    var defaultOptions = {\n        legend: {\n            show: false,\n            labelFormatter: null, // fn: string -> string\n            container: null, // container (as jQuery object) to put legend in, null means default on top of graph\n            position: 'ne', // position of default legend container within plot\n            margin: 5, // distance from grid edge to default legend container within plot\n            sorted: null // default to no legend sorting\n        }\n    };\n\n    function insertLegend(plot, options, placeholder, legendEntries) {\n        // clear before redraw\n        if (options.legend.container != null) {\n            $(options.legend.container).html('');\n        } else {\n            placeholder.find('.legend').remove();\n        }\n\n        if (!options.legend.show) {\n            return;\n        }\n\n        // Save the legend entries in legend options\n        var entries = options.legend.legendEntries = legendEntries,\n            plotOffset = options.legend.plotOffset = plot.getPlotOffset(),\n            html = [],\n            entry, labelHtml, iconHtml,\n            maxLabelLength = 0,\n            j = 0,\n            pos = \"\",\n            p = options.legend.position,\n            m = options.legend.margin,\n            shape = {\n                name: '',\n                label: '',\n                xPos: '',\n                yPos: ''\n            };\n\n        html[j++] = '<svg class=\"legendLayer\" style=\"width:inherit;height:inherit;\">';\n        html[j++] = '<rect class=\"background\" width=\"100%\" height=\"100%\"/>';\n        html[j++] = svgShapeDefs;\n\n        // Generate html for icons and labels from a list of entries\n        for (var i = 0; i < entries.length; ++i) {\n            entry = entries[i];\n            iconHtml = '';\n            shape.label = entry.label;\n            shape.xPos = '0em';\n            shape.yPos = i * 1.5 + 'em';\n            // area\n            if (entry.options.lines.show && entry.options.lines.fill) {\n                shape.name = 'area';\n                shape.fillColor = entry.color;\n                iconHtml += getEntryIconHtml(shape);\n            }\n            // bars\n            if (entry.options.bars.show) {\n                shape.name = 'bar';\n                shape.fillColor = entry.color;\n                iconHtml += getEntryIconHtml(shape);\n            }\n            // lines\n            if (entry.options.lines.show && !entry.options.lines.fill) {\n                shape.name = 'line';\n                shape.strokeColor = entry.color;\n                shape.strokeWidth = entry.options.lines.lineWidth;\n                iconHtml += getEntryIconHtml(shape);\n            }\n            // points\n            if (entry.options.points.show) {\n                shape.name = entry.options.points.symbol;\n                shape.strokeColor = entry.color;\n                shape.fillColor = entry.options.points.fillColor;\n                shape.strokeWidth = entry.options.points.lineWidth;\n                iconHtml += getEntryIconHtml(shape);\n            }\n\n            maxLabelLength = maxLabelLength < shape.label.length ? shape.label.length : maxLabelLength;\n            labelHtml = '<text x=\"' + shape.xPos + '\" y=\"' + shape.yPos + '\" text-anchor=\"start\"><tspan dx=\"2em\" dy=\"1.2em\">' + shape.label + '</tspan></text>'\n            html[j++] = '<g>' + iconHtml + labelHtml + '</g>';\n        }\n\n        html[j++] = '</svg>';\n        if (m[0] == null) {\n            m = [m, m];\n        }\n\n        if (p.charAt(0) === 'n') {\n            pos += 'top:' + (m[1] + plotOffset.top) + 'px;';\n        } else if (p.charAt(0) === 's') {\n            pos += 'bottom:' + (m[1] + plotOffset.bottom) + 'px;';\n        }\n\n        if (p.charAt(1) === 'e') {\n            pos += 'right:' + (m[0] + plotOffset.right) + 'px;';\n        } else if (p.charAt(1) === 'w') {\n            pos += 'left:' + (m[0] + plotOffset.left) + 'px;';\n        }\n\n        var legendEl,\n            width = 3 + maxLabelLength / 2,\n            height = entries.length * 1.6;\n        if (!options.legend.container) {\n            legendEl = $('<div class=\"legend\" style=\"position:absolute;' + pos + '\">' + html.join('') + '</div>').appendTo(placeholder);\n            legendEl.css('width', width + 'em');\n            legendEl.css('height', height + 'em');\n            legendEl.css('pointerEvents', 'none');\n        } else {\n            legendEl = $(html.join('')).appendTo(options.legend.container)[0];\n            options.legend.container.style.width = width + 'em';\n            options.legend.container.style.height = height + 'em';\n        }\n    }\n\n    // Generate html for a shape\n    function getEntryIconHtml(shape) {\n        var html = '',\n            name = shape.name,\n            x = shape.xPos,\n            y = shape.yPos,\n            fill = shape.fillColor,\n            stroke = shape.strokeColor,\n            width = shape.strokeWidth;\n        switch (name) {\n            case 'circle':\n                html = '<use xlink:href=\"#circle\" class=\"legendIcon\" ' +\n                    'x=\"' + x + '\" ' +\n                    'y=\"' + y + '\" ' +\n                    'fill=\"' + fill + '\" ' +\n                    'stroke=\"' + stroke + '\" ' +\n                    'stroke-width=\"' + width + '\" ' +\n                    'width=\"1.5em\" height=\"1.5em\"' +\n                    '/>';\n                break;\n            case 'diamond':\n                html = '<use xlink:href=\"#diamond\" class=\"legendIcon\" ' +\n                    'x=\"' + x + '\" ' +\n                    'y=\"' + y + '\" ' +\n                    'fill=\"' + fill + '\" ' +\n                    'stroke=\"' + stroke + '\" ' +\n                    'stroke-width=\"' + width + '\" ' +\n                    'width=\"1.5em\" height=\"1.5em\"' +\n                    '/>';\n                break;\n            case 'cross':\n                html = '<use xlink:href=\"#cross\" class=\"legendIcon\" ' +\n                    'x=\"' + x + '\" ' +\n                    'y=\"' + y + '\" ' +\n                    // 'fill=\"' + fill + '\" ' +\n                    'stroke=\"' + stroke + '\" ' +\n                    'stroke-width=\"' + width + '\" ' +\n                    'width=\"1.5em\" height=\"1.5em\"' +\n                    '/>';\n                break;\n            case 'rectangle':\n                html = '<use xlink:href=\"#rectangle\" class=\"legendIcon\" ' +\n                    'x=\"' + x + '\" ' +\n                    'y=\"' + y + '\" ' +\n                    'fill=\"' + fill + '\" ' +\n                    'stroke=\"' + stroke + '\" ' +\n                    'stroke-width=\"' + width + '\" ' +\n                    'width=\"1.5em\" height=\"1.5em\"' +\n                    '/>';\n                break;\n            case 'plus':\n                html = '<use xlink:href=\"#plus\" class=\"legendIcon\" ' +\n                    'x=\"' + x + '\" ' +\n                    'y=\"' + y + '\" ' +\n                    // 'fill=\"' + fill + '\" ' +\n                    'stroke=\"' + stroke + '\" ' +\n                    'stroke-width=\"' + width + '\" ' +\n                    'width=\"1.5em\" height=\"1.5em\"' +\n                    '/>';\n                break;\n            case 'bar':\n                html = '<use xlink:href=\"#bars\" class=\"legendIcon\" ' +\n                    'x=\"' + x + '\" ' +\n                    'y=\"' + y + '\" ' +\n                    'fill=\"' + fill + '\" ' +\n                    // 'stroke=\"' + stroke + '\" ' +\n                    // 'stroke-width=\"' + width + '\" ' +\n                    'width=\"1.5em\" height=\"1.5em\"' +\n                    '/>';\n                break;\n            case 'area':\n                html = '<use xlink:href=\"#area\" class=\"legendIcon\" ' +\n                    'x=\"' + x + '\" ' +\n                    'y=\"' + y + '\" ' +\n                    'fill=\"' + fill + '\" ' +\n                    // 'stroke=\"' + stroke + '\" ' +\n                    // 'stroke-width=\"' + width + '\" ' +\n                    'width=\"1.5em\" height=\"1.5em\"' +\n                    '/>';\n                break;\n            case 'line':\n                html = '<use xlink:href=\"#line\" class=\"legendIcon\" ' +\n                    'x=\"' + x + '\" ' +\n                    'y=\"' + y + '\" ' +\n                    // 'fill=\"' + fill + '\" ' +\n                    'stroke=\"' + stroke + '\" ' +\n                    'stroke-width=\"' + width + '\" ' +\n                    'width=\"1.5em\" height=\"1.5em\"' +\n                    '/>';\n                break;\n            default:\n                // default is circle\n                html = '<use xlink:href=\"#circle\" class=\"legendIcon\" ' +\n                    'x=\"' + x + '\" ' +\n                    'y=\"' + y + '\" ' +\n                    'fill=\"' + fill + '\" ' +\n                    'stroke=\"' + stroke + '\" ' +\n                    'stroke-width=\"' + width + '\" ' +\n                    'width=\"1.5em\" height=\"1.5em\"' +\n                    '/>';\n        }\n\n        return html;\n    }\n\n    // Define svg symbols for shapes\n    var svgShapeDefs = '' +\n        '<defs>' +\n            '<symbol id=\"line\" fill=\"none\" viewBox=\"-5 -5 25 25\">' +\n                '<polyline points=\"0,15 5,5 10,10 15,0\"/>' +\n            '</symbol>' +\n\n            '<symbol id=\"area\" stroke-width=\"1\" viewBox=\"-5 -5 25 25\">' +\n                '<polyline points=\"0,15 5,5 10,10 15,0, 15,15, 0,15\"/>' +\n            '</symbol>' +\n\n            '<symbol id=\"bars\" stroke-width=\"1\" viewBox=\"-5 -5 25 25\">' +\n                '<polyline points=\"1.5,15.5 1.5,12.5, 4.5,12.5 4.5,15.5 6.5,15.5 6.5,3.5, 9.5,3.5 9.5,15.5 11.5,15.5 11.5,7.5 14.5,7.5 14.5,15.5 1.5,15.5\"/>' +\n            '</symbol>' +\n\n            '<symbol id=\"circle\" viewBox=\"-5 -5 25 25\">' +\n                '<circle cx=\"0\" cy=\"15\" r=\"2.5\"/>' +\n                '<circle cx=\"5\" cy=\"5\" r=\"2.5\"/>' +\n                '<circle cx=\"10\" cy=\"10\" r=\"2.5\"/>' +\n                '<circle cx=\"15\" cy=\"0\" r=\"2.5\"/>' +\n            '</symbol>' +\n\n            '<symbol id=\"rectangle\" viewBox=\"-5 -5 25 25\">' +\n                '<rect x=\"-2.1\" y=\"12.9\" width=\"4.2\" height=\"4.2\"/>' +\n                '<rect x=\"2.9\" y=\"2.9\" width=\"4.2\" height=\"4.2\"/>' +\n                '<rect x=\"7.9\" y=\"7.9\" width=\"4.2\" height=\"4.2\"/>' +\n                '<rect x=\"12.9\" y=\"-2.1\" width=\"4.2\" height=\"4.2\"/>' +\n            '</symbol>' +\n\n            '<symbol id=\"diamond\" viewBox=\"-5 -5 25 25\">' +\n                '<path d=\"M-3,15 L0,12 L3,15, L0,18 Z\"/>' +\n                '<path d=\"M2,5 L5,2 L8,5, L5,8 Z\"/>' +\n                '<path d=\"M7,10 L10,7 L13,10, L10,13 Z\"/>' +\n                '<path d=\"M12,0 L15,-3 L18,0, L15,3 Z\"/>' +\n            '</symbol>' +\n\n            '<symbol id=\"cross\" fill=\"none\" viewBox=\"-5 -5 25 25\">' +\n                '<path d=\"M-2.1,12.9 L2.1,17.1, M2.1,12.9 L-2.1,17.1 Z\"/>' +\n                '<path d=\"M2.9,2.9 L7.1,7.1 M7.1,2.9 L2.9,7.1 Z\"/>' +\n                '<path d=\"M7.9,7.9 L12.1,12.1 M12.1,7.9 L7.9,12.1 Z\"/>' +\n                '<path d=\"M12.9,-2.1 L17.1,2.1 M17.1,-2.1 L12.9,2.1 Z\"/>' +\n            '</symbol>' +\n\n            '<symbol id=\"plus\" fill=\"none\" viewBox=\"-5 -5 25 25\">' +\n                '<path d=\"M0,12 L0,18, M-3,15 L3,15 Z\"/>' +\n                '<path d=\"M5,2 L5,8 M2,5 L8,5 Z\"/>' +\n                '<path d=\"M10,7 L10,13 M7,10 L13,10 Z\"/>' +\n                '<path d=\"M15,-3 L15,3 M12,0 L18,0 Z\"/>' +\n            '</symbol>' +\n        '</defs>';\n\n    // Generate a list of legend entries in their final order\n    function getLegendEntries(series, labelFormatter, sorted) {\n        var lf = labelFormatter,\n            legendEntries = series.map(function(s, i) {\n                return {\n                    label: (lf ? lf(s.label, s) : s.label) || 'Plot ' + (i + 1),\n                    color: s.color,\n                    options: {\n                        lines: s.lines,\n                        points: s.points,\n                        bars: s.bars\n                    }\n                };\n            });\n\n        // Sort the legend using either the default or a custom comparator\n        if (sorted) {\n            if ($.isFunction(sorted)) {\n                legendEntries.sort(sorted);\n            } else if (sorted === 'reverse') {\n                legendEntries.reverse();\n            } else {\n                var ascending = (sorted !== 'descending');\n                legendEntries.sort(function(a, b) {\n                    return a.label === b.label\n                        ? 0\n                        : ((a.label < b.label) !== ascending ? 1 : -1 // Logical XOR\n                        );\n                });\n            }\n        }\n\n        return legendEntries;\n    }\n\n    // return false if opts1 same as opts2\n    function checkOptions(opts1, opts2) {\n        for (var prop in opts1) {\n            if (opts1.hasOwnProperty(prop)) {\n                if (opts1[prop] !== opts2[prop]) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    // Compare two lists of legend entries\n    function shouldRedraw(oldEntries, newEntries) {\n        if (!oldEntries || !newEntries) {\n            return true;\n        }\n\n        if (oldEntries.length !== newEntries.length) {\n            return true;\n        }\n        var i, newEntry, oldEntry, newOpts, oldOpts;\n        for (i = 0; i < newEntries.length; i++) {\n            newEntry = newEntries[i];\n            oldEntry = oldEntries[i];\n\n            if (newEntry.label !== oldEntry.label) {\n                return true;\n            }\n\n            if (newEntry.color !== oldEntry.color) {\n                return true;\n            }\n\n            // check for changes in lines options\n            newOpts = newEntry.options.lines;\n            oldOpts = oldEntry.options.lines;\n            if (checkOptions(newOpts, oldOpts)) {\n                return true;\n            }\n\n            // check for changes in points options\n            newOpts = newEntry.options.points;\n            oldOpts = oldEntry.options.points;\n            if (checkOptions(newOpts, oldOpts)) {\n                return true;\n            }\n\n            // check for changes in bars options\n            newOpts = newEntry.options.bars;\n            oldOpts = oldEntry.options.bars;\n            if (checkOptions(newOpts, oldOpts)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    function init(plot) {\n        plot.hooks.setupGrid.push(function (plot) {\n            var options = plot.getOptions();\n            var series = plot.getData(),\n                labelFormatter = options.legend.labelFormatter,\n                oldEntries = options.legend.legendEntries,\n                oldPlotOffset = options.legend.plotOffset,\n                newEntries = getLegendEntries(series, labelFormatter, options.legend.sorted),\n                newPlotOffset = plot.getPlotOffset();\n\n            if (shouldRedraw(oldEntries, newEntries) ||\n                checkOptions(oldPlotOffset, newPlotOffset)) {\n                insertLegend(plot, options, plot.getPlaceholder(), newEntries);\n            }\n        });\n    }\n\n    $.plot.plugins.push({\n        init: init,\n        options: defaultOptions,\n        name: 'legend',\n        version: '1.0'\n    });\n})(jQuery);\n"]}